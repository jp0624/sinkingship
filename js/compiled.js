function probeCarousel(t){var e=(SinkingShip[t].pages.length,SinkingShip[t].pages[0][0].width),i=(SinkingShip[t].scrollerWidth,$(SinkingShip[t].scroller).attr("class"));probeHighlightPage(i,SinkingShip[t].currentPage.pageX,3),SinkingShip[t].on("scrollStart",function(){"seriesNavCarousel"==t&&$(".pg-series > nav").addClass("disabled"),"seriesNewsCarousel"==t&&$(".pg-news > nav").addClass("disabled"),"careersCarousel"==t&&$(".pg-careers > nav").addClass("disabled")}),SinkingShip[t].on("scrollEnd",function(){if("seriesNavCarousel"==t){var r=$(".series-carousel-nav > li").length;$(".pg-series nav").removeClass("disabled"),$(".series-carousel-nav-wrapper").parent("nav").removeClass("scrollStart scrollEnd "),0==this.currentPage.pageX?$(".series-carousel-nav-wrapper").parent("nav").addClass("scrollStart"):this.currentPage.pageX==r-1&&$(".series-carousel-nav-wrapper").parent("nav").addClass("scrollEnd")}if("seriesNewsCarousel"==t){var r=$(".news-carousel > li").length;$(".pg-news nav").removeClass("disabled"),$(".news-carousel-wrapper").closest(".pg-news").find("nav").removeClass("scrollStart scrollEnd"),0==this.currentPage.pageX?$(".news-carousel-wrapper").closest(".pg-news").find("nav").addClass("scrollStart"):this.currentPage.pageX==r-1&&$(".news-carousel-wrapper").closest(".pg-news").find("nav").addClass("scrollEnd"),console.log("NEWS CAROUSEL"),console.log("this.currentPage.pageX ",this.currentPage.pageX),console.log("totalItems ",r)}if("careersCarousel"==t){var r=$(".careers-carousel > li").length;$(".pg-careers nav").removeClass("disabled"),$(".careers-carousel-wrapper").closest(".pg-careers").find("nav").removeClass("scrollStart scrollEnd"),0==this.currentPage.pageX?$(".careers-carousel-wrapper").closest(".pg-careers").find("nav").addClass("scrollStart"):this.currentPage.pageX==r-2&&$(".careers-carousel-wrapper").closest(".pg-careers").find("nav").addClass("scrollEnd"),console.log("totalItems: ",r),2>=r&&$(".careers-carousel-wrapper").closest(".pg-careers").find("nav").removeClass("scrollStart scrollEnd")}probeHighlightPage(i,probeCurPage(t,e,-1*this.x,i),3)}),SinkingShip[t].on("scroll",function(){console.log("PROBE FIRED ++++++++++++++++++++++++++++++++++++++++"),"seriesNavCarousel"==t&&$(".pg-series > nav").addClass("disabled"),"seriesNewsCarousel"==t&&$(".pg-news > nav").addClass("disabled"),probeHighlightPage(i,probeCurPage(t,e,-1*this.x,i),3)})}function gotoScroll(t,e,i){event.preventDefault();var r=250;return"next"==e?void SinkingShip[t].goToPage(SinkingShip[t].currentPage.pageX+1,0,r):"prev"==e?void SinkingShip[t].goToPage(SinkingShip[t].currentPage.pageX-1,0,r):(SinkingShip[t].goToPage(e,0,i),void setTimeout(function(){"seriesNavCarousel"==t&&$(".pg-series > nav").removeClass("disabled"),"seriesNewsCarousel"==t&&$(".pg-news > nav").removeClass("disabled")},500))}function probeCurPage(t,e,i){var r=Math.round(i/e);return 0>r&&(r=0),r}function probeHighlightPage(t,e,r){var s=$("."+t+" > *:eq("+e+")").attr("data-target")||"annedroids";for("series-carousel-nav"==t&&changeSeriesPg(s),$("."+t+" > *").removeClass("prev1 prev2 prev3 active next1 next2 next3"),$("."+t+" > *:eq("+e+")").addClass("active"),i=1;i<=r;i++)$("."+t+" > *:eq("+(e-i)+")").addClass("prev"+i),$("."+t+" > *:eq("+(e+i)+")").addClass("next"+i)}function changeSeriesPg(t){$(".series-carousel .show-panel").removeClass("active"),$(".series-carousel .show-panel .departments li").removeClass("active"),$(".series-carousel .show-panel."+t).addClass("active");var t=$(".series-carousel .show-panel."+t),e=$(t).attr("data-startPanel");changeSeriesPanel(t,e)}function changeSeriesPanel(t,e){clearVideos(),$(t).find('[data-paneltarget="'+e+'"]').addClass("active");var i=$(t).find("ul li."+e),r=getFunctionForString($(i).attr("data-loadfunc"))||doNothing;$(i).addClass("active"),r()}function clearVideos(){$(".video-wrapper").find("iframe").remove()}function doNothing(){}function isUndefined(t){"use strict";return typeof t===String(void 0)}function isDefined(t){"use strict";return typeof t!==String(void 0)}function isEmpty(t){"use strict";return typeof t===String(void 0)||null===t||t===!1}function setDefault(t,e){"use strict";return isUndefined(t)?e:t}function isNumber(t){"use strict";return!isNaN(parseFloat(t))&&isFinite(t)}function BaseEvent(t,e,i){"use strict";function r(t,e){return s=t,n.data=e,n}var s,n=i||this;return n.getType=function(){return s},n.toString=function(){return s},r(t,e,i)}function AjaxCommand(t,e){function i(t,e){return a=t,_settings=e,o=_settings.context,h=_settings.complete,l=_settings.success,_settings.context=d,_settings.complete=r,_settings.success=s,d}function r(){isEmpty(h)||h.apply(o),c.execute()}function s(t){u=t,isEmpty(l)||l.apply(o,[t])}var n,a,o,h,l,u,c={},d=AbstractCommand.call(this,"AjaxCommand");return c.execute=d.execute,d.execute=function(){"CommandState.IDLE"==d.state()&&(d.state("CommandState.EXECUTING"),n=$.ajax(a,_settings))},c.cancel=d.cancel,d.cancel=function(){isEmpty(n)||n.abort(),c.cancel()},i(t,e)}function ApplyCommand(t,e,i){function r(t,e,i){return s=t,n=e,a=i,h}var s,n,a,o={},h=AbstractCommand.call(this,"ApplyCommand");return o.execute=h.execute,h.execute=function(){"CommandState.IDLE"==h.state()&&(h.state("CommandState.EXECUTING"),s.apply(a,n),o.execute())},r(t,e,i)}function CommandQueue(t,e){function i(t,e){return f=[],p=[],m=!1,isEmpty(t)||v.queue(t),1==e&&v.start(),v}function r(){return _.hasNext()||f.length?!1:!0}function s(){if(!_.hasNext()){var t=f.shift();_=t.getIterator(),d=t}return _.next()}function n(){isEmpty(c)&&!r()&&(c=s(),c.async()?(p.push(c),c.addEventListener("EXECUTE",u),c.execute(g),h(c)):(c.addEventListener("EXECUTE",h),c.execute(g)))}function a(){c?(c.addEventListener("CANCEL",l),c.cancel(g)):isEmpty(c)&&!r()&&(c=s(),c.addEventListener("CANCEL",l),c.cancel(g))}function o(t){t.removeEventListener("EXECUTE",h),t.removeEventListener("CANCEL",l)}function h(){c=void 0,v.dispatchEvent("EXECUTE"),r()&&(v.dispatchEvent("SEQUENCE_EXECUTED"),v.dispatchEvent("QUEUE_EMPTY")),m&&n()}function l(){o(c),c=void 0,v.dispatchEvent("CANCEL"),r()?(v.dispatchEvent("SEQUENCE_CANCELLED"),v.dispatchEvent("QUEUE_EMPTY")):a()}function u(t){p.splice(p.indexOf(t.target[0]),1)}var c,d,p,f,m,g,v=AbstractEventDispatcher(this),_=new Iterator([]);return v.queue=function(t){var e;if("ICommand"==t.toString())e=new CommandSet,e.push(t),f.push(e);else{if("CommandSet"!=t.toString())throw new Error("CommandQueue.queue ( ... ) argument must be either an ICommand or CommandSet");e=t,e.length()&&f.push(t)}if(v.debug===!0&&(console.log(_),console.log(f),console.log(c)),!_.hasNext()&&f.length){var i=f.shift();_=i.getIterator(),d=i}m&&n()},v.start=function(){m=!0,n()},v.stop=function(){m=!1},v.cancel=function(){for(;p.length>0;)p.pop().cancel();a()},v.session=function(t){return isEmpty(t)?g:g=t},i(t,e)}function CSSCommand(t,e,i){function r(t,e,i){return s=t,n=e,a=i,h}var s,n,a,o={},h=AbstractCommand.call(this,"CSSCommand");return o.execute=h.execute,h.execute=function(){if("CommandState.IDLE"==h.state()){h.state("CommandState.EXECUTING");try{$(s,a).css(n)}catch(t){s.css(instance._cssProperties)}o.execute()}},r(t,e,i)}function EaseToCommand(t,e,i,r){function s(t,e,i,r){return o=t,h=e,l=i,u=r,d}function n(){isEmpty(u)||u(),c.execute()}var a,o,h,l,u,c={},d=AbstractCommand.call(this,"EaseCommand");return c.execute=d.execute,d.execute=function(){"CommandState.IDLE"==d.state()&&(d.state("CommandState.EXECUTING"),a=createjs.Tween.get(o).to(l,h).call(n),console.log(a),console.log(o),console.log(l),console.log(h))},c.cancel=d.cancel,d.cancel=function(){isEmpty(a)||a.removeTweens(l),d._cancel()},s(t,e,i,r)}function ThreadCommand(t){function e(t){i=t instanceof CommandSet?new CommandQueue(t,!1):t}var i,r,s={},n=AbstractCommand(this,"ThreadCommand");return s.execute=n.execute,n.execute=function(){var t=new CommandSet;t.listener(i,"SEQUENCE_EXECUTED"),t.apply(s.execute),r=t.queue(),i.start()},s.cancel=n.cancel,n.cancel=function(){r.cancel()},e(t)}function TweenToCommand(t,e,i){function r(t,e,i){return a=t,o=e,h=i,l=i.onComplete,u=i.onCompleteParams,h.onComplete=s,h.onCompleteParams=[d],d}function s(){isEmpty(l)||l.apply(d,u),d.debug===!0&&console.log("executed"),c.execute()}var n,a,o,h,l,u,c={},d=AbstractCommand.call(this,"TweenCommand");return d.debug=function(t){d.debug=t},c.execute=d.execute,d.execute=function(){n=TweenMax.to(a,o,h)},c.cancel=d.cancel,d.cancel=function(){isUndefined(n)||n.kill(),c.cancel()},r(t,e,i)}function hasWebGL(){try{gl=canvas.getContext("webgl")}catch(t){gl=null}if(null===gl)try{gl=canvas.getContext("experimental-webgl"),glExperimental=!0}catch(t){gl=null}return gl?!0:"WebGLRenderingContext"in window?!0:!1}function AbstractObject(t){"use strict";function e(){return r=[],i=[],n}var i,r,s,n=AbstractEventDispatcher(t||this);return n.id=function(t){return isEmpty(t)?t:s=t},n.addChild=function(t){var e=t.parent();return empty(e)||e.removeChild(t),r.push(t),n},n.removeChild=function(t){var e=r.indexOf(t);return e>-1&&r.splice(e,1),n},n.getChildById=function(t){for(var e=0;r>e;e++){var i=r[e];if(i.id()==t)return i}return void 0},n.addComponent=function(t){return n.removeComponent(t),i.push(t),n},n.removeComponent=function(t){var e=i.indexOf(t);return e>-1&&r.splice(e,1),n},n.getComponentById=function(t){for(var e=0;e<i.length;e++){var r=i[e];if(r.id()==t)return i[e]}return void 0},n.edit=function(t){for(var e=0;e<i.length;e++)i[e].edit(t)},n.begin=function(){for(var t=0;t<i.length;t++)i[t].begin()},n.update=function(){for(var t=0;t<i.length;t++)i[t].update(r)},n.end=function(){for(var t=0;t<i.length;t++)i[t].end()},e()}function ScrollManager(){var t,e,i,r,s,n,a,o,h,l,u,c,d,p=AbstractObject.call(this),f=0;p.isLocked=!1;var m=function(){navigator.userAgent.toLowerCase().indexOf("firefox")>-1,d=0,c=0,f=0,u=[],o=1.5,h=.02,l=0,i=!1,t=0,e=0,n=0,_()},g=function(e){t=Math.max(n,Math.min(0,e))},v=function(e){var i;i="deltaY"in e.originalEvent?-1*e.originalEvent.deltaY:-40*e.originalEvent.detail,t+=.35*i,_(),g(t)},_=function(){f=1,p.isLocked=!1},y=function(e){console.log("key pressed");var i=$(window).height();38==e.keyCode?t+=100:40==e.keyCode?t+=-100:36==e.keyCode?t=0:35==e.keyCode?t=-1*i:34==e.keyCode?t+=-1*i:33==e.keyCode&&(t+=i),_(),g(t)},x=function(t){i=!0,s=t.pageY,r=t.pageX},w=function(e){if(i){var n=e.pageY-s;t+=n,s=e.pageY,r=e.pageX,_()}g(t)},b=function(){i=!1};return p.targetPosition=function(){return e},p.maxScroll=function(t){if(!isEmpty(t)){{Math.abs(t/n),Math.abs(e/n)}n=-t}return n},p.init=function(){a=Date.now(),$(window).keydown(y),window.onmousedown=x,window.addEventListener("touchstart",x),window.onmousemove=w,window.addEventListener("touchmove",w),window.onmouseup=b,window.onmouseout=b,window.addEventListener("touchend",b),window.addEventListener("touchleave",b),window.addEventListener("touchcancel",b),$("body").on("mousewheel  DOMMouseScroll wheel",v)},p.update=function(){console.log();var i,r=Date.now(),s=r-a,u=s/1e3,c=($(window).height(),$("#contentContainer > section")),d=c.length;if(c.length)for(var m=Number.MAX_VALUE,g=0;d>g;g++){var v=c.eq(g).position().top/2,_=Math.abs(t+v);m>_&&(i=-v,i=Math.max(n,Math.min(0,i)),m=_)}else i=t;f>=0?f-=u:(p.isLocked=!0,t=i);var y;y=p.isLocked?i-e:t-e,l+=y*o*100,l*=h,e+=l*u,isNaN(e)&&(console.log(e),console.log(y),console.log(o)),a=r},p.nextPage=function(){var t=Math.min(5,d+1);p.setPage(t)},p.previousPage=function(){var t=Math.max(0,d-1);p.setPage(t)},p.setPage=function(e){isNaN(e)||(d=e,t=d*-ss.SiteManager.windowHeight(),_())},p.focus=function(){console.log("focus cp",e),console.log("focus tp",t),console.log("focus max",n),_()},p.blur=function(){console.log("blur cp",e),console.log("blur tp",t),console.log("blur max",n),_()},m()}function SiteManager(){var t,e,i,r,s,n,a,o,h,l,u,c,d,p=AbstractObject.call(this),f=function(){return c=[],l=0,_initialSceneLoaded=!1,u=0,h={},$(document).ready(function(){n=$(window).width(),a=$(window).height()}),e=new PIXI.Stage(4573897),i=PIXI.autoDetectRenderer(n,a),t=i.view,$(t).attr("id","backgroundCanvas"),$("body").prepend(t),p},m=function(){$(window).resize(),console.log("_onSiteReadyListener",c[0].ready()),console.log("_onSiteReadyListener",c[1].ready()),console.log("_onSiteReadyListener",c[2].ready());for(var t=0;t<c.length;t++){var e=c[t];if(!e.ready())return void console.log(e.debug())}for(var t=0;t<c.length;t++){var e=c[t];e.off(SITE_READY,m)}$("#backgroundCanvas").css("display","block"),$(window).resize(),p.dispatchEvent(SITE_READY)};p.globalObject=function(t,e){return isEmpty(e)?(console.log("we GETTIN: "+t),console.dir(h),h[t]):void(h[t]=e)},p.windowWidth=function(){return $(window).width()},p.windowHeight=function(){return $(window).height()},p.load=function(){$.getJSON("json/stages.json",function(t){r=t}).success(function(){console.log("STAGES GRABBED")}).error(function(t,e,i){console.log("getJSON error: ",e),console.log("getJSON errorThrown: ",i),console.log("arguments: ",arguments),console.log("getJSON incoming Text "+t.responseText)}).complete(function(){console.log("STAGES JSON GET COMPLETE"),ss.ScrollManager.maxScroll((d-1)*$(window).height()),d=r.site[0].scenes.length;for(var t=0;t<r.site.length;t++){var i=new ss.SceneManager(r.site[t].scenes,r.site[t].background,r.site[t].debug);i.y=0,i.on(SITE_READY,m),e.addChild(i),c.push(i)}g(),p.dispatchEvent(new BaseEvent("READY"))}),v()};var g=function(){s=Date.now(),o=new ss.QuickMenu(r.site[0].scenes),o.x=15,o.y=.5*a,e.addChild(o)},v=function(){};return p.update=function(){for(var r=Date.now(),n=r-s,a=n/1e3,h=0;h<c.length;h++){var l=c[h];l.y=ss.ScrollManager.targetPosition(),l.update(n,a)}$("#contentContainer").css("transform","translate(0px, "+2*ss.ScrollManager.targetPosition()+"px) translateZ(0px)"),o&&o.update();var u=$(window).width(),p=$(window).height();t.width=u,t.height=p,i.resize(u,p),ss.ScrollManager.maxScroll((d-1)*p),i.render(e),s=r},p.resize=function(e,r){n=$(window).width(),a=$(window).height(),ss.ScrollManager.maxScroll((d-1)*a),t.width=e,t.height=r,i.resize(e,r);for(var s=0;s<c.length;s++){var h=c[s];h.resize(e,r)}isEmpty(o)||(o.y=.5*a)},p.blur=function(){$(window).resize();for(var t=0;t<c.length;t++){var e=c[t];e.blur()}},p.focus=function(){$(window).resize();for(var t=0;t<c.length;t++){var e=c[t];e.focus()}},p.setPage=function(t){ss.ScrollManager.setPage(t)},p.nextPage=function(){ss.ScrollManager.nextPage()},p.previousPage=function(){ss.ScrollManager.previousPage()},p.initialSceneReady=function(){$(window).resize(),++l<3||1==_initialSceneLoaded||(_initialSceneLoaded=!0,$(document).trigger("LOAD_PAGE_CONTENT"),console.log("initialScene READY"))},p.registerTextureLoad=function(){var t=Math.min(++u,18),e=Math.round(t/18*100);$(".pageLoad").text(e)},f()}function Line2D(t,e){"use strict";this.p1=t,this.p2=e}function Polygon(t){"use strict";this.points=t,this._i=0}function isUndefined(t){"use strict";return typeof t===String(void 0)}function isDefined(t){"use strict";return typeof t!==String(void 0)}function isEmpty(t){"use strict";return typeof t===String(void 0)||null===t||t===!1}function setDefault(t,e){"use strict";return isUndefined(t)?e:t}function isNumber(t){"use strict";return!isNaN(parseFloat(t))&&isFinite(t)}function AbstractParticle(){this.maxLife=0,this.curLife=0,this.normalizedLife=0,this.velX=0,this.velY=0}function AbstractParticleEmitter(){"use strict";function t(){return e}var e=this;return e._spawnShape=null,e._spawnTimer=null,e._particleFactory=null,e._particleUpdaters=new Array,e._particles=new Array,e._inheritTransform=!1,e._maxParticles=0,e._minLifetime=0,e._maxLifetime=0,e._particleOrigin=null,e._isEmitting=!1,e._isPaused=!0,e._destroyWhenDone=!1,e.setupFromObjects=function(t,i,r,s,n,a,o){e._maxParticles=t,e._minLifetime=i,e._maxLifetime=r,e._particleFactory=s,e._spawnTimer=n,e._spawnShape=a,e._particleUpdaters=o.concat(),e.resume()},e.setupFromJson=function(){throw"AbstractParticleEmitter.setupFromJson: This method is not implemented yet!"},e.setIsEmitting=function(t){t&&!e._isEmitting?(console.log("START EMIT!"),e.startEmit()):!t&&e._isEmitting&&(console.log("STOP EMIT!"),e.stopEmit())},e.startEmit=function(t){e._isEmitting||(e._isEmitting=!0),e._spawnTimer.resetSpawning(),isDefined(t)&&(e._destroyWhenDone=t)},e.stopEmit=function(t){e._isEmitting&&(e._isEmitting=!1),isDefined(t)&&(e._destroyWhenDone=t)},e.isEmitting=function(){return e._isEmitting},e.pause=function(){e._isPaused||(e._disableUpdates(),e._isPaused=!0)},e.resume=function(){e._isPaused&&(e._enableUpdates(),e._isPaused=!1)},e.isPaused=function(){return e._isPaused},e.destroy=function(){e.pause(),e.removeAllParticles(),e._particles=new Array},e.setParticleInheritTransform=function(t){e._inheritTransform=t},e.removeAllParticles=function(){var t;for(t=e._particles.length-1;t>=0;t--)e._removeParticleAt(t)},e._handleUpdate=function(t){var i,r,s,n=0;for(e._spawnTimer.isComplete()&&e.stopEmit(),s=e._particles.length-1;s>=0;s--)i=e._particles[s],i.x+=t*i.velX,i.y+=t*i.velY,i.curLife+=t,i.normalizedLife=i.curLife/i.maxLife,i.normalizedLife>=1&&e._removeParticleAt(s);for(s=0;s<e._particleUpdaters.length;s++)e._particleUpdaters[s].updateParticles(e._particles,t);if(e._isEmitting){if(n=e._spawnTimer.getSpawnNumber(t),n=Math.min(n,e._maxParticles-e._particles.length),n>0)for(e._updateParticleOrigin(),r=e._particles.length,e._spawnParticles(n),s=0;s<e._particleUpdaters.length;s++)e._particleUpdaters[s].initParticles(e._particles,r,e._particles.length-1)}else e._destroyWhenDone&&e._particles.length<=0&&e.destroy()},t()}function onSiteManagerReady(){ss.SiteManager.removeEventListener(SITE_READY,onSiteManagerReady),$(window).focus(focus),$(window).blur(blur),$(window).resize(),ss.SiteManager.dispatchEvent("INIT_RESIZE");for(var t=0;10>t;t++);$(document).on("touchmove",function(t){$(t.target).parents(".scroll")[0]||t.preventDefault()})}function updateFrame(){ss.SiteManager.update(),ss.ScrollManager.update(),requestAnimFrame(updateFrame)}function resizeFrame(){var t=$(window).width(),e=$(window).height();ss.SiteManager.resize(t,e)}function focus(){$(window).resize(),ss.SiteManager.focus(),ss.ScrollManager.focus()}function blur(){$(window).resize(),ss.SiteManager.blur(),ss.ScrollManager.blur()}!function(t,e){function i(){if(!n){n=!0;for(var t=0;t<s.length;t++)s[t].fn.call(window,s[t].ctx);s=[]}}function r(){"complete"===document.readyState&&i()}t=t||"docReady",e=e||window;var s=[],n=!1,a=!1;e[t]=function(t,e){return n?void setTimeout(function(){t(e)},1):(s.push({fn:t,ctx:e}),void("complete"===document.readyState?setTimeout(i,1):a||(document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):(document.attachEvent("onreadystatechange",r),window.attachEvent("onload",i)),a=!0)))}}("docReady",window);var require={include:function(){},config:function(){},ready:function(t){docReady(t)}};if(function(t,e,i){function r(t,i){this.wrapper="string"==typeof t?e.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var r in i)this.options[r]=i[r];this.translateZ=this.options.HWCompositing&&o.hasPerspective?" translateZ(0)":"",this.options.useTransition=o.hasTransition&&this.options.useTransition,this.options.useTransform=o.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?o.ease[this.options.bounceEasing]||o.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function s(t,i,r){var s=e.createElement("div"),n=e.createElement("div");return r===!0&&(s.style.cssText="position:absolute;z-index:9999",n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),n.className="iScrollIndicator","h"==t?(r===!0&&(s.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",n.style.height="100%"),s.className="iScrollHorizontalScrollbar"):(r===!0&&(s.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",n.style.width="100%"),s.className="iScrollVerticalScrollbar"),s.style.cssText+=";overflow:hidden",i||(s.style.pointerEvents="none"),s.appendChild(n),s}function n(i,r){this.wrapper="string"==typeof r.el?e.querySelector(r.el):r.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=i,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var s in r)this.options[s]=r[s];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(o.addEvent(this.indicator,"touchstart",this),o.addEvent(t,"touchend",this)),this.options.disablePointer||(o.addEvent(this.indicator,o.prefixPointerEvent("pointerdown"),this),o.addEvent(t,o.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(o.addEvent(this.indicator,"mousedown",this),o.addEvent(t,"mouseup",this))),this.options.fade&&(this.wrapperStyle[o.style.transform]=this.scroller.translateZ,this.wrapperStyle[o.style.transitionDuration]=o.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var a=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)},o=function(){function r(t){return a===!1?!1:""===a?t:a+t.charAt(0).toUpperCase()+t.substr(1)}var s={},n=e.createElement("div").style,a=function(){for(var t,e=["t","webkitT","MozT","msT","OT"],i=0,r=e.length;r>i;i++)if(t=e[i]+"ransform",t in n)return e[i].substr(0,e[i].length-1);return!1}();s.getTime=Date.now||function(){return(new Date).getTime()},s.extend=function(t,e){for(var i in e)t[i]=e[i]},s.addEvent=function(t,e,i,r){t.addEventListener(e,i,!!r)},s.removeEvent=function(t,e,i,r){t.removeEventListener(e,i,!!r)},s.prefixPointerEvent=function(e){return t.MSPointerEvent?"MSPointer"+e.charAt(9).toUpperCase()+e.substr(10):e},s.momentum=function(t,e,r,s,n,a){var o,h,l=t-e,u=i.abs(l)/r;return a=void 0===a?6e-4:a,o=t+u*u/(2*a)*(0>l?-1:1),h=u/a,s>o?(o=n?s-n/2.5*(u/8):s,l=i.abs(o-t),h=l/u):o>0&&(o=n?n/2.5*(u/8):0,l=i.abs(t)+o,h=l/u),{destination:i.round(o),duration:h}};var o=r("transform");return s.extend(s,{hasTransform:o!==!1,hasPerspective:r("perspective")in n,hasTouch:"ontouchstart"in t,hasPointer:t.PointerEvent||t.MSPointerEvent,hasTransition:r("transition")in n}),s.isBadAndroid=/Android /.test(t.navigator.appVersion)&&!/Chrome\/\d/.test(t.navigator.appVersion),s.extend(s.style={},{transform:o,transitionTimingFunction:r("transitionTimingFunction"),transitionDuration:r("transitionDuration"),transitionDelay:r("transitionDelay"),transformOrigin:r("transformOrigin")}),s.hasClass=function(t,e){var i=new RegExp("(^|\\s)"+e+"(\\s|$)");return i.test(t.className)},s.addClass=function(t,e){if(!s.hasClass(t,e)){var i=t.className.split(" ");i.push(e),t.className=i.join(" ")}},s.removeClass=function(t,e){if(s.hasClass(t,e)){var i=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(i," ")}},s.offset=function(t){for(var e=-t.offsetLeft,i=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return{left:e,top:i}},s.preventDefaultException=function(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1},s.extend(s.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),s.extend(s.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return i.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var e=4;return(t-=1)*t*((e+1)*t+e)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var e=.22,r=.4;return 0===t?0:1==t?1:r*i.pow(2,-10*t)*i.sin(2*(t-e/4)*i.PI/e)+1}}}),s.tap=function(t,i){var r=e.createEvent("Event");r.initEvent(i,!0,!0),r.pageX=t.pageX,r.pageY=t.pageY,t.target.dispatchEvent(r)},s.click=function(t){var i,r=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(r.tagName)||(i=e.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,t.view,1,r.screenX,r.screenY,r.clientX,r.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),i._constructed=!0,r.dispatchEvent(i))},s}();r.prototype={version:"5.1.3",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if(!(1!=o.eventType[t.type]&&0!==t.button||!this.enabled||this.initiated&&o.eventType[t.type]!==this.initiated)){!this.options.preventDefault||o.isBadAndroid||o.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var e,r=t.touches?t.touches[0]:t;this.initiated=o.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=o.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,e=this.getComputedPosition(),this._translate(i.round(e.x),i.round(e.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=r.pageX,this.pointY=r.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&o.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,r,s,n,a=t.touches?t.touches[0]:t,h=a.pageX-this.pointX,l=a.pageY-this.pointY,u=o.getTime();if(this.pointX=a.pageX,this.pointY=a.pageY,this.distX+=h,this.distY+=l,s=i.abs(this.distX),n=i.abs(this.distY),!(u-this.endTime>300&&10>s&&10>n)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=s>n+this.options.directionLockThreshold?"h":n>=s+this.options.directionLockThreshold?"v":"n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);h=0}h=this.hasHorizontalScroll?h:0,l=this.hasVerticalScroll?l:0,e=this.x+h,r=this.y+l,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+h/3:e>0?0:this.maxScrollX),(r>0||r<this.maxScrollY)&&(r=this.options.bounce?this.y+l/3:r>0?0:this.maxScrollY),this.directionX=h>0?-1:0>h?1:0,this.directionY=l>0?-1:0>l?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,r),u-this.startTime>300&&(this.startTime=u,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(t){if(this.enabled&&o.eventType[t.type]===this.initiated){this.options.preventDefault&&!o.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var e,r,s=(t.changedTouches?t.changedTouches[0]:t,o.getTime()-this.startTime),n=i.round(this.x),a=i.round(this.y),h=i.abs(n-this.startX),l=i.abs(a-this.startY),u=0,c="";if(this.isInTransition=0,this.initiated=0,this.endTime=o.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(n,a),!this.moved)return this.options.tap&&o.tap(t,this.options.tap),this.options.click&&o.click(t),void this._execEvent("scrollCancel");if(this._events.flick&&200>s&&100>h&&100>l)return void this._execEvent("flick");if(this.options.momentum&&300>s&&(e=this.hasHorizontalScroll?o.momentum(this.x,this.startX,s,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:n,duration:0},r=this.hasVerticalScroll?o.momentum(this.y,this.startY,s,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:a,duration:0},n=e.destination,a=r.destination,u=i.max(e.duration,r.duration),this.isInTransition=1),this.options.snap){var d=this._nearestSnap(n,a);this.currentPage=d,u=this.options.snapSpeed||i.max(i.max(i.min(i.abs(n-d.x),1e3),i.min(i.abs(a-d.y),1e3)),300),n=d.x,a=d.y,this.directionX=0,this.directionY=0,c=this.options.bounceEasing}return n!=this.x||a!=this.y?((n>0||n<this.maxScrollX||a>0||a<this.maxScrollY)&&(c=o.ease.quadratic),void this.scrollTo(n,a,u,c)):void this._execEvent("scrollEnd")}}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,i=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),e==this.x&&i==this.y?!1:(this.scrollTo(e,i,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=o.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var i=this._events[t].indexOf(e);i>-1&&this._events[t].splice(i,1)}},_execEvent:function(t){if(this._events[t]){var e=0,i=this._events[t].length;if(i)for(;i>e;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,i,r){t=this.x+t,e=this.y+e,i=i||0,this.scrollTo(t,e,i,r)
},scrollTo:function(t,e,i,r){r=r||o.ease.circular,this.isInTransition=this.options.useTransition&&i>0,!i||this.options.useTransition&&r.style?(this._transitionTimingFunction(r.style),this._transitionTime(i),this._translate(t,e)):this._animate(t,e,i,r.fn)},scrollToElement:function(t,e,r,s,n){if(t=t.nodeType?t:this.scroller.querySelector(t)){var a=o.offset(t);a.left-=this.wrapperOffset.left,a.top-=this.wrapperOffset.top,r===!0&&(r=i.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),s===!0&&(s=i.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),a.left-=r||0,a.top-=s||0,a.left=a.left>0?0:a.left<this.maxScrollX?this.maxScrollX:a.left,a.top=a.top>0?0:a.top<this.maxScrollY?this.maxScrollY:a.top,e=void 0===e||null===e||"auto"===e?i.max(i.abs(this.x-a.left),i.abs(this.y-a.top)):e,this.scrollTo(a.left,a.top,e,n)}},_transitionTime:function(t){if(t=t||0,this.scrollerStyle[o.style.transitionDuration]=t+"ms",!t&&o.isBadAndroid&&(this.scrollerStyle[o.style.transitionDuration]="0.001s"),this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTime(t)},_transitionTimingFunction:function(t){if(this.scrollerStyle[o.style.transitionTimingFunction]=t,this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTimingFunction(t)},_translate:function(t,e){if(this.options.useTransform?this.scrollerStyle[o.style.transform]="translate("+t+"px,"+e+"px)"+this.translateZ:(t=i.round(t),e=i.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e,this.indicators)for(var r=this.indicators.length;r--;)this.indicators[r].updatePosition()},_initEvents:function(e){var i=e?o.removeEvent:o.addEvent,r=this.options.bindToWrapper?this.wrapper:t;i(t,"orientationchange",this),i(t,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(r,"mousemove",this),i(r,"mousecancel",this),i(r,"mouseup",this)),o.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,o.prefixPointerEvent("pointerdown"),this),i(r,o.prefixPointerEvent("pointermove"),this),i(r,o.prefixPointerEvent("pointercancel"),this),i(r,o.prefixPointerEvent("pointerup"),this)),o.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(r,"touchmove",this),i(r,"touchcancel",this),i(r,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var e,i,r=t.getComputedStyle(this.scroller,null);return this.options.useTransform?(r=r[o.style.transform].split(")")[0].split(", "),e=+(r[12]||r[4]),i=+(r[13]||r[5])):(e=+r.left.replace(/[^-\d.]/g,""),i=+r.top.replace(/[^-\d.]/g,"")),{x:e,y:i}},_initIndicators:function(){function t(t){for(var e=o.indicators.length;e--;)t.call(o.indicators[e])}var e,i=this.options.interactiveScrollbars,r="string"!=typeof this.options.scrollbars,a=[],o=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(e={el:s("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:r,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(e.el),a.push(e)),this.options.scrollX&&(e={el:s("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:r,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(e.el),a.push(e))),this.options.indicators&&(a=a.concat(this.options.indicators));for(var h=a.length;h--;)this.indicators.push(new n(this,a[h]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){t(function(){this.fade()})}),this.on("scrollCancel",function(){t(function(){this.fade()})}),this.on("scrollStart",function(){t(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){t(function(){this.fade(1,!0)})})),this.on("refresh",function(){t(function(){this.refresh()})}),this.on("destroy",function(){t(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){o.addEvent(this.wrapper,"wheel",this),o.addEvent(this.wrapper,"mousewheel",this),o.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){o.removeEvent(this.wrapper,"wheel",this),o.removeEvent(this.wrapper,"mousewheel",this),o.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(this.enabled){t.preventDefault(),t.stopPropagation();var e,r,s,n,a=this;if(void 0===this.wheelTimeout&&a._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){a._execEvent("scrollEnd"),a.wheelTimeout=void 0},400),"deltaX"in t)1===t.deltaMode?(e=-t.deltaX*this.options.mouseWheelSpeed,r=-t.deltaY*this.options.mouseWheelSpeed):(e=-t.deltaX,r=-t.deltaY);else if("wheelDeltaX"in t)e=t.wheelDeltaX/120*this.options.mouseWheelSpeed,r=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)e=r=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;e=r=-t.detail/3*this.options.mouseWheelSpeed}if(e*=this.options.invertWheelDirection,r*=this.options.invertWheelDirection,this.hasVerticalScroll||(e=r,r=0),this.options.snap)return s=this.currentPage.pageX,n=this.currentPage.pageY,e>0?s--:0>e&&s++,r>0?n--:0>r&&n++,void this.goToPage(s,n);s=this.x+i.round(this.hasHorizontalScroll?e:0),n=this.y+i.round(this.hasVerticalScroll?r:0),s>0?s=0:s<this.maxScrollX&&(s=this.maxScrollX),n>0?n=0:n<this.maxScrollY&&(n=this.maxScrollY),this.scrollTo(s,n,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,e,r,s,n,a,o=0,h=0,l=0,u=this.options.snapStepX||this.wrapperWidth,c=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(r=i.round(u/2),s=i.round(c/2);l>-this.scrollerWidth;){for(this.pages[o]=[],t=0,n=0;n>-this.scrollerHeight;)this.pages[o][t]={x:i.max(l,this.maxScrollX),y:i.max(n,this.maxScrollY),width:u,height:c,cx:l-r,cy:n-s},n-=c,t++;l-=u,o++}else for(a=this.options.snap,t=a.length,e=-1;t>o;o++)(0===o||a[o].offsetLeft<=a[o-1].offsetLeft)&&(h=0,e++),this.pages[h]||(this.pages[h]=[]),l=i.max(-a[o].offsetLeft,this.maxScrollX),n=i.max(-a[o].offsetTop,this.maxScrollY),r=l-i.round(a[o].offsetWidth/2),s=n-i.round(a[o].offsetHeight/2),this.pages[h][e]={x:l,y:n,width:a[o].offsetWidth,height:a[o].offsetHeight,cx:r,cy:s},l>this.maxScrollX&&h++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,e){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var r=0,s=this.pages.length,n=0;if(i.abs(t-this.absStartX)<this.snapThresholdX&&i.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY);s>r;r++)if(t>=this.pages[r][0].cx){t=this.pages[r][0].x;break}for(s=this.pages[r].length;s>n;n++)if(e>=this.pages[0][n].cy){e=this.pages[0][n].y;break}return r==this.currentPage.pageX&&(r+=this.directionX,0>r?r=0:r>=this.pages.length&&(r=this.pages.length-1),t=this.pages[r][0].x),n==this.currentPage.pageY&&(n+=this.directionY,0>n?n=0:n>=this.pages[0].length&&(n=this.pages[0].length-1),e=this.pages[0][n].y),{x:t,y:e,pageX:r,pageY:n}},goToPage:function(t,e,r,s){s=s||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:0>t&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:0>e&&(e=0);var n=this.pages[t][e].x,a=this.pages[t][e].y;r=void 0===r?this.options.snapSpeed||i.max(i.max(i.min(i.abs(n-this.x),1e3),i.min(i.abs(a-this.y),1e3)),300):r,this.currentPage={x:n,y:a,pageX:t,pageY:e},this.scrollTo(n,a,r,s)},next:function(t,e){var i=this.currentPage.pageX,r=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,r++),this.goToPage(i,r,t,e)},prev:function(t,e){var i=this.currentPage.pageX,r=this.currentPage.pageY;i--,0>i&&this.hasVerticalScroll&&(i=0,r--),this.goToPage(i,r,t,e)},_initKeys:function(){var e,i={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(e in this.options.keyBindings)"string"==typeof this.options.keyBindings[e]&&(this.options.keyBindings[e]=this.options.keyBindings[e].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(e in i)this.options.keyBindings[e]=this.options.keyBindings[e]||i[e];o.addEvent(t,"keydown",this),this.on("destroy",function(){o.removeEvent(t,"keydown",this)})},_key:function(t){if(this.enabled){var e,r=this.options.snap,s=r?this.currentPage.pageX:this.x,n=r?this.currentPage.pageY:this.y,a=o.getTime(),h=this.keyTime||0,l=.25;switch(this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._translate(i.round(e.x),i.round(e.y)),this.isInTransition=!1),this.keyAcceleration=200>a-h?i.min(this.keyAcceleration+l,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?s+=r?1:this.wrapperWidth:n+=r?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?s-=r?1:this.wrapperWidth:n-=r?1:this.wrapperHeight;break;case this.options.keyBindings.end:s=r?this.pages.length-1:this.maxScrollX,n=r?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:s=0,n=0;break;case this.options.keyBindings.left:s+=r?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:n+=r?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:s-=r?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:n-=r?1:5+this.keyAcceleration>>0;break;default:return}if(r)return void this.goToPage(s,n);s>0?(s=0,this.keyAcceleration=0):s<this.maxScrollX&&(s=this.maxScrollX,this.keyAcceleration=0),n>0?(n=0,this.keyAcceleration=0):n<this.maxScrollY&&(n=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(s,n,0),this.keyTime=a}},_animate:function(t,e,i,r){function s(){var d,p,f,m=o.getTime();return m>=c?(n.isAnimating=!1,n._translate(t,e),void(n.resetPosition(n.options.bounceTime)||n._execEvent("scrollEnd"))):(m=(m-u)/i,f=r(m),d=(t-h)*f+h,p=(e-l)*f+l,n._translate(d,p),n.isAnimating&&a(s),void(3==n.options.probeType&&n._execEvent("scroll")))}var n=this,h=this.x,l=this.y,u=o.getTime(),c=u+i;this.isAnimating=!0,s()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}},n.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},destroy:function(){this.options.interactive&&(o.removeEvent(this.indicator,"touchstart",this),o.removeEvent(this.indicator,o.prefixPointerEvent("pointerdown"),this),o.removeEvent(this.indicator,"mousedown",this),o.removeEvent(t,"touchmove",this),o.removeEvent(t,o.prefixPointerEvent("pointermove"),this),o.removeEvent(t,"mousemove",this),o.removeEvent(t,"touchend",this),o.removeEvent(t,o.prefixPointerEvent("pointerup"),this),o.removeEvent(t,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(e){var i=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=o.getTime(),this.options.disableTouch||o.addEvent(t,"touchmove",this),this.options.disablePointer||o.addEvent(t,o.prefixPointerEvent("pointermove"),this),this.options.disableMouse||o.addEvent(t,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(t){var e,i,r,s,n=t.touches?t.touches[0]:t,a=o.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,e=n.pageX-this.lastPointX,this.lastPointX=n.pageX,i=n.pageY-this.lastPointY,this.lastPointY=n.pageY,r=this.x+e,s=this.y+i,this._pos(r,s),1==this.scroller.options.probeType&&a-this.startTime>300?(this.startTime=a,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),t.preventDefault(),t.stopPropagation()},_end:function(e){if(this.initiated){if(this.initiated=!1,e.preventDefault(),e.stopPropagation(),o.removeEvent(t,"touchmove",this),o.removeEvent(t,o.prefixPointerEvent("pointermove"),this),o.removeEvent(t,"mousemove",this),this.scroller.options.snap){var r=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),s=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.scroller.x-r.x),1e3),i.min(i.abs(this.scroller.y-r.y),1e3)),300);(this.scroller.x!=r.x||this.scroller.y!=r.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=r,this.scroller.scrollTo(r.x,r.y,s,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(t){t=t||0,this.indicatorStyle[o.style.transitionDuration]=t+"ms",!t&&o.isBadAndroid&&(this.indicatorStyle[o.style.transitionDuration]="0.001s")},transitionTimingFunction:function(t){this.indicatorStyle[o.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.indicatorStyle.display=this.options.listenX&&!this.options.listenY?this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.scroller.hasVerticalScroll?"block":"none":this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(o.addClass(this.wrapper,"iScrollBothScrollbars"),o.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(o.removeClass(this.wrapper,"iScrollBothScrollbars"),o.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=i.max(i.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=i.max(i.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&i.round(this.sizeRatioX*this.scroller.x)||0,e=this.options.listenY&&i.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=i.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=i.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",t=this.maxPosX+this.indicatorWidth-this.width):t=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),e<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=i.max(this.indicatorHeight+3*e,8),this.indicatorStyle.height=this.height+"px"),e=this.minBoundaryY):e>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=i.max(this.indicatorHeight-3*(e-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",e=this.maxPosY+this.indicatorHeight-this.height):e=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=e,this.scroller.options.useTransform?this.indicatorStyle[o.style.transform]="translate("+t+"px,"+e+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=e+"px")},_pos:function(t,e){0>t?t=0:t>this.maxPosX&&(t=this.maxPosX),0>e?e=0:e>this.maxPosY&&(e=this.maxPosY),t=this.options.listenX?i.round(t/this.sizeRatioX):this.scroller.x,e=this.options.listenY?i.round(e/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,e)},fade:function(t,e){if(!e||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=t?250:500,r=t?0:300;t=t?"1":"0",this.wrapperStyle[o.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t,this.visible=+t}.bind(this,t),r)}}},r.utils=o,"undefined"!=typeof module&&module.exports?module.exports=r:t.IScroll=r}(window,document,Math),$(document).on("tap",".series-carousel-nav li",function(){console.log("carousel nav item clicked");var t=$(this).index();gotoScroll("seriesNavCarousel",t,250)}),$(document).on("click",".show-panel nav a",function(t){t.preventDefault(),clearVideos();var e=$(this).attr("data-panelTarget"),i=$(this).closest(".show-panel"),r=$(i).find("ul li."+e),s=getFunctionForString($(r).attr("data-loadfunc"))||doNothing;$(i).find(".departments li").removeClass("active"),$(i).find(".departments li."+e).addClass("active"),s()}),$(document).on("click",".video-wrapper .btn-play ",function(){var t=$(this).closest("[data-videoCode]").attr("data-videoCode"),e=$(this).closest("div.sized");$(e).append('		<iframe width="560" height="315" src="https://www.youtube.com/embed/'+t+'?autoplay=1&rel=0" frameborder="0"></iframe>		')}),typeof ss===String(void 0))var ss=new Object;if(this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i){this.initialize(t,e,i)},e=t.prototype;e.type=null,e.target=null,e.currentTarget=null,e.eventPhase=0,e.bubbles=!1,e.cancelable=!1,e.timeStamp=0,e.defaultPrevented=!1,e.propagationStopped=!1,e.immediatePropagationStopped=!1,e.removed=!1,e.initialize=function(t,e,i){this.type=t,this.bubbles=e,this.cancelable=i,this.timeStamp=(new Date).getTime()},e.preventDefault=function(){this.defaultPrevented=!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){},e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e._listeners=null,e._captureListeners=null,e.initialize=function(){},e.addEventListener=function(t,e,i){var r;r=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var s=r[t];return s&&this.removeEventListener(t,e,i),s=r[t],s?s.push(e):r[t]=[e],e},e.on=function(t,e,i,r,s,n){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,s),r&&t.remove()},n)},e.removeEventListener=function(t,e,i){var r=i?this._captureListeners:this._listeners;if(r){var s=r[t];if(s)for(var n=0,a=s.length;a>n;n++)if(s[n]==e){1==a?delete r[t]:s.splice(n,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e){if("string"==typeof t){var i=this._listeners;if(!i||!i[t])return!1;t=new createjs.Event(t)}if(t.target=e||this,t.bubbles&&this.parent){for(var r=this,s=[r];r.parent;)s.push(r=r.parent);var n,a=s.length;for(n=a-1;n>=0&&!t.propagationStopped;n--)s[n]._dispatchEvent(t,1+(0==n));for(n=1;a>n&&!t.propagationStopped;n++)s[n]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,r=1==e?this._captureListeners:this._listeners;if(t&&r){var s=r[t.type];if(!s||!(i=s.length))return;t.currentTarget=this,t.eventPhase=e,t.removed=!1,s=s.slice();for(var n=0;i>n&&!t.immediatePropagationStopped;n++){var a=s[n];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";createjs.indexOf=function(t,e){for(var i=0,r=t.length;r>i;i++)if(e===t[i])return i;return-1}}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){throw"UID cannot be instantiated"};t._nextID=0,t.get=function(){return t._nextID++},createjs.UID=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){throw"Ticker cannot be instantiated."};t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t.useRAF=!1,t.timingMode=null,t.maxDelta=0,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._addEventListener=t.addEventListener,t.addEventListener=function(){return!t._inited&&t.init(),t._addEventListener.apply(t,arguments)},t._paused=!1,t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._timerId=null,t._raf=!0,t.init=function(){t._inited||(t._inited=!0,t._times=[],t._tickTimes=[],t._startTime=t._getTime(),t._times.push(t._lastTime=0),t.setInterval(t._interval))},t.reset=function(){if(t._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(t._timerId)}else clearTimeout(t._timerId);t.removeAllEventListeners("tick")},t.setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.getInterval=function(){return t._interval},t.setFPS=function(e){t.setInterval(1e3/e)},t.getFPS=function(){return 1e3/t._interval},t.getMeasuredTickTime=function(e){var i=0,r=t._tickTimes;if(r.length<1)return-1;e=Math.min(r.length,e||0|t.getFPS());for(var s=0;e>s;s++)i+=r[s];return i/e},t.getMeasuredFPS=function(e){var i=t._times;return i.length<2?-1:(e=Math.min(i.length-1,e||0|t.getFPS()),1e3/((i[0]-i[e])/e))},t.setPaused=function(e){t._paused=e},t.getPaused=function(){return t._paused},t.getTime=function(e){return t._getTime()-t._startTime-(e?t._pausedTime:0)},t.getEventTime=function(e){return(t._lastTime||t._startTime)-(e?t._pausedTime:0)},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleSynch=function(){var e=t._getTime()-t._startTime;t._timerId=null,t._setupTick(),e-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleRAF=function(){t._timerId=null,t._setupTick(),t._tick()},t._handleTimeout=function(){t._timerId=null,t._setupTick(),t._tick()},t._setupTick=function(){if(null==t._timerId){var e=t.timingMode||t.useRAF&&t.RAF_SYNCHED;if(e==t.RAF_SYNCHED||e==t.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return t._timerId=i(e==t.RAF?t._handleRAF:t._handleSynch),void(t._raf=!0)}t._raf=!1,t._timerId=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t._getTime()-t._startTime,i=e-t._lastTime,r=t._paused;if(t._ticks++,r&&(t._pausedTicks++,t._pausedTime+=i),t._lastTime=e,t.hasEventListener("tick")){var s=new createjs.Event("tick"),n=t.maxDelta;s.delta=n&&i>n?n:i,s.paused=r,s.time=e,s.runTime=e-t._pausedTime,t.dispatchEvent(s)}for(t._tickTimes.unshift(t._getTime()-e);t._tickTimes.length>100;)t._tickTimes.pop();for(t._times.unshift(e);t._times.length>100;)t._times.pop()};var e=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);t._getTime=function(){return e&&e.call(performance)||(new Date).getTime()},createjs.Ticker=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,r,s,n,a,o,h,l){this.initialize(t,e,i,r,s,n,a,o,h,l)},e=t.prototype=new createjs.Event;e.stageX=0,e.stageY=0,e.rawX=0,e.rawY=0,e.nativeEvent=null,e.pointerID=0,e.primary=!1,e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},e._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y};try{Object.defineProperties(e,{localX:{get:e._get_localX},localY:{get:e._get_localY}})}catch(i){}e.Event_initialize=e.initialize,e.initialize=function(t,e,i,r,s,n,a,o,h,l){this.Event_initialize(t,e,i),this.stageX=r,this.stageY=s,this.nativeEvent=n,this.pointerID=a,this.primary=o,this.rawX=null==h?r:h,this.rawY=null==l?s:l},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},e.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,r,s,n){this.initialize(t,e,i,r,s,n)},e=t.prototype;t.identity=null,t.DEG_TO_RAD=Math.PI/180,e.a=1,e.b=0,e.c=0,e.d=1,e.tx=0,e.ty=0,e.alpha=1,e.shadow=null,e.compositeOperation=null,e.initialize=function(t,e,i,r,s,n){return this.a=null==t?1:t,this.b=e||0,this.c=i||0,this.d=null==r?1:r,this.tx=s||0,this.ty=n||0,this},e.prepend=function(t,e,i,r,s,n){var a=this.tx;if(1!=t||0!=e||0!=i||1!=r){var o=this.a,h=this.c;this.a=o*t+this.b*i,this.b=o*e+this.b*r,this.c=h*t+this.d*i,this.d=h*e+this.d*r}return this.tx=a*t+this.ty*i+s,this.ty=a*e+this.ty*r+n,this},e.append=function(t,e,i,r,s,n){var a=this.a,o=this.b,h=this.c,l=this.d;return this.a=t*a+e*h,this.b=t*o+e*l,this.c=i*a+r*h,this.d=i*o+r*l,this.tx=s*a+n*h+this.tx,this.ty=s*o+n*l+this.ty,this},e.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty),this.prependProperties(t.alpha,t.shadow,t.compositeOperation),this},e.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty),this.appendProperties(t.alpha,t.shadow,t.compositeOperation),this},e.prependTransform=function(e,i,r,s,n,a,o,h,l){if(n%360)var u=n*t.DEG_TO_RAD,c=Math.cos(u),d=Math.sin(u);else c=1,d=0;return(h||l)&&(this.tx-=h,this.ty-=l),a||o?(a*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.prepend(c*r,d*r,-d*s,c*s,0,0),this.prepend(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),e,i)):this.prepend(c*r,d*r,-d*s,c*s,e,i),this},e.appendTransform=function(e,i,r,s,n,a,o,h,l){if(n%360)var u=n*t.DEG_TO_RAD,c=Math.cos(u),d=Math.sin(u);else c=1,d=0;return a||o?(a*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.append(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),e,i),this.append(c*r,d*r,-d*s,c*s,0,0)):this.append(c*r,d*r,-d*s,c*s,e,i),(h||l)&&(this.tx-=h*this.a+l*this.c,this.ty-=h*this.b+l*this.d),this},e.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,s=this.c,n=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=n*e-this.ty*i,this.ty=n*i+this.ty*e,this},e.skew=function(e,i){return e*=t.DEG_TO_RAD,i*=t.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(e),Math.cos(e),0,0),this},e.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},e.translate=function(t,e){return this.tx+=t,this.ty+=e,this},e.identity=function(){return this.alpha=this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.shadow=this.compositeOperation=null,this},e.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,s=this.tx,n=t*r-e*i;return this.a=r/n,this.b=-e/n,this.c=-i/n,this.d=t/n,this.tx=(i*this.ty-r*s)/n,this.ty=-(t*this.ty-e*s)/n,this},e.isIdentity=function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d},e.transformPoint=function(t,e,i){return i=i||{},i.x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i},e.decompose=function(e){null==e&&(e={}),e.x=this.tx,e.y=this.ty,e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),r=Math.atan2(this.b,this.a);return i==r?(e.rotation=r/t.DEG_TO_RAD,this.a<0&&this.d>=0&&(e.rotation+=e.rotation<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=i/t.DEG_TO_RAD,e.skewY=r/t.DEG_TO_RAD),e},e.reinitialize=function(t,e,i,r,s,n,a,o,h){return this.initialize(t,e,i,r,s,n),this.alpha=null==a?1:a,this.shadow=o,this.compositeOperation=h,this},e.copy=function(t){return this.reinitialize(t.a,t.b,t.c,t.d,t.tx,t.ty,t.alpha,t.shadow,t.compositeOperation)},e.appendProperties=function(t,e,i){return this.alpha*=t,this.shadow=e||this.shadow,this.compositeOperation=i||this.compositeOperation,this},e.prependProperties=function(t,e,i){return this.alpha*=t,this.shadow=this.shadow||e,this.compositeOperation=this.compositeOperation||i,this},e.clone=function(){return(new t).copy(this)},e.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},t.identity=new t,createjs.Matrix2D=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e){this.initialize(t,e)
},e=t.prototype;e.x=0,e.y=0,e.initialize=function(t,e){return this.x=null==t?0:t,this.y=null==e?0:e,this},e.copy=function(t){return this.initialize(t.x,t.y)},e.clone=function(){return new t(this.x,this.y)},e.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,r){this.initialize(t,e,i,r)},e=t.prototype;e.x=0,e.y=0,e.width=0,e.height=0,e.initialize=function(t,e,i,r){return this.x=t||0,this.y=e||0,this.width=i||0,this.height=r||0,this},e.copy=function(t){return this.initialize(t.x,t.y,t.width,t.height)},e.clone=function(){return new t(this.x,this.y,this.width,this.height)},e.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,r,s,n,a){this.initialize(t,e,i,r,s,n,a)},e=t.prototype;e.target=null,e.overLabel=null,e.outLabel=null,e.downLabel=null,e.play=!1,e._isPressed=!1,e._isOver=!1,e.initialize=function(t,e,i,r,s,n,a){t.addEventListener&&(this.target=t,t.cursor="pointer",this.overLabel=null==i?"over":i,this.outLabel=null==e?"out":e,this.downLabel=null==r?"down":r,this.play=s,this.setEnabled(!0),this.handleEvent({}),n&&(a&&(n.actionsEnabled=!1,n.gotoAndStop&&n.gotoAndStop(a)),t.hitArea=n))},e.setEnabled=function(t){var e=this.target;t?(e.addEventListener("rollover",this),e.addEventListener("rollout",this),e.addEventListener("mousedown",this),e.addEventListener("pressup",this)):(e.removeEventListener("rollover",this),e.removeEventListener("rollout",this),e.removeEventListener("mousedown",this),e.removeEventListener("pressup",this))},e.toString=function(){return"[ButtonHelper]"},e.handleEvent=function(t){var e,i=this.target,r=t.type;"mousedown"==r?(this._isPressed=!0,e=this.downLabel):"pressup"==r?(this._isPressed=!1,e=this._isOver?this.overLabel:this.outLabel):"rollover"==r?(this._isOver=!0,e=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,e=this._isPressed?this.overLabel:this.outLabel),this.play?i.gotoAndPlay&&i.gotoAndPlay(e):i.gotoAndStop&&i.gotoAndStop(e)},createjs.ButtonHelper=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,r){this.initialize(t,e,i,r)},e=t.prototype;t.identity=null,e.color=null,e.offsetX=0,e.offsetY=0,e.blur=0,e.initialize=function(t,e,i,r){this.color=t,this.offsetX=e,this.offsetY=i,this.blur=r},e.toString=function(){return"[Shadow]"},e.clone=function(){return new t(this.color,this.offsetX,this.offsetY,this.blur)},t.identity=new t("transparent",0,0,0),createjs.Shadow=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.initialize(t)},e=t.prototype=new createjs.EventDispatcher;e.complete=!0,e.framerate=0,e._animations=null,e._frames=null,e._images=null,e._data=null,e._loadCount=0,e._frameHeight=0,e._frameWidth=0,e._numFrames=0,e._regX=0,e._regY=0,e.initialize=function(t){var e,i,r,s;if(null!=t){if(this.framerate=t.framerate||0,t.images&&(i=t.images.length)>0)for(s=this._images=[],e=0;i>e;e++){var n=t.images[e];if("string"==typeof n){var a=n;n=document.createElement("img"),n.src=a}s.push(n),n.getContext||n.complete||(this._loadCount++,this.complete=!1,function(t){n.onload=function(){t._handleImageLoad()}}(this))}if(null==t.frames);else if(t.frames instanceof Array)for(this._frames=[],s=t.frames,e=0,i=s.length;i>e;e++){var o=s[e];this._frames.push({image:this._images[o[4]?o[4]:0],rect:new createjs.Rectangle(o[0],o[1],o[2],o[3]),regX:o[5]||0,regY:o[6]||0})}else r=t.frames,this._frameWidth=r.width,this._frameHeight=r.height,this._regX=r.regX||0,this._regY=r.regY||0,this._numFrames=r.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(r=t.animations)){this._data={};var h;for(h in r){var l={name:h},u=r[h];if("number"==typeof u)s=l.frames=[u];else if(u instanceof Array)if(1==u.length)l.frames=[u[0]];else for(l.speed=u[3],l.next=u[2],s=l.frames=[],e=u[0];e<=u[1];e++)s.push(e);else{l.speed=u.speed,l.next=u.next;var c=u.frames;s=l.frames="number"==typeof c?[c]:c.slice(0)}(l.next===!0||void 0===l.next)&&(l.next=h),(l.next===!1||s.length<2&&l.next==h)&&(l.next=null),l.speed||(l.speed=1),this._animations.push(h),this._data[h]=l}}}},e.getNumFrames=function(t){if(null==t)return this._frames?this._frames.length:this._numFrames;var e=this._data[t];return null==e?0:e.frames.length},e.getAnimations=function(){return this._animations.slice(0)},e.getAnimation=function(t){return this._data[t]},e.getFrame=function(t){var e;return this._frames&&(e=this._frames[t])?e:null},e.getFrameBounds=function(t,e){var i=this.getFrame(t);return i?(e||new createjs.Rectangle).initialize(-i.regX,-i.regY,i.rect.width,i.rect.height):null},e.toString=function(){return"[SpriteSheet]"},e.clone=function(){var e=new t;return e.complete=this.complete,e._animations=this._animations,e._frames=this._frames,e._images=this._images,e._data=this._data,e._frameHeight=this._frameHeight,e._frameWidth=this._frameWidth,e._numFrames=this._numFrames,e._loadCount=this._loadCount,e},e._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},e._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];for(var t=0,e=this._frameWidth,i=this._frameHeight,r=0,s=this._images;r<s.length;r++){for(var n=s[r],a=0|n.width/e,o=0|n.height/i,h=this._numFrames>0?Math.min(this._numFrames-t,a*o):a*o,l=0;h>l;l++)this._frames.push({image:n,rect:new createjs.Rectangle(l%a*e,(0|l/a)*i,e,i),regX:this._regX,regY:this._regY});t+=h}this._numFrames=t}},createjs.SpriteSheet=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.f=t,this.params=e,this.path=null==i?!0:i}t.prototype.exec=function(t){this.f.apply(t,this.params)};var e=function(){this.initialize()},i=e.prototype;e.getRGB=function(t,e,i,r){return null!=t&&null==i&&(r=e,i=255&t,e=255&t>>8,t=255&t>>16),null==r?"rgb("+t+","+e+","+i+")":"rgba("+t+","+e+","+i+","+r+")"},e.getHSL=function(t,e,i,r){return null==r?"hsl("+t%360+","+e+"%,"+i+"%)":"hsla("+t%360+","+e+"%,"+i+"%,"+r+")"},e.Command=t,e.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},e.STROKE_CAPS_MAP=["butt","round","square"],e.STROKE_JOINTS_MAP=["miter","round","bevel"];var r=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");if(r.getContext){var s=e._ctx=r.getContext("2d");e.beginCmd=new t(s.beginPath,[],!1),e.fillCmd=new t(s.fill,[],!1),e.strokeCmd=new t(s.stroke,[],!1),r.width=r.height=1}i._strokeInstructions=null,i._strokeStyleInstructions=null,i._strokeIgnoreScale=!1,i._fillInstructions=null,i._fillMatrix=null,i._instructions=null,i._oldInstructions=null,i._activeInstructions=null,i._active=!1,i._dirty=!1,i.initialize=function(){this.clear(),this._ctx=e._ctx},i.isEmpty=function(){return!(this._instructions.length||this._oldInstructions.length||this._activeInstructions.length)},i.draw=function(t){this._dirty&&this._updateInstructions();for(var e=this._instructions,i=0,r=e.length;r>i;i++)e[i].exec(t)},i.drawAsPath=function(t){this._dirty&&this._updateInstructions();for(var e,i=this._instructions,r=0,s=i.length;s>r;r++)((e=i[r]).path||0==r)&&e.exec(t)},i.moveTo=function(e,i){return this._activeInstructions.push(new t(this._ctx.moveTo,[e,i])),this},i.lineTo=function(e,i){return this._dirty=this._active=!0,this._activeInstructions.push(new t(this._ctx.lineTo,[e,i])),this},i.arcTo=function(e,i,r,s,n){return this._dirty=this._active=!0,this._activeInstructions.push(new t(this._ctx.arcTo,[e,i,r,s,n])),this},i.arc=function(e,i,r,s,n,a){return this._dirty=this._active=!0,null==a&&(a=!1),this._activeInstructions.push(new t(this._ctx.arc,[e,i,r,s,n,a])),this},i.quadraticCurveTo=function(e,i,r,s){return this._dirty=this._active=!0,this._activeInstructions.push(new t(this._ctx.quadraticCurveTo,[e,i,r,s])),this},i.bezierCurveTo=function(e,i,r,s,n,a){return this._dirty=this._active=!0,this._activeInstructions.push(new t(this._ctx.bezierCurveTo,[e,i,r,s,n,a])),this},i.rect=function(e,i,r,s){return this._dirty=this._active=!0,this._activeInstructions.push(new t(this._ctx.rect,[e,i,r,s])),this},i.closePath=function(){return this._active&&(this._dirty=!0,this._activeInstructions.push(new t(this._ctx.closePath,[]))),this},i.clear=function(){return this._instructions=[],this._oldInstructions=[],this._activeInstructions=[],this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=this._fillMatrix=null,this._active=this._dirty=this._strokeIgnoreScale=!1,this},i.beginFill=function(e){return this._active&&this._newPath(),this._fillInstructions=e?[new t(this._setProp,["fillStyle",e],!1)]:null,this._fillMatrix=null,this},i.beginLinearGradientFill=function(e,i,r,s,n,a){this._active&&this._newPath();for(var o=this._ctx.createLinearGradient(r,s,n,a),h=0,l=e.length;l>h;h++)o.addColorStop(i[h],e[h]);return this._fillInstructions=[new t(this._setProp,["fillStyle",o],!1)],this._fillMatrix=null,this},i.beginRadialGradientFill=function(e,i,r,s,n,a,o,h){this._active&&this._newPath();for(var l=this._ctx.createRadialGradient(r,s,n,a,o,h),u=0,c=e.length;c>u;u++)l.addColorStop(i[u],e[u]);return this._fillInstructions=[new t(this._setProp,["fillStyle",l],!1)],this._fillMatrix=null,this},i.beginBitmapFill=function(e,i,r){this._active&&this._newPath(),i=i||"";var s=this._ctx.createPattern(e,i);return this._fillInstructions=[new t(this._setProp,["fillStyle",s],!1)],this._fillMatrix=r?[r.a,r.b,r.c,r.d,r.tx,r.ty]:null,this},i.endFill=function(){return this.beginFill()},i.setStrokeStyle=function(i,r,s,n,a){return this._active&&this._newPath(),this._strokeStyleInstructions=[new t(this._setProp,["lineWidth",null==i?"1":i],!1),new t(this._setProp,["lineCap",null==r?"butt":isNaN(r)?r:e.STROKE_CAPS_MAP[r]],!1),new t(this._setProp,["lineJoin",null==s?"miter":isNaN(s)?s:e.STROKE_JOINTS_MAP[s]],!1),new t(this._setProp,["miterLimit",null==n?"10":n],!1)],this._strokeIgnoreScale=a,this},i.beginStroke=function(e){return this._active&&this._newPath(),this._strokeInstructions=e?[new t(this._setProp,["strokeStyle",e],!1)]:null,this},i.beginLinearGradientStroke=function(e,i,r,s,n,a){this._active&&this._newPath();for(var o=this._ctx.createLinearGradient(r,s,n,a),h=0,l=e.length;l>h;h++)o.addColorStop(i[h],e[h]);return this._strokeInstructions=[new t(this._setProp,["strokeStyle",o],!1)],this},i.beginRadialGradientStroke=function(e,i,r,s,n,a,o,h){this._active&&this._newPath();for(var l=this._ctx.createRadialGradient(r,s,n,a,o,h),u=0,c=e.length;c>u;u++)l.addColorStop(i[u],e[u]);return this._strokeInstructions=[new t(this._setProp,["strokeStyle",l],!1)],this},i.beginBitmapStroke=function(e,i){this._active&&this._newPath(),i=i||"";var r=this._ctx.createPattern(e,i);return this._strokeInstructions=[new t(this._setProp,["strokeStyle",r],!1)],this},i.endStroke=function(){return this.beginStroke(),this},i.curveTo=i.quadraticCurveTo,i.drawRect=i.rect,i.drawRoundRect=function(t,e,i,r,s){return this.drawRoundRectComplex(t,e,i,r,s,s,s,s),this},i.drawRoundRectComplex=function(e,i,r,s,n,a,o,h){var l=(s>r?r:s)/2,u=0,c=0,d=0,p=0;0>n&&(n*=u=-1),n>l&&(n=l),0>a&&(a*=c=-1),a>l&&(a=l),0>o&&(o*=d=-1),o>l&&(o=l),0>h&&(h*=p=-1),h>l&&(h=l),this._dirty=this._active=!0;var f=this._ctx.arcTo,m=this._ctx.lineTo;return this._activeInstructions.push(new t(this._ctx.moveTo,[e+r-a,i]),new t(f,[e+r+a*c,i-a*c,e+r,i+a,a]),new t(m,[e+r,i+s-o]),new t(f,[e+r+o*d,i+s+o*d,e+r-o,i+s,o]),new t(m,[e+h,i+s]),new t(f,[e-h*p,i+s+h*p,e,i+s-h,h]),new t(m,[e,i+n]),new t(f,[e-n*u,i-n*u,e+n,i,n]),new t(this._ctx.closePath)),this},i.drawCircle=function(t,e,i){return this.arc(t,e,i,0,2*Math.PI),this},i.drawEllipse=function(e,i,r,s){this._dirty=this._active=!0;var n=.5522848,a=r/2*n,o=s/2*n,h=e+r,l=i+s,u=e+r/2,c=i+s/2;return this._activeInstructions.push(new t(this._ctx.moveTo,[e,c]),new t(this._ctx.bezierCurveTo,[e,c-o,u-a,i,u,i]),new t(this._ctx.bezierCurveTo,[u+a,i,h,c-o,h,c]),new t(this._ctx.bezierCurveTo,[h,c+o,u+a,l,u,l]),new t(this._ctx.bezierCurveTo,[u-a,l,e,c+o,e,c])),this},i.inject=function(e,i){return this._dirty=this._active=!0,this._activeInstructions.push(new t(e,[i])),this},i.drawPolyStar=function(e,i,r,s,n,a){this._dirty=this._active=!0,null==n&&(n=0),n=1-n,null==a?a=0:a/=180/Math.PI;var o=Math.PI/s;this._activeInstructions.push(new t(this._ctx.moveTo,[e+Math.cos(a)*r,i+Math.sin(a)*r]));for(var h=0;s>h;h++)a+=o,1!=n&&this._activeInstructions.push(new t(this._ctx.lineTo,[e+Math.cos(a)*r*n,i+Math.sin(a)*r*n])),a+=o,this._activeInstructions.push(new t(this._ctx.lineTo,[e+Math.cos(a)*r,i+Math.sin(a)*r]));return this},i.decodePath=function(t){for(var i=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],r=[2,2,4,6,0],s=0,n=t.length,a=[],o=0,h=0,l=e.BASE_64;n>s;){var u=t.charAt(s),c=l[u],d=c>>3,p=i[d];if(!p||3&c)throw"bad path data (@"+s+"): "+u;var f=r[d];d||(o=h=0),a.length=0,s++;for(var m=(1&c>>2)+2,g=0;f>g;g++){var v=l[t.charAt(s)],_=v>>5?-1:1;v=(31&v)<<6|l[t.charAt(s+1)],3==m&&(v=v<<6|l[t.charAt(s+2)]),v=_*v/10,g%2?o=v+=o:h=v+=h,a[g]=v,s+=m}p.apply(this,a)}return this},i.clone=function(){var t=new e;return t._instructions=this._instructions.slice(),t._activeInstructions=this._activeInstructions.slice(),t._oldInstructions=this._oldInstructions.slice(),this._fillInstructions&&(t._fillInstructions=this._fillInstructions.slice()),this._strokeInstructions&&(t._strokeInstructions=this._strokeInstructions.slice()),this._strokeStyleInstructions&&(t._strokeStyleInstructions=this._strokeStyleInstructions.slice()),t._active=this._active,t._dirty=this._dirty,t._fillMatrix=this._fillMatrix,t._strokeIgnoreScale=this._strokeIgnoreScale,t},i.toString=function(){return"[Graphics]"},i.mt=i.moveTo,i.lt=i.lineTo,i.at=i.arcTo,i.bt=i.bezierCurveTo,i.qt=i.quadraticCurveTo,i.a=i.arc,i.r=i.rect,i.cp=i.closePath,i.c=i.clear,i.f=i.beginFill,i.lf=i.beginLinearGradientFill,i.rf=i.beginRadialGradientFill,i.bf=i.beginBitmapFill,i.ef=i.endFill,i.ss=i.setStrokeStyle,i.s=i.beginStroke,i.ls=i.beginLinearGradientStroke,i.rs=i.beginRadialGradientStroke,i.bs=i.beginBitmapStroke,i.es=i.endStroke,i.dr=i.drawRect,i.rr=i.drawRoundRect,i.rc=i.drawRoundRectComplex,i.dc=i.drawCircle,i.de=i.drawEllipse,i.dp=i.drawPolyStar,i.p=i.decodePath,i._updateInstructions=function(){this._instructions=this._oldInstructions.slice(),this._instructions.push(e.beginCmd),this._appendInstructions(this._fillInstructions),this._appendInstructions(this._strokeInstructions),this._appendInstructions(this._strokeInstructions&&this._strokeStyleInstructions),this._appendInstructions(this._activeInstructions),this._fillInstructions&&this._appendDraw(e.fillCmd,this._fillMatrix),this._strokeInstructions&&this._appendDraw(e.strokeCmd,this._strokeIgnoreScale&&[1,0,0,1,0,0])},i._appendInstructions=function(t){t&&this._instructions.push.apply(this._instructions,t)},i._appendDraw=function(e,i){i?this._instructions.push(new t(this._ctx.save,[],!1),new t(this._ctx.transform,i,!1),e,new t(this._ctx.restore,[],!1)):this._instructions.push(e)},i._newPath=function(){this._dirty&&this._updateInstructions(),this._oldInstructions=this._instructions,this._activeInstructions=[],this._active=this._dirty=!1},i._setProp=function(t,e){this[t]=e},createjs.Graphics=e}(),this.createjs=this.createjs||{},function(){var t=function(){this.initialize()},e=t.prototype=new createjs.EventDispatcher;t._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],t.suppressCrossDomainErrors=!1;var i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(t._hitTestCanvas=i,t._hitTestContext=i.getContext("2d"),i.width=i.height=1),t._nextCacheID=1,e.alpha=1,e.cacheCanvas=null,e.id=-1,e.mouseEnabled=!0,e.tickEnabled=!0,e.name=null,e.parent=null,e.regX=0,e.regY=0,e.rotation=0,e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.shadow=null,e.visible=!0,e.x=0,e.y=0,e.compositeOperation=null,e.snapToPixel=!1,e.filters=null,e.cacheID=0,e.mask=null,e.hitArea=null,e.cursor=null,e._cacheOffsetX=0,e._cacheOffsetY=0,e._cacheScale=1,e._cacheDataURLID=0,e._cacheDataURL=null,e._matrix=null,e._rectangle=null,e._bounds=null,e.initialize=function(){this.id=createjs.UID.get(),this._matrix=new createjs.Matrix2D,this._rectangle=new createjs.Rectangle},e.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},e.draw=function(t,e){var i=this.cacheCanvas;if(e||!i)return!1;var r,s=this._cacheScale,n=this._cacheOffsetX,a=this._cacheOffsetY;return(r=this._applyFilterBounds(n,a,0,0))&&(n=r.x,a=r.y),t.drawImage(i,n,a,i.width/s,i.height/s),!0},e.updateContext=function(t){var e,i=this.mask,r=this;i&&i.graphics&&!i.graphics.isEmpty()&&(e=i.getMatrix(i._matrix),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty),i.graphics.drawAsPath(t),t.clip(),e.invert(),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),e=r._matrix.identity().appendTransform(r.x,r.y,r.scaleX,r.scaleY,r.rotation,r.skewX,r.skewY,r.regX,r.regY),createjs.Stage._snapToPixelEnabled&&r.snapToPixel?t.transform(e.a,e.b,e.c,e.d,0|e.tx+.5,0|e.ty+.5):t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty),t.globalAlpha*=r.alpha,r.compositeOperation&&(t.globalCompositeOperation=r.compositeOperation),r.shadow&&this._applyShadow(t,r.shadow)},e.cache=function(t,e,i,r,s){s=s||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this._cacheWidth=i,this._cacheHeight=r,this._cacheOffsetX=t,this._cacheOffsetY=e,this._cacheScale=s,this.updateCache()},e.updateCache=function(e){var i,r=this.cacheCanvas,s=this._cacheScale,n=this._cacheOffsetX*s,a=this._cacheOffsetY*s,o=this._cacheWidth,h=this._cacheHeight;if(!r)throw"cache() must be called before updateCache()";var l=r.getContext("2d");(i=this._applyFilterBounds(n,a,o,h))&&(n=i.x,a=i.y,o=i.width,h=i.height),o=Math.ceil(o*s),h=Math.ceil(h*s),o!=r.width||h!=r.height?(r.width=o,r.height=h):e||l.clearRect(0,0,o+1,h+1),l.save(),l.globalCompositeOperation=e,l.setTransform(s,0,0,s,-n,-a),this.draw(l,!0),this._applyFilters(),l.restore(),this.cacheID=t._nextCacheID++},e.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0,this._cacheScale=1},e.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},e.getStage=function(){for(var t=this;t.parent;)t=t.parent;return t instanceof createjs.Stage?t:null},e.localToGlobal=function(t,e){var i=this.getConcatenatedMatrix(this._matrix);return null==i?null:(i.append(1,0,0,1,t,e),new createjs.Point(i.tx,i.ty))},e.globalToLocal=function(t,e){var i=this.getConcatenatedMatrix(this._matrix);return null==i?null:(i.invert(),i.append(1,0,0,1,t,e),new createjs.Point(i.tx,i.ty))},e.localToLocal=function(t,e,i){var r=this.localToGlobal(t,e);return i.globalToLocal(r.x,r.y)},e.setTransform=function(t,e,i,r,s,n,a,o,h){return this.x=t||0,this.y=e||0,this.scaleX=null==i?1:i,this.scaleY=null==r?1:r,this.rotation=s||0,this.skewX=n||0,this.skewY=a||0,this.regX=o||0,this.regY=h||0,this},e.getMatrix=function(t){var e=this;return(t?t.identity():new createjs.Matrix2D).appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY).appendProperties(e.alpha,e.shadow,e.compositeOperation)},e.getConcatenatedMatrix=function(t){t?t.identity():t=new createjs.Matrix2D;for(var e=this;null!=e;)t.prependTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY).prependProperties(e.alpha,e.shadow,e.compositeOperation),e=e.parent;return t},e.hitTest=function(e,i){var r=t._hitTestContext;r.setTransform(1,0,0,1,-e,-i),this.draw(r);var s=this._testHit(r);return r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,2,2),s},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var t=this.cacheCanvas;if(t){var e=this._cacheScale;return this._rectangle.initialize(this._cacheOffsetX,this._cacheOffsetY,t.width/e,t.height/e)}return null},e.getTransformedBounds=function(){return this._getBounds()},e.setBounds=function(t,e,i,r){null==t&&(this._bounds=t),this._bounds=(this._bounds||new createjs.Rectangle).initialize(t,e,i,r)},e.clone=function(){var e=new t;return this.cloneProps(e),e},e.toString=function(){return"[DisplayObject (name="+this.name+")]"},e.cloneProps=function(t){t.alpha=this.alpha,t.name=this.name,t.regX=this.regX,t.regY=this.regY,t.rotation=this.rotation,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.shadow=this.shadow,t.skewX=this.skewX,t.skewY=this.skewY,t.visible=this.visible,t.x=this.x,t.y=this.y,t._bounds=this._bounds,t.mouseEnabled=this.mouseEnabled,t.compositeOperation=this.compositeOperation},e._applyShadow=function(t,e){e=e||Shadow.identity,t.shadowColor=e.color,t.shadowOffsetX=e.offsetX,t.shadowOffsetY=e.offsetY,t.shadowBlur=e.blur},e._tick=function(t){var e=this._listeners;if(e&&e.tick){var i=new createjs.Event("tick");i.params=t,this._dispatchEvent(i,this,2)}},e._testHit=function(e){try{var i=e.getImageData(0,0,1,1).data[3]>1}catch(r){if(!t.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return i},e._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var t=this.filters.length,e=this.cacheCanvas.getContext("2d"),i=this.cacheCanvas.width,r=this.cacheCanvas.height,s=0;t>s;s++)this.filters[s].applyFilter(e,0,0,i,r)},e._applyFilterBounds=function(t,e,i,r){var s,n,a=this.filters;if(!a||!(n=a.length))return null;for(var o=0;n>o;o++){var h=this.filters[o],l=h.getBounds&&h.getBounds();l&&(s||(s=this._rectangle.initialize(t,e,i,r)),s.x+=l.x,s.y+=l.y,s.width+=l.width,s.height+=l.height)}return s},e._getBounds=function(t,e){return this._transformBounds(this.getBounds(),t,e)},e._transformBounds=function(t,e,i){if(!t)return t;var r=t.x,s=t.y,n=t.width,a=t.height,o=i?this._matrix.identity():this.getMatrix(this._matrix);(r||s)&&o.appendTransform(0,0,1,1,0,0,0,-r,-s),e&&o.prependMatrix(e);var h=n*o.a,l=n*o.b,u=a*o.c,c=a*o.d,d=o.tx,p=o.ty,f=d,m=d,g=p,v=p;return(r=h+d)<f?f=r:r>m&&(m=r),(r=h+u+d)<f?f=r:r>m&&(m=r),(r=u+d)<f?f=r:r>m&&(m=r),(s=l+p)<g?g=s:s>v&&(v=s),(s=l+c+p)<g?g=s:s>v&&(v=s),(s=c+p)<g?g=s:s>v&&(v=s),t.initialize(f,g,m-f,v-g)},e._hasMouseEventListener=function(){for(var e=t._MOUSE_EVENTS,i=0,r=e.length;r>i;i++)if(this.hasEventListener(e[i]))return!0;return!!this.cursor},createjs.DisplayObject=t}(),this.createjs=this.createjs||{},function(){var t=function(){this.initialize()},e=t.prototype=new createjs.DisplayObject;e.children=null,e.mouseChildren=!0,e.tickChildren=!0,e.DisplayObject_initialize=e.initialize,e.initialize=function(){this.DisplayObject_initialize(),this.children=[]},e.isVisible=function(){var t=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.DisplayObject_draw=e.draw,e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;for(var i=this.children.slice(0),r=0,s=i.length;s>r;r++){var n=i[r];n.isVisible()&&(t.save(),n.updateContext(t),n.draw(t),t.restore())}return!0},e.addChild=function(t){if(null==t)return t;var e=arguments.length;if(e>1){for(var i=0;e>i;i++)this.addChild(arguments[i]);return arguments[e-1]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),t},e.addChildAt=function(t,e){var i=arguments.length,r=arguments[i-1];if(0>r||r>this.children.length)return arguments[i-2];if(i>2){for(var s=0;i-1>s;s++)this.addChildAt(arguments[s],r+s);return arguments[i-2]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t},e.removeChild=function(t){var e=arguments.length;if(e>1){for(var i=!0,r=0;e>r;r++)i=i&&this.removeChild(arguments[r]);return i}return this.removeChildAt(createjs.indexOf(this.children,t))},e.removeChildAt=function(t){var e=arguments.length;if(e>1){for(var i=[],r=0;e>r;r++)i[r]=arguments[r];i.sort(function(t,e){return e-t});for(var s=!0,r=0;e>r;r++)s=s&&this.removeChildAt(i[r]);return s}if(0>t||t>this.children.length-1)return!1;var n=this.children[t];return n&&(n.parent=null),this.children.splice(t,1),!0},e.removeAllChildren=function(){for(var t=this.children;t.length;)t.pop().parent=null},e.getChildAt=function(t){return this.children[t]},e.getChildByName=function(t){for(var e=this.children,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null},e.sortChildren=function(t){this.children.sort(t)},e.getChildIndex=function(t){return createjs.indexOf(this.children,t)},e.getNumChildren=function(){return this.children.length},e.swapChildrenAt=function(t,e){var i=this.children,r=i[t],s=i[e];r&&s&&(i[t]=s,i[e]=r)},e.swapChildren=function(t,e){for(var i,r,s=this.children,n=0,a=s.length;a>n&&(s[n]==t&&(i=n),s[n]==e&&(r=n),null==i||null==r);n++);n!=a&&(s[i]=e,s[r]=t)},e.setChildIndex=function(t,e){var i=this.children,r=i.length;if(!(t.parent!=this||0>e||e>=r)){for(var s=0;r>s&&i[s]!=t;s++);s!=r&&s!=e&&(i.splice(s,1),i.splice(e,0,t))}},e.contains=function(t){for(;t;){if(t==this)return!0;t=t.parent}return!1},e.hitTest=function(t,e){return null!=this.getObjectUnderPoint(t,e)},e.getObjectsUnderPoint=function(t,e){var i=[],r=this.localToGlobal(t,e);return this._getObjectsUnderPoint(r.x,r.y,i),i},e.getObjectUnderPoint=function(t,e){var i=this.localToGlobal(t,e);return this._getObjectsUnderPoint(i.x,i.y)},e.DisplayObject_getBounds=e.getBounds,e.getBounds=function(){return this._getBounds(null,!0)},e.getTransformedBounds=function(){return this._getBounds()},e.clone=function(e){var i=new t;if(this.cloneProps(i),e)for(var r=i.children=[],s=0,n=this.children.length;n>s;s++){var a=this.children[s].clone(e);a.parent=i,r.push(a)}return i},e.toString=function(){return"[Container (name="+this.name+")]"},e.DisplayObject__tick=e._tick,e._tick=function(t){if(this.tickChildren)for(var e=this.children.length-1;e>=0;e--){var i=this.children[e];i.tickEnabled&&i._tick&&i._tick(t)}this.DisplayObject__tick(t)},e._getObjectsUnderPoint=function(e,i,r,s,n){var a=createjs.DisplayObject._hitTestContext,o=this._matrix;n=n||s&&this._hasMouseEventListener();for(var h=this.children,l=h.length,u=l-1;u>=0;u--){var c=h[u],d=c.hitArea;if(c.visible&&(d||c.isVisible())&&(!s||c.mouseEnabled))if(!d&&c instanceof t){var p=c._getObjectsUnderPoint(e,i,r,s,n);if(!r&&p)return s&&!this.mouseChildren?this:p}else{if(!n&&!c._hasMouseEventListener())continue;if(c.getConcatenatedMatrix(o),d&&(o.appendTransform(d.x,d.y,d.scaleX,d.scaleY,d.rotation,d.skewX,d.skewY,d.regX,d.regY),o.alpha=d.alpha),a.globalAlpha=o.alpha,a.setTransform(o.a,o.b,o.c,o.d,o.tx-e,o.ty-i),(d||c).draw(a),!this._testHit(a))continue;if(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,2,2),!r)return s&&!this.mouseChildren?this:c;r.push(c)}}return null},e._getBounds=function(t,e){var i=this.DisplayObject_getBounds();if(i)return this._transformBounds(i,t,e);var r,s,n,a,o=e?this._matrix.identity():this.getMatrix(this._matrix);t&&o.prependMatrix(t);for(var h=this.children.length,l=0;h>l;l++){var u=this.children[l];if(u.visible&&(i=u._getBounds(o))){var c=i.x,d=i.y,p=c+i.width,f=d+i.height;(r>c||null==r)&&(r=c),(p>s||null==s)&&(s=p),(n>d||null==n)&&(n=d),(f>a||null==a)&&(a=f)}}return null==s?null:this._rectangle.initialize(r,n,s-r,a-n)},createjs.Container=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.initialize(t)},e=t.prototype=new createjs.Container;t._snapToPixelEnabled=!1,e.autoClear=!0,e.canvas=null,e.mouseX=0,e.mouseY=0,e.snapToPixelEnabled=!1,e.mouseInBounds=!1,e.tickOnUpdate=!0,e.mouseMoveOutside=!1,e.nextStage=null,e._pointerData=null,e._pointerCount=0,e._primaryPointerID=null,e._mouseOverIntervalID=null,e.Container_initialize=e.initialize,e.initialize=function(t){this.Container_initialize(),this.canvas="string"==typeof t?document.getElementById(t):t,this._pointerData={},this.enableDOMEvents(!0)},e.update=function(){if(this.canvas){this.tickOnUpdate&&(this.dispatchEvent("tickstart"),this.tickEnabled&&this._tick(arguments.length?arguments:null),this.dispatchEvent("tickend")),this.dispatchEvent("drawstart"),t._snapToPixelEnabled=this.snapToPixelEnabled,this.autoClear&&this.clear();var e=this.canvas.getContext("2d");e.save(),this.updateContext(e),this.draw(e,!1),e.restore(),this.dispatchEvent("drawend")}},e.handleEvent=function(t){"tick"==t.type&&this.update(t)},e.clear=function(){if(this.canvas){var t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},e.toDataURL=function(t,e){e||(e="image/png");var i,r=this.canvas.getContext("2d"),s=this.canvas.width,n=this.canvas.height;if(t){i=r.getImageData(0,0,s,n);var a=r.globalCompositeOperation;r.globalCompositeOperation="destination-over",r.fillStyle=t,r.fillRect(0,0,s,n)}var o=this.canvas.toDataURL(e);return t&&(r.clearRect(0,0,s+1,n+1),r.putImageData(i,0,0),r.globalCompositeOperation=a),o},e.enableMouseOver=function(t){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==t&&this._testMouseOver(!0)),null==t)t=20;else if(0>=t)return;var e=this;this._mouseOverIntervalID=setInterval(function(){e._testMouseOver()},1e3/Math.min(50,t))},e.enableDOMEvents=function(t){null==t&&(t=!0);var e,i,r=this._eventListeners;if(!t&&r){for(e in r)i=r[e],i.t.removeEventListener(e,i.f,!1);this._eventListeners=null}else if(t&&!r&&this.canvas){var s=window.addEventListener?window:document,n=this;r=this._eventListeners={},r.mouseup={t:s,f:function(t){n._handleMouseUp(t)}},r.mousemove={t:s,f:function(t){n._handleMouseMove(t)}},r.dblclick={t:this.canvas,f:function(t){n._handleDoubleClick(t)}},r.mousedown={t:this.canvas,f:function(t){n._handleMouseDown(t)}};for(e in r)i=r[e],i.t.addEventListener(e,i.f,!1)}},e.clone=function(){var e=new t(null);return this.cloneProps(e),e},e.toString=function(){return"[Stage (name="+this.name+")]"},e._getElementRect=function(t){var e;try{e=t.getBoundingClientRect()}catch(i){e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var r=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),s=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),n=window.getComputedStyle?getComputedStyle(t):t.currentStyle,a=parseInt(n.paddingLeft)+parseInt(n.borderLeftWidth),o=parseInt(n.paddingTop)+parseInt(n.borderTopWidth),h=parseInt(n.paddingRight)+parseInt(n.borderRightWidth),l=parseInt(n.paddingBottom)+parseInt(n.borderBottomWidth);return{left:e.left+r+a,right:e.right+r-h,top:e.top+s+o,bottom:e.bottom+s-l}},e._getPointerData=function(t){var e=this._pointerData[t];return e||(e=this._pointerData[t]={x:0,y:0},null==this._primaryPointerID&&(this._primaryPointerID=t),(null==this._primaryPointerID||-1==this._primaryPointerID)&&(this._primaryPointerID=t)),e},e._handleMouseMove=function(t){t||(t=window.event),this._handlePointerMove(-1,t,t.pageX,t.pageY)},e._handlePointerMove=function(t,e,i,r){if(this.canvas){var s=this._getPointerData(t),n=s.inBounds;if(this._updatePointerPosition(t,e,i,r),n||s.inBounds||this.mouseMoveOutside){-1==t&&s.inBounds==!n&&this._dispatchMouseEvent(this,n?"mouseleave":"mouseenter",!1,t,s,e),this._dispatchMouseEvent(this,"stagemousemove",!1,t,s,e),this._dispatchMouseEvent(s.target,"pressmove",!0,t,s,e);var a=s.event;a&&a.hasEventListener("mousemove")&&a.dispatchEvent(new createjs.MouseEvent("mousemove",!1,!1,s.x,s.y,e,t,t==this._primaryPointerID,s.rawX,s.rawY),s.target),this.nextStage&&this.nextStage._handlePointerMove(t,e,i,r)}}},e._updatePointerPosition=function(t,e,i,r){var s=this._getElementRect(this.canvas);i-=s.left,r-=s.top;
var n=this.canvas.width,a=this.canvas.height;i/=(s.right-s.left)/n,r/=(s.bottom-s.top)/a;var o=this._getPointerData(t);(o.inBounds=i>=0&&r>=0&&n-1>=i&&a-1>=r)?(o.x=i,o.y=r):this.mouseMoveOutside&&(o.x=0>i?0:i>n-1?n-1:i,o.y=0>r?0:r>a-1?a-1:r),o.posEvtObj=e,o.rawX=i,o.rawY=r,t==this._primaryPointerID&&(this.mouseX=o.x,this.mouseY=o.y,this.mouseInBounds=o.inBounds)},e._handleMouseUp=function(t){this._handlePointerUp(-1,t,!1)},e._handlePointerUp=function(t,e,i){var r=this._getPointerData(t);this._dispatchMouseEvent(this,"stagemouseup",!1,t,r,e);var s=r.target;s&&(this._getObjectsUnderPoint(r.x,r.y,null,!0)==s&&this._dispatchMouseEvent(s,"click",!0,t,r,e),this._dispatchMouseEvent(s,"pressup",!0,t,r,e));var n=r.event;n&&n.hasEventListener("mouseup")&&n.dispatchEvent(new createjs.MouseEvent("mouseup",!1,!1,r.x,r.y,e,t,t==this._primaryPointerID,r.rawX,r.rawY),s),i?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):r.event=r.target=null,this.nextStage&&this.nextStage._handlePointerUp(t,e,i)},e._handleMouseDown=function(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)},e._handlePointerDown=function(t,e,i,r){null!=r&&this._updatePointerPosition(t,e,i,r);var s=this._getPointerData(t);this._dispatchMouseEvent(this,"stagemousedown",!1,t,s,e),s.target=this._getObjectsUnderPoint(s.x,s.y,null,!0),s.event=this._dispatchMouseEvent(s.target,"mousedown",!0,t,s,e),this.nextStage&&this.nextStage._handlePointerDown(t,e,i,r)},e._testMouseOver=function(t){if(-1==this._primaryPointerID&&(t||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var e,i,r,s,n=this._getPointerData(-1),a=n.posEvtObj,o=-1,h="";(t||this.mouseInBounds&&a&&a.target==this.canvas)&&(e=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var l=this._mouseOverTarget||[],u=l[l.length-1],c=this._mouseOverTarget=[];for(i=e;i;)c.unshift(i),null!=i.cursor&&(h=i.cursor),i=i.parent;for(this.canvas.style.cursor=h,r=0,s=c.length;s>r&&c[r]==l[r];r++)o=r;for(u!=e&&this._dispatchMouseEvent(u,"mouseout",!0,-1,n,a),r=l.length-1;r>o;r--)this._dispatchMouseEvent(l[r],"rollout",!1,-1,n,a);for(r=c.length-1;r>o;r--)this._dispatchMouseEvent(c[r],"rollover",!1,-1,n,a);u!=e&&this._dispatchMouseEvent(e,"mouseover",!0,-1,n,a)}},e._handleDoubleClick=function(t){var e=this._getPointerData(-1),i=this._getObjectsUnderPoint(e.x,e.y,null,!0);this._dispatchMouseEvent(i,"dblclick",!0,-1,e,t),this.nextStage&&this.nextStage._handleDoubleClick(t)},e._dispatchMouseEvent=function(t,e,i,r,s,n){if(t&&(i||t.hasEventListener(e))){var a=new createjs.MouseEvent(e,i,!1,s.x,s.y,n,r,r==this._primaryPointerID,s.rawX,s.rawY);return t.dispatchEvent(a),a}},createjs.Stage=t}(),this.createjs=this.createjs||{},function(){var t=function(t){this.initialize(t)},e=t.prototype=new createjs.DisplayObject;e.image=null,e.snapToPixel=!0,e.sourceRect=null,e.DisplayObject_initialize=e.initialize,e.initialize=function(t){this.DisplayObject_initialize(),"string"==typeof t?(this.image=document.createElement("img"),this.image.src=t):this.image=t},e.isVisible=function(){var t=this.cacheCanvas||this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.DisplayObject_draw=e.draw,e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;var i=this.sourceRect;return i?t.drawImage(this.image,i.x,i.y,i.width,i.height,0,0,i.width,i.height):t.drawImage(this.image,0,0),!0},e.DisplayObject_getBounds=e.getBounds,e.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;var e=this.sourceRect||this.image,i=this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return i?this._rectangle.initialize(0,0,e.width,e.height):null},e.clone=function(){var e=new t(this.image);return this.sourceRect&&(e.sourceRect=this.sourceRect.clone()),this.cloneProps(e),e},e.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e){this.initialize(t,e)},e=t.prototype=new createjs.DisplayObject;e.currentFrame=0,e.currentAnimation=null,e.paused=!0,e.spriteSheet=null,e.snapToPixel=!0,e.offset=0,e.currentAnimationFrame=0,e.framerate=0,e._advanceCount=0,e._animation=null,e._currentFrame=null,e.DisplayObject_initialize=e.initialize,e.initialize=function(t,e){this.DisplayObject_initialize(),this.spriteSheet=t,e&&this.gotoAndPlay(e)},e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.DisplayObject_draw=e.draw,e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;this._normalizeFrame();var i=this.spriteSheet.getFrame(0|this._currentFrame);if(!i)return!1;var r=i.rect;return t.drawImage(i.image,r.x,r.y,r.width,r.height,-i.regX,-i.regY,r.width,r.height),!0},e.play=function(){this.paused=!1},e.stop=function(){this.paused=!0},e.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.advance=function(t){var e=this._animation&&this._animation.speed||1,i=this.framerate||this.spriteSheet.framerate,r=i&&null!=t?t/(1e3/i):1;this._animation?this.currentAnimationFrame+=r*e:this._currentFrame+=r*e,this._normalizeFrame()},e.DisplayObject_getBounds=e.getBounds,e.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},e.clone=function(){var e=new t(this.spriteSheet);return this.cloneProps(e),e},e.toString=function(){return"[Sprite (name="+this.name+")]"},e.DisplayObject__tick=e._tick,e._tick=function(t){this.paused||this.advance(t&&t[0]&&t[0].delta),this.DisplayObject__tick(t)},e._normalizeFrame=function(){var t,e=this._animation,i=this.paused,r=this._currentFrame,s=this.currentAnimationFrame;if(e)if(t=e.frames.length,(0|s)>=t){var n=e.next;if(this._dispatchAnimationEnd(e,r,i,n,t-1));else{if(n)return this._goto(n,s-t);this.paused=!0,s=this.currentAnimationFrame=e.frames.length-1,this._currentFrame=e.frames[s]}}else this._currentFrame=e.frames[0|s];else if(t=this.spriteSheet.getNumFrames(),r>=t&&!this._dispatchAnimationEnd(e,r,i,t-1)&&(this._currentFrame-=t)>=t)return this._normalizeFrame();this.currentFrame=0|this._currentFrame},e._dispatchAnimationEnd=function(t,e,i,r,s){var n=t?t.name:null;if(this.hasEventListener("animationend")){var a=new createjs.Event("animationend");a.name=n,a.next=r,this.dispatchEvent(a)}var o=this._animation!=t||this._currentFrame!=e;return o||i||!this.paused||(this.currentAnimationFrame=s,o=!0),o},e.DisplayObject_cloneProps=e.cloneProps,e.cloneProps=function(t){this.DisplayObject_cloneProps(t),t.currentFrame=this.currentFrame,t._currentFrame=this._currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t._animation=this._animation,t.currentAnimationFrame=this.currentAnimationFrame,t.framerate=this.framerate},e._goto=function(t,e){if(isNaN(t)){var i=this.spriteSheet.getAnimation(t);i&&(this.currentAnimationFrame=e||0,this._animation=i,this.currentAnimation=t,this._normalizeFrame())}else this.currentAnimationFrame=0,this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame()},createjs.Sprite=t}(),this.createjs=this.createjs||{},function(){"use strict";var t="BitmapAnimation is deprecated in favour of Sprite. See VERSIONS file for info on changes.";if(!createjs.Sprite)throw t;(createjs.BitmapAnimation=function(e){console.log(t),this.initialize(e)}).prototype=new createjs.Sprite}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.initialize(t)},e=t.prototype=new createjs.DisplayObject;e.graphics=null,e.DisplayObject_initialize=e.initialize,e.initialize=function(t){this.DisplayObject_initialize(),this.graphics=t?t:new createjs.Graphics},e.isVisible=function(){var t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.DisplayObject_draw=e.draw,e.draw=function(t,e){return this.DisplayObject_draw(t,e)?!0:(this.graphics.draw(t),!0)},e.clone=function(e){var i=new t(e&&this.graphics?this.graphics.clone():this.graphics);return this.cloneProps(i),i},e.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i){this.initialize(t,e,i)},e=t.prototype=new createjs.DisplayObject,i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(t._workingContext=i.getContext("2d"),i.width=i.height=1),t.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},t.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},e.text="",e.font=null,e.color=null,e.textAlign="left",e.textBaseline="top",e.maxWidth=null,e.outline=0,e.lineHeight=0,e.lineWidth=null,e.DisplayObject_initialize=e.initialize,e.initialize=function(t,e,i){this.DisplayObject_initialize(),this.text=t,this.font=e,this.color=i},e.isVisible=function(){var t=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.DisplayObject_draw=e.draw,e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;var i=this.color||"#000";return this.outline?(t.strokeStyle=i,t.lineWidth=1*this.outline):t.fillStyle=i,this._drawText(this._prepContext(t)),!0},e.getMeasuredWidth=function(){return this._prepContext(t._workingContext).measureText(this.text).width},e.getMeasuredLineHeight=function(){return 1.2*this._prepContext(t._workingContext).measureText("M").width},e.getMeasuredHeight=function(){return this._drawText(null,{}).height},e.DisplayObject_getBounds=e.getBounds,e.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;if(null==this.text||""==this.text)return null;var i=this._drawText(null,{}),r=this.maxWidth&&this.maxWidth<i.width?this.maxWidth:i.width,s=r*t.H_OFFSETS[this.textAlign||"left"],n=this.lineHeight||this.getMeasuredLineHeight(),a=n*t.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.initialize(s,a,r,i.height)},e.clone=function(){var e=new t(this.text,this.font,this.color);return this.cloneProps(e),e},e.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},e.DisplayObject_cloneProps=e.cloneProps,e.cloneProps=function(t){this.DisplayObject_cloneProps(t),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.maxWidth=this.maxWidth,t.outline=this.outline,t.lineHeight=this.lineHeight,t.lineWidth=this.lineWidth},e._prepContext=function(t){return t.font=this.font,t.textAlign=this.textAlign||"left",t.textBaseline=this.textBaseline||"top",t},e._drawText=function(e,i){var r=!!e;r||(e=this._prepContext(t._workingContext));for(var s=this.lineHeight||this.getMeasuredLineHeight(),n=0,a=0,o=String(this.text).split(/(?:\r\n|\r|\n)/),h=0,l=o.length;l>h;h++){var u=o[h],c=null;if(null!=this.lineWidth&&(c=e.measureText(u).width)>this.lineWidth){var d=u.split(/(\s)/);u=d[0],c=e.measureText(u).width;for(var p=1,f=d.length;f>p;p+=2){var m=e.measureText(d[p]+d[p+1]).width;c+m>this.lineWidth?(r&&this._drawTextLine(e,u,a*s),c>n&&(n=c),u=d[p+1],c=e.measureText(u).width,a++):(u+=d[p]+d[p+1],c+=m)}}r&&this._drawTextLine(e,u,a*s),i&&null==c&&(c=e.measureText(u).width),c>n&&(n=c),a++}return i&&(i.count=a,i.width=n,i.height=a*s),i},e._drawTextLine=function(t,e,i){this.outline?t.strokeText(e,0,i,this.maxWidth||65535):t.fillText(e,0,i,this.maxWidth||65535)},createjs.Text=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.initialize(t,e)}var e=t.prototype=new createjs.DisplayObject;e.text="",e.spriteSheet=null,e.lineHeight=0,e.letterSpacing=0,e.spaceWidth=0,e.DisplayObject_initialize=e.initialize,e.initialize=function(t,e){this.DisplayObject_initialize(),this.text=t,this.spriteSheet=e},e.DisplayObject_draw=e.draw,e.draw=function(t,e){return this.DisplayObject_draw(t,e)?!0:void this._drawText(t)},e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.getBounds=function(){var t=this._rectangle;return this._drawText(null,t),t.width?t:null},e._getFrame=function(t,e){var i,r=e.getAnimation(t);return r||(t!=(i=t.toUpperCase())||t!=(i=t.toLowerCase())||(i=null),i&&(r=e.getAnimation(i))),r&&e.getFrame(r.frames[0])},e._getLineHeight=function(t){var e=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return e?e.rect.height:1},e._getSpaceWidth=function(t){var e=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return e?e.rect.width:1},e._drawText=function(t,e){var i,r,s,n=0,a=0,o=this.spaceWidth,h=this.lineHeight,l=this.spriteSheet,u=!!this._getFrame(" ",l);u||0!=o||(o=this._getSpaceWidth(l)),0==h&&(h=this._getLineHeight(l));for(var c=0,d=0,p=this.text.length;p>d;d++){var f=this.text.charAt(d);if(u||" "!=f)if("\n"!=f&&"\r"!=f){var m=this._getFrame(f,l);if(m){var g=m.rect;s=m.regX,i=g.width,t&&t.drawImage(m.image,g.x,g.y,i,r=g.height,n-s,a-m.regY,i,r),n+=i+this.letterSpacing}}else"\r"==f&&"\n"==this.text.charAt(d+1)&&d++,n-s>c&&(c=n-s),n=0,a+=h;else n+=o}n-s>c&&(c=n-s),e&&(e.width=c-this.letterSpacing,e.height=a+h)},createjs.BitmapText=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){throw"SpriteSheetUtils cannot be instantiated"},e=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");e.getContext&&(t._workingCanvas=e,t._workingContext=e.getContext("2d"),e.width=e.height=1),t.addFlippedFrames=function(e,i,r,s){if(i||r||s){var n=0;i&&t._flip(e,++n,!0,!1),r&&t._flip(e,++n,!1,!0),s&&t._flip(e,++n,!0,!0)}},t.extractFrame=function(e,i){isNaN(i)&&(i=e.getAnimation(i).frames[0]);var r=e.getFrame(i);if(!r)return null;var s=r.rect,n=t._workingCanvas;n.width=s.width,n.height=s.height,t._workingContext.drawImage(r.image,s.x,s.y,s.width,s.height,0,0,s.width,s.height);var a=document.createElement("img");return a.src=n.toDataURL("image/png"),a},t.mergeAlpha=function(t,e,i){i||(i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),i.width=Math.max(e.width,t.width),i.height=Math.max(e.height,t.height);var r=i.getContext("2d");return r.save(),r.drawImage(t,0,0),r.globalCompositeOperation="destination-in",r.drawImage(e,0,0),r.restore(),i},t._flip=function(e,i,r,s){for(var n=e._images,a=t._workingCanvas,o=t._workingContext,h=n.length/i,l=0;h>l;l++){var u=n[l];u.__tmp=l,o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,a.width+1,a.height+1),a.width=u.width,a.height=u.height,o.setTransform(r?-1:1,0,0,s?-1:1,r?u.width:0,s?u.height:0),o.drawImage(u,0,0);var c=document.createElement("img");c.src=a.toDataURL("image/png"),c.width=u.width,c.height=u.height,n.push(c)}var d=e._frames,p=d.length/i;for(l=0;p>l;l++){u=d[l];var f=u.rect.clone();c=n[u.image.__tmp+h*i];var m={image:c,rect:f,regX:u.regX,regY:u.regY};r&&(f.x=c.width-f.x-f.width,m.regX=f.width-u.regX),s&&(f.y=c.height-f.y-f.height,m.regY=f.height-u.regY),d.push(m)}var g="_"+(r?"h":"")+(s?"v":""),v=e._animations,_=e._data,y=v.length/i;for(l=0;y>l;l++){var x=v[l];u=_[x];var w={name:x+g,speed:u.speed,next:u.next,frames:[]};u.next&&(w.next+=g),d=u.frames;for(var b=0,S=d.length;S>b;b++)w.frames.push(d[b]+p*i);_[w.name]=w,v.push(w.name)}},createjs.SpriteSheetUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this.initialize()},e=t.prototype=new createjs.EventDispatcher;t.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",t.ERR_RUNNING="a build is already running",e.maxWidth=2048,e.maxHeight=2048,e.spriteSheet=null,e.scale=1,e.padding=1,e.timeSlice=.3,e.progress=-1,e._frames=null,e._animations=null,e._data=null,e._nextFrameIndex=0,e._index=0,e._timerID=null,e._scale=1,e.initialize=function(){this._frames=[],this._animations={}},e.addFrame=function(e,i,r,s,n,a){if(this._data)throw t.ERR_RUNNING;var o=i||e.bounds||e.nominalBounds;return!o&&e.getBounds&&(o=e.getBounds()),o?(r=r||1,this._frames.push({source:e,sourceRect:o,scale:r,funct:s,params:n,scope:a,index:this._frames.length,height:o.height*r})-1):null},e.addAnimation=function(e,i,r,s){if(this._data)throw t.ERR_RUNNING;this._animations[e]={frames:i,next:r,frequency:s}},e.addMovieClip=function(e,i,r){if(this._data)throw t.ERR_RUNNING;var s=e.frameBounds,n=i||e.bounds||e.nominalBounds;if(!n&&e.getBounds&&(n=e.getBounds()),!n&&!s)return null;for(var a=this._frames.length,o=e.timeline.duration,h=0;o>h;h++){var l=s&&s[h]?s[h]:n;this.addFrame(e,l,r,function(t){var e=this.actionsEnabled;this.actionsEnabled=!1,this.gotoAndStop(t),this.actionsEnabled=e},[h],e)}var u=e.timeline._labels,c=[];for(var d in u)c.push({index:u[d],label:d});if(c.length){c.sort(function(t,e){return t.index-e.index});for(var h=0,p=c.length;p>h;h++){for(var f=c[h].label,m=a+c[h].index,g=a+(h==p-1?o:c[h+1].index),v=[],_=m;g>_;_++)v.push(_);this.addAnimation(f,v,!0)}}},e.build=function(){if(this._data)throw t.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},e.buildAsync=function(e){if(this._data)throw t.ERR_RUNNING;this.timeSlice=e,this._startBuild();var i=this;this._timerID=setTimeout(function(){i._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},e.stopAsync=function(){clearTimeout(this._timerID),this._data=null},e.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},e.toString=function(){return"[SpriteSheetBuilder]"},e._startBuild=function(){var e=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var i=[];this._data={images:[],frames:i,animations:this._animations};var r=this._frames.slice();if(r.sort(function(t,e){return t.height<=e.height?-1:1}),r[r.length-1].height+2*e>this.maxHeight)throw t.ERR_DIMENSIONS;for(var s=0,n=0,a=0;r.length;){var o=this._fillRow(r,s,a,i,e);if(o.w>n&&(n=o.w),s+=o.h,!o.h||!r.length){var h=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");h.width=this._getSize(n,this.maxWidth),h.height=this._getSize(s,this.maxHeight),this._data.images[a]=h,o.h||(n=s=0,a++)}}},e._getSize=function(t,e){for(var i=4;Math.pow(2,++i)<t;);return Math.min(e,Math.pow(2,i))},e._fillRow=function(e,i,r,s,n){var a=this.maxWidth,o=this.maxHeight;i+=n;for(var h=o-i,l=n,u=0,c=e.length-1;c>=0;c--){var d=e[c],p=this._scale*d.scale,f=d.sourceRect,m=d.source,g=Math.floor(p*f.x-n),v=Math.floor(p*f.y-n),_=Math.ceil(p*f.height+2*n),y=Math.ceil(p*f.width+2*n);if(y>a)throw t.ERR_DIMENSIONS;_>h||l+y>a||(d.img=r,d.rect=new createjs.Rectangle(l,i,y,_),u=u||_,e.splice(c,1),s[d.index]=[l,i,y,_,r,Math.round(-g+p*m.regX-n),Math.round(-v+p*m.regY-n)],l+=y)}return{w:l,h:u}},e._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},e._run=function(){for(var t=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),e=(new Date).getTime()+t,i=!1;e>(new Date).getTime();)if(!this._drawNext()){i=!0;break}if(i)this._endBuild();else{var r=this;this._timerID=setTimeout(function(){r._run()},50-t)}var s=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var n=new createjs.Event("progress");n.progress=s,this.dispatchEvent(n)}},e._drawNext=function(){var t=this._frames[this._index],e=t.scale*this._scale,i=t.rect,r=t.sourceRect,s=this._data.images[t.img],n=s.getContext("2d");return t.funct&&t.funct.apply(t.scope,t.params),n.save(),n.beginPath(),n.rect(i.x,i.y,i.width,i.height),n.clip(),n.translate(Math.ceil(i.x-r.x*e),Math.ceil(i.y-r.y*e)),n.scale(e,e),t.source.draw(n),n.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.initialize(t)},e=t.prototype=new createjs.DisplayObject;e.htmlElement=null,e._oldMtx=null,e._visible=!1,e.DisplayObject_initialize=e.initialize,e.initialize=function(t){"string"==typeof t&&(t=document.getElementById(t)),this.DisplayObject_initialize(),this.mouseEnabled=!1,this.htmlElement=t;var e=t.style;e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%"},e.isVisible=function(){return null!=this.htmlElement},e.draw=function(){return this.visible&&(this._visible=!0),!0},e.cache=function(){},e.uncache=function(){},e.updateCache=function(){},e.hitTest=function(){},e.localToGlobal=function(){},e.globalToLocal=function(){},e.localToLocal=function(){},e.clone=function(){throw"DOMElement cannot be cloned."},e.toString=function(){return"[DOMElement (name="+this.name+")]"},e.DisplayObject__tick=e._tick,e._tick=function(t){var e=this.getStage();this._visible=!1,e&&e.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(t)},e._handleDrawEnd=function(){var t=this.htmlElement;if(t){var e=t.style,i=this._visible?"visible":"hidden";if(i!=e.visibility&&(e.visibility=i),this._visible){var r=this.getConcatenatedMatrix(this._matrix),s=this._oldMtx,n=1e4;if(s&&s.alpha==r.alpha||(e.opacity=""+(0|r.alpha*n)/n,s&&(s.alpha=r.alpha)),!s||s.tx!=r.tx||s.ty!=r.ty||s.a!=r.a||s.b!=r.b||s.c!=r.c||s.d!=r.d){var a="matrix("+(0|r.a*n)/n+","+(0|r.b*n)/n+","+(0|r.c*n)/n+","+(0|r.d*n)/n+","+(0|r.tx+.5);e.transform=e.WebkitTransform=e.OTransform=e.msTransform=a+","+(0|r.ty+.5)+")",e.MozTransform=a+"px,"+(0|r.ty+.5)+"px)",this._oldMtx=s?s.copy(r):r.clone()}}}},createjs.DOMElement=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this.initialize()},e=t.prototype;e.initialize=function(){},e.getBounds=function(){return null},e.applyFilter=function(){},e.toString=function(){return"[Filter]"},e.clone=function(){return new t},createjs.Filter=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i){this.initialize(t,e,i)},e=t.prototype=new createjs.Filter;e.initialize=function(t,e,i){(isNaN(t)||0>t)&&(t=0),this.blurX=0|t,(isNaN(e)||0>e)&&(e=0),this.blurY=0|e,(isNaN(i)||1>i)&&(i=1),this.quality=0|i},e.blurX=0,e.blurY=0,e.quality=1,e.mul_table=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],e.shg_table=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],e.getBounds=function(){var t=.5*Math.pow(this.quality,.6);return new createjs.Rectangle(-this.blurX*t,-this.blurY*t,2*this.blurX*t,2*this.blurY*t)},e.applyFilter=function(t,e,i,r,s,n,a,o){n=n||t,null==a&&(a=e),null==o&&(o=i);try{var h=t.getImageData(e,i,r,s)}catch(l){return!1}var u=this.blurX/2;if(isNaN(u)||0>u)return!1;u|=0;var c=this.blurY/2;if(isNaN(c)||0>c)return!1;if(c|=0,0==u&&0==c)return!1;var d=this.quality;(isNaN(d)||1>d)&&(d=1),d|=0,d>3&&(d=3),1>d&&(d=1);var e,i,p,f,m,g,v,_,y,x,w,b,S,T,E,C=h.data,P=u+u+1,M=c+c+1,A=r-1,R=s-1,I=u+1,L=c+1,D={r:0,b:0,g:0,a:0,next:null},O=D;for(p=1;P>p;p++)O=O.next={r:0,b:0,g:0,a:0,next:null};O.next=D;var F={r:0,b:0,g:0,a:0,next:null},B=F;for(p=1;M>p;p++)B=B.next={r:0,b:0,g:0,a:0,next:null};B.next=F;for(var j=null;d-->0;){v=g=0;var N=this.mul_table[u],k=this.shg_table[u];for(i=s;--i>-1;){for(_=I*(b=C[g]),y=I*(S=C[g+1]),x=I*(T=C[g+2]),w=I*(E=C[g+3]),O=D,p=I;--p>-1;)O.r=b,O.g=S,O.b=T,O.a=E,O=O.next;for(p=1;I>p;p++)f=g+((p>A?A:p)<<2),_+=O.r=C[f],y+=O.g=C[f+1],x+=O.b=C[f+2],w+=O.a=C[f+3],O=O.next;for(j=D,e=0;r>e;e++)C[g++]=_*N>>>k,C[g++]=y*N>>>k,C[g++]=x*N>>>k,C[g++]=w*N>>>k,f=v+((f=e+u+1)<A?f:A)<<2,_-=j.r-(j.r=C[f]),y-=j.g-(j.g=C[f+1]),x-=j.b-(j.b=C[f+2]),w-=j.a-(j.a=C[f+3]),j=j.next;v+=r}for(N=this.mul_table[c],k=this.shg_table[c],e=0;r>e;e++){for(g=e<<2,_=L*(b=C[g]),y=L*(S=C[g+1]),x=L*(T=C[g+2]),w=L*(E=C[g+3]),B=F,p=0;L>p;p++)B.r=b,B.g=S,B.b=T,B.a=E,B=B.next;for(m=r,p=1;c>=p;p++)g=m+e<<2,_+=B.r=C[g],y+=B.g=C[g+1],x+=B.b=C[g+2],w+=B.a=C[g+3],B=B.next,R>p&&(m+=r);if(g=e,j=F,d>0)for(i=0;s>i;i++)f=g<<2,C[f+3]=E=w*N>>>k,E>0?(C[f]=_*N>>>k,C[f+1]=y*N>>>k,C[f+2]=x*N>>>k):C[f]=C[f+1]=C[f+2]=0,f=e+((f=i+L)<R?f:R)*r<<2,_-=j.r-(j.r=C[f]),y-=j.g-(j.g=C[f+1]),x-=j.b-(j.b=C[f+2]),w-=j.a-(j.a=C[f+3]),j=j.next,g+=r;else for(i=0;s>i;i++)f=g<<2,C[f+3]=E=w*N>>>k,E>0?(E=255/E,C[f]=(_*N>>>k)*E,C[f+1]=(y*N>>>k)*E,C[f+2]=(x*N>>>k)*E):C[f]=C[f+1]=C[f+2]=0,f=e+((f=i+L)<R?f:R)*r<<2,_-=j.r-(j.r=C[f]),y-=j.g-(j.g=C[f+1]),x-=j.b-(j.b=C[f+2]),w-=j.a-(j.a=C[f+3]),j=j.next,g+=r}}return n.putImageData(h,a,o),!0},e.clone=function(){return new t(this.blurX,this.blurY,this.quality)},e.toString=function(){return"[BlurFilter]"},createjs.BlurFilter=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.initialize(t)},e=t.prototype=new createjs.Filter;e.initialize=function(t){this.alphaMap=t},e.alphaMap=null,e._alphaMap=null,e._mapData=null,e.applyFilter=function(t,e,i,r,s,n,a,o){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;n=n||t,null==a&&(a=e),null==o&&(o=i);try{var h=t.getImageData(e,i,r,s)}catch(l){return!1}for(var u=h.data,c=this._mapData,d=u.length,p=0;d>p;p+=4)u[p+3]=c[p]||0;return n.putImageData(h,a,o),!0},e.clone=function(){return new t(this.alphaMap)},e.toString=function(){return"[AlphaMapFilter]"},e._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var t,e=this._alphaMap=this.alphaMap,i=e;e instanceof HTMLCanvasElement?t=i.getContext("2d"):(i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),i.width=e.width,i.height=e.height,t=i.getContext("2d"),t.drawImage(e,0,0));try{var r=t.getImageData(0,0,e.width,e.height)}catch(s){return!1}return this._mapData=r.data,!0},createjs.AlphaMapFilter=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.initialize(t)},e=t.prototype=new createjs.Filter;e.initialize=function(t){this.mask=t},e.mask=null,e.applyFilter=function(t,e,i,r,s,n,a,o){return this.mask?(n=n||t,null==a&&(a=e),null==o&&(o=i),n.save(),n.globalCompositeOperation="destination-in",n.drawImage(this.mask,a,o),n.restore(),!0):!0},e.clone=function(){return new t(this.mask)},e.toString=function(){return"[AlphaMaskFilter]"},createjs.AlphaMaskFilter=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,r,s,n,a,o){this.initialize(t,e,i,r,s,n,a,o)},e=t.prototype=new createjs.Filter;e.redMultiplier=1,e.greenMultiplier=1,e.blueMultiplier=1,e.alphaMultiplier=1,e.redOffset=0,e.greenOffset=0,e.blueOffset=0,e.alphaOffset=0,e.initialize=function(t,e,i,r,s,n,a,o){this.redMultiplier=null!=t?t:1,this.greenMultiplier=null!=e?e:1,this.blueMultiplier=null!=i?i:1,this.alphaMultiplier=null!=r?r:1,this.redOffset=s||0,this.greenOffset=n||0,this.blueOffset=a||0,this.alphaOffset=o||0},e.applyFilter=function(t,e,i,r,s,n,a,o){n=n||t,null==a&&(a=e),null==o&&(o=i);try{var h=t.getImageData(e,i,r,s)}catch(l){return!1}for(var u=h.data,c=u.length,d=0;c>d;d+=4)u[d]=u[d]*this.redMultiplier+this.redOffset,u[d+1]=u[d+1]*this.greenMultiplier+this.greenOffset,u[d+2]=u[d+2]*this.blueMultiplier+this.blueOffset,u[d+3]=u[d+3]*this.alphaMultiplier+this.alphaOffset;return n.putImageData(h,a,o),!0},e.toString=function(){return"[ColorFilter]"},e.clone=function(){return new t(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},createjs.ColorFilter=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,r){this.initialize(t,e,i,r)},e=t.prototype;t.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],t.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t.LENGTH=t.IDENTITY_MATRIX.length,e.initialize=function(t,e,i,r){return this.reset(),this.adjustColor(t,e,i,r),this},e.reset=function(){return this.copyMatrix(t.IDENTITY_MATRIX)},e.adjustColor=function(t,e,i,r){return this.adjustHue(r),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},e.adjustBrightness=function(t){return 0==t||isNaN(t)?this:(t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1]),this)},e.adjustContrast=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,100);var i;return 0>e?i=127+127*(e/100):(i=e%1,i=0==i?t.DELTA_INDEX[e]:t.DELTA_INDEX[e<<0]*(1-i)+t.DELTA_INDEX[(e<<0)+1]*i,i=127*i+127),this._multiplyMatrix([i/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1]),this},e.adjustSaturation=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,100);var e=1+(t>0?3*t/100:t/100),i=.3086,r=.6094,s=.082;return this._multiplyMatrix([i*(1-e)+e,r*(1-e),s*(1-e),0,0,i*(1-e),r*(1-e)+e,s*(1-e),0,0,i*(1-e),r*(1-e),s*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.adjustHue=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t),r=.213,s=.715,n=.072;return this._multiplyMatrix([r+e*(1-r)+i*-r,s+e*-s+i*-s,n+e*-n+i*(1-n),0,0,r+e*-r+.143*i,s+e*(1-s)+.14*i,n+e*-n+i*-.283,0,0,r+e*-r+i*-(1-r),s+e*-s+i*s,n+e*(1-n)+i*n,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.concat=function(e){return e=this._fixMatrix(e),e.length!=t.LENGTH?this:(this._multiplyMatrix(e),this)},e.clone=function(){return(new t).copyMatrix(this)},e.toArray=function(){for(var e=[],i=0,r=t.LENGTH;r>i;i++)e[i]=this[i];return e},e.copyMatrix=function(e){for(var i=t.LENGTH,r=0;i>r;r++)this[r]=e[r];return this},e.toString=function(){return"[ColorMatrix]"},e._multiplyMatrix=function(t){for(var e=[],i=0;5>i;i++){for(var r=0;5>r;r++)e[r]=this[r+5*i];for(var r=0;5>r;r++){for(var s=0,n=0;5>n;n++)s+=t[r+5*n]*e[n];this[r+5*i]=s}}},e._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},e._fixMatrix=function(e){return e instanceof t&&(e=e.toArray()),e.length<t.LENGTH?e=e.slice(0,e.length).concat(t.IDENTITY_MATRIX.slice(e.length,t.LENGTH)):e.length>t.LENGTH&&(e=e.slice(0,t.LENGTH)),e},createjs.ColorMatrix=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.initialize(t)},e=t.prototype=new createjs.Filter;e.matrix=null,e.initialize=function(t){this.matrix=t},e.applyFilter=function(t,e,i,r,s,n,a,o){n=n||t,null==a&&(a=e),null==o&&(o=i);
try{var h=t.getImageData(e,i,r,s)}catch(l){return!1}for(var u,c,d,p,f=h.data,m=f.length,g=this.matrix,v=g[0],_=g[1],y=g[2],x=g[3],w=g[4],b=g[5],S=g[6],T=g[7],E=g[8],C=g[9],P=g[10],M=g[11],A=g[12],R=g[13],I=g[14],L=g[15],D=g[16],O=g[17],F=g[18],B=g[19],j=0;m>j;j+=4)u=f[j],c=f[j+1],d=f[j+2],p=f[j+3],f[j]=u*v+c*_+d*y+p*x+w,f[j+1]=u*b+c*S+d*T+p*E+C,f[j+2]=u*P+c*M+d*A+p*R+I,f[j+3]=u*L+c*D+d*O+p*F+B;return n.putImageData(h,a,o),!0},e.toString=function(){return"[ColorMatrixFilter]"},e.clone=function(){return new t(this.matrix)},createjs.ColorMatrixFilter=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){throw"Touch cannot be instantiated"};t.isSupported=function(){return"ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0},t.enable=function(e,i,r){return e&&e.canvas&&t.isSupported()?(e.__touch={pointers:{},multitouch:!i,preventDefault:!r,count:0},"ontouchstart"in window?t._IOS_enable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_enable(e),!0):!1},t.disable=function(e){e&&("ontouchstart"in window?t._IOS_disable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_disable(e))},t._IOS_enable=function(e){var i=e.canvas,r=e.__touch.f=function(i){t._IOS_handleEvent(e,i)};i.addEventListener("touchstart",r,!1),i.addEventListener("touchmove",r,!1),i.addEventListener("touchend",r,!1),i.addEventListener("touchcancel",r,!1)},t._IOS_disable=function(t){var e=t.canvas;if(e){var i=t.__touch.f;e.removeEventListener("touchstart",i,!1),e.removeEventListener("touchmove",i,!1),e.removeEventListener("touchend",i,!1),e.removeEventListener("touchcancel",i,!1)}},t._IOS_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();for(var i=e.changedTouches,r=e.type,s=0,n=i.length;n>s;s++){var a=i[s],o=a.identifier;a.target==t.canvas&&("touchstart"==r?this._handleStart(t,o,e,a.pageX,a.pageY):"touchmove"==r?this._handleMove(t,o,e,a.pageX,a.pageY):("touchend"==r||"touchcancel"==r)&&this._handleEnd(t,o,e))}}},t._IE_enable=function(e){var i=e.canvas,r=e.__touch.f=function(i){t._IE_handleEvent(e,i)};void 0===window.navigator.pointerEnabled?(i.addEventListener("MSPointerDown",r,!1),window.addEventListener("MSPointerMove",r,!1),window.addEventListener("MSPointerUp",r,!1),window.addEventListener("MSPointerCancel",r,!1),e.__touch.preventDefault&&(i.style.msTouchAction="none")):(i.addEventListener("pointerdown",r,!1),window.addEventListener("pointermove",r,!1),window.addEventListener("pointerup",r,!1),window.addEventListener("pointercancel",r,!1),e.__touch.preventDefault&&(i.style.touchAction="none")),e.__touch.activeIDs={}},t._IE_disable=function(t){var e=t.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",e,!1),window.removeEventListener("MSPointerUp",e,!1),window.removeEventListener("MSPointerCancel",e,!1),t.canvas&&t.canvas.removeEventListener("MSPointerDown",e,!1)):(window.removeEventListener("pointermove",e,!1),window.removeEventListener("pointerup",e,!1),window.removeEventListener("pointercancel",e,!1),t.canvas&&t.canvas.removeEventListener("pointerdown",e,!1))},t._IE_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();var i=e.type,r=e.pointerId,s=t.__touch.activeIDs;if("MSPointerDown"==i||"pointerdown"==i){if(e.srcElement!=t.canvas)return;s[r]=!0,this._handleStart(t,r,e,e.pageX,e.pageY)}else s[r]&&("MSPointerMove"==i||"pointermove"==i?this._handleMove(t,r,e,e.pageX,e.pageY):("MSPointerUp"==i||"MSPointerCancel"==i||"pointerup"==i||"pointercancel"==i)&&(delete s[r],this._handleEnd(t,r,e)))}},t._handleStart=function(t,e,i,r,s){var n=t.__touch;if(n.multitouch||!n.count){var a=n.pointers;a[e]||(a[e]=!0,n.count++,t._handlePointerDown(e,i,r,s))}},t._handleMove=function(t,e,i,r,s){t.__touch.pointers[e]&&t._handlePointerMove(e,i,r,s)},t._handleEnd=function(t,e,i){var r=t.__touch,s=r.pointers;s[e]&&(r.count--,t._handlePointerUp(e,i,!0),delete s[e])},createjs.Touch=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.EaselJS=createjs.EaselJS||{};t.version="NEXT",t.buildDate="Thu, 12 Dec 2013 23:37:07 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.PreloadJS=createjs.PreloadJS||{};t.version="NEXT",t.buildDate="Thu, 12 Dec 2013 23:37:07 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this.init()};t.prototype=new createjs.EventDispatcher;var e=t.prototype,i=t;i.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?)|(.{0,2}\/{1}))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,i.PATH_PATTERN=/^(?:(\w+:)\/{2})|(.{0,2}\/{1})?([/.]*?(?:[^?]+)?\/?)?$/,e.loaded=!1,e.canceled=!1,e.progress=0,e._item=null,e.getItem=function(){return this._item},e.init=function(){},e.load=function(){},e.close=function(){},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.Event("progress"),e.loaded=this.progress,e.total=1):(e=t,this.progress=t.loaded/t.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),e.progress=this.progress,this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){this._isCanceled()||this.dispatchEvent("complete")},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.Event("error")),this.dispatchEvent(t))},e._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},e._parseURI=function(t){return t?t.match(i.FILE_PATTERN):null},e._parsePath=function(t){return t?t.match(i.PATH_PATTERN):null},e._formatQueryString=function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var r in t)i.push(r+"="+escape(t[r]));return e&&(i=i.concat(e)),i.join("&")},e.buildPath=function(t,e){if(null==e)return t;var i=[],r=t.indexOf("?");if(-1!=r){var s=t.slice(r+1);i=i.concat(s.split("&"))}return-1!=r?t.slice(0,r)+"?"+this._formatQueryString(e,i):t+"?"+this._formatQueryString(e,i)},e._isCrossDomain=function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");i.href=location.href;var r=""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname);return r},e._isLocal=function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i){this.init(t,e,i)},e=t.prototype=new createjs.AbstractLoader,i=t;i.loadTimeout=8e3,i.LOAD_TIMEOUT=0,i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.SVG="svg",i.TEXT="text",i.XML="xml",i.POST="POST",i.GET="GET",e._basePath=null,e._crossOrigin="",e.useXHR=!0,e.stopOnError=!1,e.maintainScriptOrder=!0,e.next=null,e._typeCallbacks=null,e._extensionCallbacks=null,e._loadStartWasDispatched=!1,e._maxConnections=1,e._currentlyLoadingScript=null,e._currentLoads=null,e._loadQueue=null,e._loadQueueBackup=null,e._loadItemsById=null,e._loadItemsBySrc=null,e._loadedResults=null,e._loadedRawResults=null,e._numItems=0,e._numItemsLoaded=0,e._scriptOrder=null,e._loadedScripts=null,e.init=function(t,e,i){this._numItems=this._numItemsLoaded=0,this._paused=!1,this._loadStartWasDispatched=!1,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._scriptOrder=[],this._loadedScripts=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._typeCallbacks={},this._extensionCallbacks={},this._basePath=e,this.setUseXHR(t),this._crossOrigin=i===!0?"Anonymous":i===!1||null==i?"":i},e.setUseXHR=function(t){return this.useXHR=0!=t&&null!=window.XMLHttpRequest,this.useXHR},e.removeAll=function(){this.remove()},e.remove=function(t){var e=null;if(!t||t instanceof Array){if(t)e=t;else if(arguments.length>0)return}else e=[t];var i=!1;if(e){for(;e.length;){var r=e.pop(),s=this.getResult(r);for(n=this._loadQueue.length-1;n>=0;n--)if(a=this._loadQueue[n].getItem(),a.id==r||a.src==r){this._loadQueue.splice(n,1)[0].cancel();break}for(n=this._loadQueueBackup.length-1;n>=0;n--)if(a=this._loadQueueBackup[n].getItem(),a.id==r||a.src==r){this._loadQueueBackup.splice(n,1)[0].cancel();break}if(s)delete this._loadItemsById[s.id],delete this._loadItemsBySrc[s.src],this._disposeItem(s);else for(var n=this._currentLoads.length-1;n>=0;n--){var a=this._currentLoads[n].getItem();if(a.id==r||a.src==r){this._currentLoads.splice(n,1)[0].cancel(),i=!0;break}}}i&&this._loadNext()}else{this.close();for(var o in this._loadItemsById)this._disposeItem(this._loadItemsById[o]);this.init(this.useXHR)}},e.reset=function(){this.close();for(var t in this._loadItemsById)this._disposeItem(this._loadItemsById[t]);for(var e=[],i=0,r=this._loadQueueBackup.length;r>i;i++)e.push(this._loadQueueBackup[i].getItem());this.loadManifest(e,!1)},i.isBinary=function(t){switch(t){case createjs.LoadQueue.IMAGE:case createjs.LoadQueue.BINARY:return!0;default:return!1}},i.isText=function(t){switch(t){case createjs.LoadQueue.TEXT:case createjs.LoadQueue.JSON:case createjs.LoadQueue.MANIFEST:case createjs.LoadQueue.XML:case createjs.LoadQueue.HTML:case createjs.LoadQueue.CSS:case createjs.LoadQueue.SVG:case createjs.LoadQueue.JAVASCRIPT:return!0;default:return!1}},e.installPlugin=function(t){if(null!=t&&null!=t.getPreloadHandlers){var e=t.getPreloadHandlers();if(e.scope=t,null!=e.types)for(var i=0,r=e.types.length;r>i;i++)this._typeCallbacks[e.types[i]]=e;if(null!=e.extensions)for(i=0,r=e.extensions.length;r>i;i++)this._extensionCallbacks[e.extensions[i]]=e}},e.setMaxConnections=function(t){this._maxConnections=t,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(t,e,i){if(null==t){var r=new createjs.Event("error");return r.text="PRELOAD_NO_FILE",void this._sendError(r)}this._addItem(t,null,i),this.setPaused(e!==!1?!1:!0)},e.loadManifest=function(t,e,r){var s=null,n=null;if(t instanceof Array){if(0==t.length){var a=new createjs.Event("error");return a.text="PRELOAD_MANIFEST_EMPTY",void this._sendError(a)}s=t}else if("string"==typeof t)s=[{src:t,type:i.MANIFEST}];else{if("object"!=typeof t){var a=new createjs.Event("error");return a.text="PRELOAD_MANIFEST_NULL",void this._sendError(a)}if(void 0!==t.src){if(null==t.type)t.type=i.MANIFEST;else if(t.type!=i.MANIFEST){var a=new createjs.Event("error");a.text="PRELOAD_MANIFEST_ERROR",this._sendError(a)}s=[t]}else void 0!==t.manifest&&(s=t.manifest,n=t.path)}for(var o=0,h=s.length;h>o;o++)this._addItem(s[o],n,r);this.setPaused(e!==!1?!1:!0)},e.load=function(){this.setPaused(!1)},e.getItem=function(t){return this._loadItemsById[t]||this._loadItemsBySrc[t]},e.getResult=function(t,e){var i=this._loadItemsById[t]||this._loadItemsBySrc[t];if(null==i)return null;var r=i.id;return e&&this._loadedRawResults[r]?this._loadedRawResults[r]:this._loadedResults[r]},e.setPaused=function(t){this._paused=t,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1},e._addItem=function(t,e,i){var r=this._createLoadItem(t,e,i);if(null!=r){var s=this._createLoader(r);null!=s&&(this._loadQueue.push(s),this._loadQueueBackup.push(s),this._numItems++,this._updateProgress(),this.maintainScriptOrder&&r.type==createjs.LoadQueue.JAVASCRIPT&&s instanceof createjs.XHRLoader&&(this._scriptOrder.push(r),this._loadedScripts.push(null)))}},e._createLoadItem=function(t,e,i){var r=null;switch(typeof t){case"string":r={src:t};break;case"object":r=window.HTMLAudioElement&&t instanceof window.HTMLAudioElement?{tag:t,src:r.tag.src,type:createjs.LoadQueue.SOUND}:t;break;default:return null}var s=this._parseURI(r.src);null!=s&&(r.ext=s[6]),null==r.type&&(r.type=this._getTypeByExtension(r.ext));var n="",a=i||this._basePath,o=r.src;if(s&&null==s[1]&&null==s[3])if(e){n=e;var h=this._parsePath(e);o=e+o,null!=a&&h&&null==h[1]&&null==h[2]&&(n=a+n)}else null!=a&&(n=a);if(r.src=n+r.src,r.path=n,(r.type==createjs.LoadQueue.JSON||r.type==createjs.LoadQueue.MANIFEST)&&(r._loadAsJSONP=null!=r.callback),r.type==createjs.LoadQueue.JSONP&&null==r.callback)throw new Error("callback is required for loading JSONP requests.");(void 0===r.tag||null===r.tag)&&(r.tag=this._createTag(r)),(void 0===r.id||null===r.id||""===r.id)&&(r.id=o);var l=this._typeCallbacks[r.type]||this._extensionCallbacks[r.ext];if(l){var u=l.callback.call(l.scope,r.src,r.type,r.id,r.data,n,this);if(u===!1)return null;u===!0||(null!=u.src&&(r.src=u.src),null!=u.id&&(r.id=u.id),null!=u.tag&&(r.tag=u.tag),null!=u.completeHandler&&(r.completeHandler=u.completeHandler),u.type&&(r.type=u.type),s=this._parseURI(r.src),null!=s&&null!=s[6]&&(r.ext=s[6].toLowerCase()))}return this._loadItemsById[r.id]=r,this._loadItemsBySrc[r.src]=r,r},e._createLoader=function(t){var e=this.useXHR;switch(t.type){case createjs.LoadQueue.JSON:case createjs.LoadQueue.MANIFEST:e=!t._loadAsJSONP;break;case createjs.LoadQueue.XML:case createjs.LoadQueue.TEXT:e=!0;break;case createjs.LoadQueue.SOUND:case createjs.LoadQueue.JSONP:e=!1;break;case null:return null}return e?new createjs.XHRLoader(t,this._crossOrigin):new createjs.TagLoader(t)},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var t=0;t<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);t++){var e=this._loadQueue[t];if(this.maintainScriptOrder&&e instanceof createjs.TagLoader&&e.getItem().type==createjs.LoadQueue.JAVASCRIPT){if(this._currentlyLoadingScript)continue;this._currentlyLoadingScript=!0}this._loadQueue.splice(t,1),t--,this._loadItem(e)}}},e._loadItem=function(t){t.on("progress",this._handleProgress,this),t.on("complete",this._handleFileComplete,this),t.on("error",this._handleFileError,this),this._currentLoads.push(t),this._sendFileStart(t.getItem()),t.load()},e._handleFileError=function(t){var e=t.target;this._numItemsLoaded++,this._updateProgress();var i=new createjs.Event("error");i.text="FILE_LOAD_ERROR",i.item=e.getItem(),this._sendError(i),this.stopOnError||(this._removeLoadItem(e),this._loadNext())},e._handleFileComplete=function(t){var e=t.target,i=e.getItem();if(this._loadedResults[i.id]=e.getResult(),e instanceof createjs.XHRLoader&&(this._loadedRawResults[i.id]=e.getResult(!0)),this._removeLoadItem(e),this.maintainScriptOrder&&i.type==createjs.LoadQueue.JAVASCRIPT){if(!(e instanceof createjs.TagLoader))return this._loadedScripts[createjs.indexOf(this._scriptOrder,i)]=i,void this._checkScriptLoadOrder(e);this._currentlyLoadingScript=!1}if(delete i._loadAsJSONP,i.type==createjs.LoadQueue.MANIFEST){var r=e.getResult();null!=r&&void 0!==r.manifest&&this.loadManifest(r,!0)}this._processFinishedLoad(i,e)},e._processFinishedLoad=function(t,e){this._numItemsLoaded++,this._updateProgress(),this._sendFileComplete(t,e),this._loadNext()},e._checkScriptLoadOrder=function(){for(var t=this._loadedScripts.length,e=0;t>e;e++){var i=this._loadedScripts[e];if(null===i)break;if(i!==!0){var r=this._loadedResults[i.id];(document.body||document.getElementsByTagName("body")[0]).appendChild(r),this._processFinishedLoad(i),this._loadedScripts[e]=!0}}},e._removeLoadItem=function(t){for(var e=this._currentLoads.length,i=0;e>i;i++)if(this._currentLoads[i]==t){this._currentLoads.splice(i,1);break}},e._handleProgress=function(t){var e=t.target;this._sendFileProgress(e.getItem(),e.progress),this._updateProgress()},e._updateProgress=function(){var t=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(e>0){for(var i=0,r=0,s=this._currentLoads.length;s>r;r++)i+=this._currentLoads[r].progress;t+=i/e*(e/this._numItems)}this._sendProgress(t)},e._disposeItem=function(t){delete this._loadedResults[t.id],delete this._loadedRawResults[t.id],delete this._loadItemsById[t.id],delete this._loadItemsBySrc[t.src]},e._createTag=function(t){var e=null;switch(t.type){case createjs.LoadQueue.IMAGE:return e=document.createElement("img"),""==this._crossOrigin||this._isLocal(t)||(e.crossOrigin=this._crossOrigin),e;case createjs.LoadQueue.SOUND:return e=document.createElement("audio"),e.autoplay=!1,e;case createjs.LoadQueue.JSON:case createjs.LoadQueue.JSONP:case createjs.LoadQueue.JAVASCRIPT:case createjs.LoadQueue.MANIFEST:return e=document.createElement("script"),e.type="text/javascript",e;case createjs.LoadQueue.CSS:return e=document.createElement(this.useXHR?"style":"link"),e.rel="stylesheet",e.type="text/css",e;case createjs.LoadQueue.SVG:return this.useXHR?e=document.createElement("svg"):(e=document.createElement("object"),e.type="image/svg+xml"),e}return null},e._getTypeByExtension=function(t){if(null==t)return createjs.LoadQueue.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.LoadQueue.IMAGE;case"ogg":case"mp3":case"wav":return createjs.LoadQueue.SOUND;case"json":return createjs.LoadQueue.JSON;case"xml":return createjs.LoadQueue.XML;case"css":return createjs.LoadQueue.CSS;case"js":return createjs.LoadQueue.JAVASCRIPT;case"svg":return createjs.LoadQueue.SVG;default:return createjs.LoadQueue.TEXT}},e._sendFileProgress=function(t,e){if(this._isCanceled())return void this._cleanUp();if(this.hasEventListener("fileprogress")){var i=new createjs.Event("fileprogress");i.progress=e,i.loaded=e,i.total=1,i.item=t,this.dispatchEvent(i)}},e._sendFileComplete=function(t,e){if(!this._isCanceled()){var i=new createjs.Event("fileload");i.loader=e,i.item=t,i.result=this._loadedResults[t.id],i.rawResult=this._loadedRawResults[t.id],t.completeHandler&&t.completeHandler(i),this.hasEventListener("fileload")&&this.dispatchEvent(i)}},e._sendFileStart=function(t){var e=new createjs.Event("filestart");e.item=t,this.hasEventListener("filestart")&&this.dispatchEvent(e)},e.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=t;var r=function(){};r.init=function(){var t=navigator.userAgent;r.isFirefox=t.indexOf("Firefox")>-1,r.isOpera=null!=window.opera,r.isChrome=t.indexOf("Chrome")>-1,r.isIOS=t.indexOf("iPod")>-1||t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1},r.init(),createjs.LoadQueue.BrowserDetect=r}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.init(t)},e=t.prototype=new createjs.AbstractLoader;e._loadTimeout=null,e._tagCompleteProxy=null,e._isAudio=!1,e._tag=null,e._jsonResult=null,e.init=function(t){this._item=t,this._tag=t.tag,this._isAudio=window.HTMLAudioElement&&t.tag instanceof window.HTMLAudioElement,this._tagCompleteProxy=createjs.proxy(this._handleLoad,this)},e.getResult=function(){return this._item.type==createjs.LoadQueue.JSONP||this._item.type==createjs.LoadQueue.MANIFEST?this._jsonResult:this._tag},e.cancel=function(){this.canceled=!0,this._clean()},e.load=function(){var t=this._item,e=this._tag;clearTimeout(this._loadTimeout);var i=createjs.LoadQueue.LOAD_TIMEOUT;0==i&&(i=createjs.LoadQueue.loadTimeout),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),i),this._isAudio&&(e.src=null,e.preload="auto"),e.onerror=createjs.proxy(this._handleError,this),this._isAudio?(e.onstalled=createjs.proxy(this._handleStalled,this),e.addEventListener("canplaythrough",this._tagCompleteProxy,!1)):(e.onload=createjs.proxy(this._handleLoad,this),e.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this));var r=this.buildPath(t.src,t.values);switch(t.type){case createjs.LoadQueue.CSS:e.href=r;break;case createjs.LoadQueue.SVG:e.data=r;break;default:e.src=r}if(t.type==createjs.LoadQueue.JSONP||t.type==createjs.LoadQueue.JSON||t.type==createjs.LoadQueue.MANIFEST){if(null==t.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[t.callback])throw new Error('JSONP callback "'+t.callback+'" already exists on window. You need to specify a different callback. Or re-name the current one.');window[t.callback]=createjs.proxy(this._handleJSONPLoad,this)}(t.type==createjs.LoadQueue.SVG||t.type==createjs.LoadQueue.JSONP||t.type==createjs.LoadQueue.JSON||t.type==createjs.LoadQueue.MANIFEST||t.type==createjs.LoadQueue.JAVASCRIPT||t.type==createjs.LoadQueue.CSS)&&(this._startTagVisibility=e.style.visibility,e.style.visibility="hidden",(document.body||document.getElementsByTagName("body")[0]).appendChild(e)),null!=e.load&&e.load()},e._handleJSONPLoad=function(t){this._jsonResult=t},e._handleTimeout=function(){this._clean();var t=new createjs.Event("error");t.text="PRELOAD_TIMEOUT",this._sendError(t)},e._handleStalled=function(){},e._handleError=function(){this._clean();var t=new createjs.Event("error");this._sendError(t)},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this.getItem().tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleLoad()},e._handleLoad=function(){if(!this._isCanceled()){var t=this.getItem(),e=t.tag;if(!(this.loaded||this._isAudio&&4!==e.readyState)){switch(this.loaded=!0,t.type){case createjs.LoadQueue.SVG:case createjs.LoadQueue.JSON:case createjs.LoadQueue.JSONP:case createjs.LoadQueue.MANIFEST:case createjs.LoadQueue.CSS:e.style.visibility=this._startTagVisibility,(document.body||document.getElementsByTagName("body")[0]).removeChild(e)}this._clean(),this._sendComplete()}}},e._clean=function(){clearTimeout(this._loadTimeout);var t=this.getItem(),e=t.tag;null!=e&&(e.onload=null,e.removeEventListener&&e.removeEventListener("canplaythrough",this._tagCompleteProxy,!1),e.onstalled=null,e.onprogress=null,e.onerror=null,null!=e.parentNode&&t.type==createjs.LoadQueue.SVG&&t.type==createjs.LoadQueue.JSON&&t.type==createjs.LoadQueue.MANIFEST&&t.type==createjs.LoadQueue.CSS&&t.type==createjs.LoadQueue.JSONP&&e.parentNode.removeChild(e));var t=this.getItem();(t.type==createjs.LoadQueue.JSONP||t.type==createjs.LoadQueue.MANIFEST)&&(window[t.callback]=null)},e.toString=function(){return"[PreloadJS TagLoader]"},createjs.TagLoader=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e){this.init(t,e)},e=t.prototype=new createjs.AbstractLoader;e._request=null,e._loadTimeout=null,e._xhrLevel=1,e._response=null,e._rawResponse=null,e._crossOrigin="",e.init=function(t,e){this._item=t,this._crossOrigin=e,!this._createXHR(t)},e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null==this._request)return void this._handleError();if(this._request.onloadstart=createjs.proxy(this._handleLoadStart,this),this._request.onprogress=createjs.proxy(this._handleProgress,this),this._request.onabort=createjs.proxy(this._handleAbort,this),this._request.onerror=createjs.proxy(this._handleError,this),this._request.ontimeout=createjs.proxy(this._handleTimeout,this),1==this._xhrLevel){var t=createjs.LoadQueue.LOAD_TIMEOUT;if(0==t)t=createjs.LoadQueue.loadTimeout;else try{console.warn("LoadQueue.LOAD_TIMEOUT has been deprecated in favor of LoadQueue.loadTimeout")}catch(e){}this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),t)}this._request.onload=createjs.proxy(this._handleLoad,this),this._request.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);try{this._item.values&&this._item.method!=createjs.LoadQueue.GET?this._item.method==createjs.LoadQueue.POST&&this._request.send(this._formatQueryString(this._item.values)):this._request.send()}catch(i){var r=new createjs.Event("error");r.error=i,this._sendError(r)}},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.Event("progress");e.loaded=t.loaded,e.total=t.total,this._sendProgress(e)}},e._handleLoadStart=function(){clearTimeout(this._loadTimeout),this._sendLoadStart()},e._handleAbort=function(){this._clean();var t=new createjs.Event("error");t.text="XHR_ABORTED",this._sendError(t)},e._handleError=function(){this._clean();var t=new createjs.Event("error");this._sendError(t)},e._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(){if(!this.loaded){if(this.loaded=!0,!this._checkError())return void this._handleError();this._response=this._getResponse(),this._clean();var t=this._generateTag();t&&this._sendComplete()}},e._handleTimeout=function(t){this._clean();var e=new createjs.Event("error");e.text="PRELOAD_TIMEOUT",this._sendError(t)},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return!1}return!0},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=this._isCrossDomain(t),i=null;if(e&&window.XDomainRequest)i=new XDomainRequest;else if(window.XMLHttpRequest)i=new XMLHttpRequest;else try{i=new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(r){try{i=new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(r){try{i=new ActiveXObject("Msxml2.XMLHTTP")}catch(r){return!1}}}createjs.LoadQueue.isText(t.type)&&i.overrideMimeType&&i.overrideMimeType("text/plain; charset=utf-8"),this._xhrLevel="string"==typeof i.responseType?2:1;var s=null;return s=t.method==createjs.LoadQueue.GET?this.buildPath(t.src,t.values):t.src,i.open(t.method||createjs.LoadQueue.GET,s,!0),e&&i instanceof XMLHttpRequest&&1==this._xhrLevel&&i.setRequestHeader("Origin",location.origin),t.values&&t.method==createjs.LoadQueue.POST&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),createjs.LoadQueue.isBinary(t.type)&&(i.responseType="arraybuffer"),this._request=i,!0},e._clean=function(){clearTimeout(this._loadTimeout);var t=this._request;t.onloadstart=null,t.onprogress=null,t.onabort=null,t.onerror=null,t.onload=null,t.ontimeout=null,t.onloadend=null,t.onreadystatechange=null},e._generateTag=function(){var t=this._item.type,e=this._item.tag;switch(t){case createjs.LoadQueue.IMAGE:return e.onload=createjs.proxy(this._handleTagReady,this),""!=this._crossOrigin&&(e.crossOrigin="Anonymous"),e.src=this.buildPath(this._item.src,this._item.values),this._rawResponse=this._response,this._response=e,!1;case createjs.LoadQueue.JAVASCRIPT:return e=document.createElement("script"),e.text=this._response,this._rawResponse=this._response,this._response=e,!0;case createjs.LoadQueue.CSS:var i=document.getElementsByTagName("head")[0];if(i.appendChild(e),e.styleSheet)e.styleSheet.cssText=this._response;else{var r=document.createTextNode(this._response);e.appendChild(r)}return this._rawResponse=this._response,this._response=e,!0;case createjs.LoadQueue.XML:var s=this._parseXML(this._response,"text/xml");return this._rawResponse=this._response,this._response=s,!0;case createjs.LoadQueue.SVG:var s=this._parseXML(this._response,"image/svg+xml");return this._rawResponse=this._response,null!=s.documentElement?(e.appendChild(s.documentElement),this._response=e):this._response=s,!0;case createjs.LoadQueue.JSON:case createjs.LoadQueue.MANIFEST:var n={};try{n=JSON.parse(this._response)}catch(a){n=a}return this._rawResponse=this._response,this._response=n,!0}return!0},e._parseXML=function(t,e){var i=null;try{if(window.DOMParser){var r=new DOMParser;i=r.parseFromString(t,e)}else i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(t)}catch(s){}return i},e._handleTagReady=function(){this._sendComplete()},e.toString=function(){return"[PreloadJS XHRLoader]"},createjs.XHRLoader=t}(),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,r,s,n,a,o=gap,h=e[t];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(t)),"function"==typeof rep&&(h=rep.call(e,t,h)),typeof h){case"string":return quote(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(h)){for(n=h.length,i=0;n>i;i+=1)a[i]=str(i,h)||"null";return s=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,s}if(rep&&"object"==typeof rep)for(n=rep.length,i=0;n>i;i+=1)"string"==typeof rep[i]&&(r=rep[i],s=str(r,h),s&&a.push(quote(r)+(gap?": ":":")+s));else for(r in h)Object.prototype.hasOwnProperty.call(h,r)&&(s=str(r,h),s&&a.push(quote(r)+(gap?": ":":")+s));return s=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var r;if(gap="",indent="","number"==typeof i)for(r=0;i>r;r+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,r,s=t[e];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r=walk(s,i),void 0!==r?s[i]=r:delete s[i]);return reviver.call(t,e,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),this.createjs=this.createjs||{},function(){var t=createjs.SoundJS=createjs.SoundJS||{};t.version="NEXT",t.buildDate="Thu, 12 Dec 2013 23:37:06 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Sound cannot be instantiated"}function e(t,e){this.init(t,e)}function i(){this.isDefault=!0,this.addEventListener=this.removeEventListener=this.removeAllEventListeners=this.dispatchEvent=this.hasEventListener=this._listeners=this._interrupt=this._playFailed=this.pause=this.resume=this.play=this._beginPlaying=this._cleanUp=this.stop=this.setMasterVolume=this.setVolume=this.mute=this.setMute=this.getMute=this.setPan=this.getPosition=this.setPosition=this.playFailed=function(){return!1
},this.getVolume=this.getPan=this.getDuration=function(){return 0},this.playState=t.PLAY_FAILED,this.toString=function(){return"[Sound Default Sound Instance]"}}function r(){}var s=t;s.DELIMITER="|",s.INTERRUPT_ANY="any",s.INTERRUPT_EARLY="early",s.INTERRUPT_LATE="late",s.INTERRUPT_NONE="none",s.PLAY_INITED="playInited",s.PLAY_SUCCEEDED="playSucceeded",s.PLAY_INTERRUPTED="playInterrupted",s.PLAY_FINISHED="playFinished",s.PLAY_FAILED="playFailed",s.SUPPORTED_EXTENSIONS=["mp3","ogg","mpeg","wav","m4a","mp4","aiff","wma","mid"],s.EXTENSION_MAP={m4a:"mp4"},s.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,s.defaultInterruptBehavior=s.INTERRUPT_NONE,s.alternateExtensions=[],s._lastID=0,s.activePlugin=null,s._pluginsRegistered=!1,s._masterVolume=1,s._masterMute=!1,s._instances=[],s._idHash={},s._preloadHash={},s._defaultSoundInstance=null,s.addEventListener=null,s.removeEventListener=null,s.removeAllEventListeners=null,s.dispatchEvent=null,s.hasEventListener=null,s._listeners=null,createjs.EventDispatcher.initialize(s),s._sendFileLoadEvent=function(t){if(s._preloadHash[t])for(var e=0,i=s._preloadHash[t].length;i>e;e++){var r=s._preloadHash[t][e];if(s._preloadHash[t][e]=!0,s.hasEventListener("fileload")){var n=new createjs.Event("fileload");n.src=r.src,n.id=r.id,n.data=r.data,s.dispatchEvent(n)}}},s.getPreloadHandlers=function(){return{callback:createjs.proxy(s.initLoad,s),types:["sound"],extensions:s.SUPPORTED_EXTENSIONS}},s.registerPlugin=function(t){try{console.log("createjs.Sound.registerPlugin has been deprecated. Please use registerPlugins.")}catch(e){}return s._registerPlugin(t)},s._registerPlugin=function(t){return s._pluginsRegistered=!0,null==t?!1:t.isSupported()?(s.activePlugin=new t,!0):!1},s.registerPlugins=function(t){for(var e=0,i=t.length;i>e;e++){var r=t[e];if(s._registerPlugin(r))return!0}return!1},s.initializeDefaultPlugins=function(){return null!=s.activePlugin?!0:s._pluginsRegistered?!1:s.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1},s.isReady=function(){return null!=s.activePlugin},s.getCapabilities=function(){return null==s.activePlugin?null:s.activePlugin._capabilities},s.getCapability=function(t){return null==s.activePlugin?null:s.activePlugin._capabilities[t]},s.initLoad=function(t,e,i,r,n){t=t.replace(n,"");var a=s.registerSound(t,i,r,!1,n);return null==a?!1:a},s.registerSound=function(t,i,r,n,a){if(!s.initializeDefaultPlugins())return!1;if(t instanceof Object&&(a=i,i=t.id,r=t.data,t=t.src),s.alternateExtensions.length)var o=s._parsePath2(t,"sound",i,r);else var o=s._parsePath(t,"sound",i,r);if(null==o)return!1;null!=a&&(t=a+t,o.src=a+o.src),null!=i&&(s._idHash[i]=o.src);var h=null;null!=r&&(isNaN(r.channels)?isNaN(r)||(h=parseInt(r)):h=parseInt(r.channels));var l=s.activePlugin.register(o.src,h);if(null!=l&&(null!=l.numChannels&&(h=l.numChannels),e.create(o.src,h),null!=r&&isNaN(r)?r.channels=o.data.channels=h||e.maxPerChannel():r=o.data=h||e.maxPerChannel(),null!=l.tag?o.tag=l.tag:l.src&&(o.src=l.src),null!=l.completeHandler&&(o.completeHandler=l.completeHandler),l.type&&(o.type=l.type)),0!=n)if(s._preloadHash[o.src]||(s._preloadHash[o.src]=[]),s._preloadHash[o.src].push({src:t,id:i,data:r}),1==s._preloadHash[o.src].length)s.activePlugin.preload(o.src,l);else if(1==s._preloadHash[o.src][0])return!0;return o},s.registerManifest=function(t,e){for(var i=[],r=0,s=t.length;s>r;r++)i[r]=createjs.Sound.registerSound(t[r].src,t[r].id,t[r].data,t[r].preload,e);return i},s.removeSound=function(t,i){if(null==s.activePlugin)return!1;if(t instanceof Object&&(t=t.src),t=s._getSrcById(t),s.alternateExtensions.length)var r=s._parsePath2(t);else var r=s._parsePath(t);if(null==r)return!1;null!=i&&(r.src=i+r.src),t=r.src;for(var n in s._idHash)s._idHash[n]==t&&delete s._idHash[n];return e.removeSrc(t),delete s._preloadHash[t],s.activePlugin.removeSound(t),!0},s.removeManifest=function(t,e){for(var i=[],r=0,s=t.length;s>r;r++)i[r]=createjs.Sound.removeSound(t[r].src,e);return i},s.removeAllSounds=function(){s._idHash={},s._preloadHash={},e.removeAll(),s.activePlugin.removeAllSounds()},s.loadComplete=function(t){if(s.alternateExtensions.length)var e=s._parsePath2(t,"sound");else var e=s._parsePath(t,"sound");return t=s._getSrcById(e?e.src:t),1==s._preloadHash[t][0]},s._parsePath=function(t,e,i,r){"string"!=typeof t&&(t=t.toString());var n=t.split(s.DELIMITER);if(n.length>1)try{console.log('createjs.Sound.DELIMITER "|" loading approach has been deprecated. Please use the new alternateExtensions property.')}catch(a){}for(var o={type:e||"sound",id:i,data:r},h=s.getCapabilities(),l=0,u=n.length;u>l;l++){var c=n[l],d=c.match(s.FILE_PATTERN);if(null==d)return!1;var p=d[4],f=d[5];if(h[f]&&createjs.indexOf(s.SUPPORTED_EXTENSIONS,f)>-1)return o.name=p,o.src=c,o.extension=f,o}return null},s._parsePath2=function(t,e,i,r){"string"!=typeof t&&(t=t.toString());var n=t.match(s.FILE_PATTERN);if(null==n)return!1;for(var a=n[4],o=n[5],h=s.getCapabilities(),l=0;!h[o];)if(o=s.alternateExtensions[l++],l>s.alternateExtensions.length)return null;t=t.replace("."+n[5],"."+o);var u={type:e||"sound",id:i,data:r};return u.name=a,u.src=t,u.extension=o,u},s.play=function(t,e,i,r,n,a,o){var h=s.createInstance(t),l=s._playInstance(h,e,i,r,n,a,o);return l||h.playFailed(),h},s.createInstance=function(i){if(!s.initializeDefaultPlugins())return s._defaultSoundInstance;if(i=s._getSrcById(i),s.alternateExtensions.length)var r=s._parsePath2(i,"sound");else var r=s._parsePath(i,"sound");var n=null;return null!=r&&null!=r.src?(e.create(r.src),n=s.activePlugin.create(r.src)):n=t._defaultSoundInstance,n.uniqueId=s._lastID++,n},s.setVolume=function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),s._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,i=0,r=e.length;r>i;i++)e[i].setMasterVolume(t)},s.getVolume=function(){return s._masterVolume},s.setMute=function(t){if(null==t||void 0==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,r=e.length;r>i;i++)e[i].setMasterMute(t);return!0},s.getMute=function(){return this._masterMute},s.stop=function(){for(var t=this._instances,e=t.length;e--;)t[e].stop()},s._playInstance=function(t,e,i,r,n,a,o){if(e instanceof Object&&(i=e.delay,r=e.offset,n=e.loop,a=e.volume,o=e.pan,e=e.interrupt),e=e||s.defaultInterruptBehavior,null==i&&(i=0),null==r&&(r=t.getPosition()),null==n&&(n=0),null==a&&(a=t.volume),null==o&&(o=t.pan),0==i){var h=s._beginPlaying(t,e,r,n,a,o);if(!h)return!1}else{var l=setTimeout(function(){s._beginPlaying(t,e,r,n,a,o)},i);t._delayTimeoutId=l}return this._instances.push(t),!0},s._beginPlaying=function(t,i,r,s,n,a){if(!e.add(t,i))return!1;var o=t._beginPlaying(r,s,n,a);if(!o){var h=createjs.indexOf(this._instances,t);return h>-1&&this._instances.splice(h,1),!1}return!0},s._getSrcById=function(t){return null==s._idHash||null==s._idHash[t]?t:s._idHash[t]},s._playFinished=function(t){e.remove(t);var i=createjs.indexOf(this._instances,t);i>-1&&this._instances.splice(i,1)},createjs.Sound=t,e.channels={},e.create=function(t,i){var r=e.get(t);return null==r?(e.channels[t]=new e(t,i),!0):!1},e.removeSrc=function(t){var i=e.get(t);return null==i?!1:(i.removeAll(),delete e.channels[t],!0)},e.removeAll=function(){for(var t in e.channels)e.channels[t].removeAll();e.channels={}},e.add=function(t,i){var r=e.get(t.src);return null==r?!1:r.add(t,i)},e.remove=function(t){var i=e.get(t.src);return null==i?!1:(i.remove(t),!0)},e.maxPerChannel=function(){return n.maxDefault},e.get=function(t){return e.channels[t]};var n=e.prototype;n.src=null,n.max=null,n.maxDefault=100,n.length=0,n.init=function(t,e){this.src=t,this.max=e||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},n.get=function(t){return this._instances[t]},n.add=function(t,e){return this.getSlot(e,t)?(this._instances.push(t),this.length++,!0):!1},n.remove=function(t){var e=createjs.indexOf(this._instances,t);return-1==e?!1:(this._instances.splice(e,1),this.length--,!0)},n.removeAll=function(){for(var t=this.length-1;t>=0;t--)this._instances[t].stop()},n.getSlot=function(e){for(var i,r,s=0,n=this.max;n>s;s++){if(i=this.get(s),null==i)return!0;(e!=t.INTERRUPT_NONE||i.playState==t.PLAY_FINISHED)&&(0!=s?i.playState==t.PLAY_FINISHED||i.playState==t.PLAY_INTERRUPTED||i.playState==t.PLAY_FAILED?r=i:(e==t.INTERRUPT_EARLY&&i.getPosition()<r.getPosition()||e==t.INTERRUPT_LATE&&i.getPosition()>r.getPosition())&&(r=i):r=i)}return null!=r?(r._interrupt(),this.remove(r),!0):!1},n.toString=function(){return"[Sound SoundChannel]"},t._defaultSoundInstance=new i,r.init=function(){var t=window.navigator.userAgent;r.isFirefox=t.indexOf("Firefox")>-1,r.isOpera=null!=window.opera,r.isChrome=t.indexOf("Chrome")>-1,r.isIOS=t.indexOf("iPod")>-1||t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1,r.isAndroid=t.indexOf("Android")>-1,r.isBlackberry=t.indexOf("Blackberry")>-1},r.init(),createjs.Sound.BrowserDetect=r}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._init()}var e=t;e._capabilities=null,e.isSupported=function(){var t=createjs.Sound.BrowserDetect.isIOS||createjs.Sound.BrowserDetect.isAndroid||createjs.Sound.BrowserDetect.isBlackberry;return"file:"!=location.protocol||t||this._isFileXHRSupported()?(e._generateCapabilities(),null==e.context?!1:!0):!1},e._isFileXHRSupported=function(){var t=!0,e=new XMLHttpRequest;try{e.open("GET","fail.fail",!1)}catch(i){return t=!1}e.onerror=function(){t=!1},e.onload=function(){t=404==this.status||200==this.status||0==this.status&&""!=this.response};try{e.send()}catch(i){t=!1}return t},e._generateCapabilities=function(){if(null==e._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;if(window.webkitAudioContext)e.context=new webkitAudioContext;else{if(!window.AudioContext)return null;e.context=new AudioContext}e._compatibilitySetUp(),e.playEmptySound(),e._capabilities={panning:!0,volume:!0,tracks:-1};for(var i=createjs.Sound.SUPPORTED_EXTENSIONS,r=createjs.Sound.EXTENSION_MAP,s=0,n=i.length;n>s;s++){var a=i[s],o=r[a]||a;e._capabilities[a]="no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)||"no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)}e.context.destination.numberOfChannels<2&&(e._capabilities.panning=!1),e.dynamicsCompressorNode=e.context.createDynamicsCompressor(),e.dynamicsCompressorNode.connect(e.context.destination),e.gainNode=e.context.createGain(),e.gainNode.connect(e.dynamicsCompressorNode)}},e._compatibilitySetUp=function(){if(!e.context.createGain){e.context.createGain=e.context.createGainNode;var t=e.context.createBufferSource();t.__proto__.start=t.__proto__.noteGrainOn,t.__proto__.stop=t.__proto__.noteOff,this._panningModel=0}},e.playEmptySound=function(){var t=this.context.createBuffer(1,1,22050),e=this.context.createBufferSource();e.buffer=t,e.connect(this.context.destination),e.start(0,0,0)};var i=t.prototype;i._capabilities=null,i._volume=1,i.context=null,i._panningModel="equalpower",i.dynamicsCompressorNode=null,i.gainNode=null,i._arrayBuffers=null,i._init=function(){this._capabilities=e._capabilities,this._arrayBuffers={},this.context=e.context,this.gainNode=e.gainNode,this.dynamicsCompressorNode=e.dynamicsCompressorNode},i.register=function(t){this._arrayBuffers[t]=!0;var e=new createjs.WebAudioPlugin.Loader(t,this);return{tag:e}},i.isPreloadStarted=function(t){return null!=this._arrayBuffers[t]},i.isPreloadComplete=function(t){return!(null==this._arrayBuffers[t]||1==this._arrayBuffers[t])},i.removeSound=function(t){delete this._arrayBuffers[t]},i.removeAllSounds=function(){this._arrayBuffers={}},i.addPreloadResults=function(t,e){this._arrayBuffers[t]=e},i._handlePreloadComplete=function(){createjs.Sound._sendFileLoadEvent(this.src)},i.preload=function(t){this._arrayBuffers[t]=!0;var e=new createjs.WebAudioPlugin.Loader(t,this);e.onload=this._handlePreloadComplete,e.load()},i.create=function(t){return this.isPreloadStarted(t)||this.preload(t),new createjs.WebAudioPlugin.SoundInstance(t,this)},i.setVolume=function(t){return this._volume=t,this._updateVolume(),!0},i._updateVolume=function(){var t=createjs.Sound._masterMute?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},i.getVolume=function(){return this._volume},i.setMute=function(){return this._updateVolume(),!0},i.toString=function(){return"[WebAudioPlugin]"},createjs.WebAudioPlugin=t}(),function(){"use strict";function t(t,e){this._init(t,e)}var e=t.prototype=new createjs.EventDispatcher;e.src=null,e.uniqueId=-1,e.playState=null,e._owner=null,e._offset=0,e._delay=0,e._volume=1;try{Object.defineProperty(e,"volume",{get:function(){return this._volume},set:function(t){return null==Number(t)?!1:(t=Math.max(0,Math.min(1,t)),this._volume=t,void this._updateVolume())}})}catch(i){}e._pan=0;try{Object.defineProperty(e,"pan",{get:function(){return this._pan},set:function(t){return this._owner._capabilities.panning&&null!=Number(t)?(t=Math.max(-1,Math.min(1,t)),this._pan=t,void this.panNode.setPosition(t,0,-.5)):!1}})}catch(i){}e._duration=0,e._remainingLoops=0,e._delayTimeoutId=null,e._soundCompleteTimeout=null,e.gainNode=null,e.panNode=null,e.sourceNode=null,e._sourceNodeNext=null,e._muted=!1,e._paused=!1,e._startTime=0,e._endedHandler=null,e._sendEvent=function(t){var e=new createjs.Event(t);this.dispatchEvent(e)},e._init=function(t,e){this._owner=e,this.src=t,this.gainNode=this._owner.context.createGain(),this.panNode=this._owner.context.createPanner(),this.panNode.panningModel=this._owner._panningModel,this.panNode.connect(this.gainNode),this._owner.isPreloadComplete(this.src)&&(this._duration=1e3*this._owner._arrayBuffers[this.src].duration),this._endedHandler=createjs.proxy(this._handleSoundComplete,this)},e._cleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._delayTimeoutId),clearTimeout(this._soundCompleteTimeout),this._startTime=0,null!=window.createjs&&createjs.Sound._playFinished(this)},e._cleanUpAudioNode=function(t){return t&&(t.stop(0),t.disconnect(this.panNode),t=null),t},e._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._paused=!1,this._sendEvent("interrupted")},e._handleSoundReady=function(){if(null!=window.createjs){if(1e3*this._offset>this.getDuration())return void this.playFailed();this._offset<0&&(this._offset=0),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._paused=!1,this.gainNode.connect(this._owner.gainNode);var t=this._owner._arrayBuffers[this.src].duration;this.sourceNode=this._createAndPlayAudioNode(this._owner.context.currentTime-t,this._offset),this._duration=1e3*t,this._startTime=this.sourceNode.startTime-this._offset,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(t-this._offset)),0!=this._remainingLoops&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._startTime,0))}},e._createAndPlayAudioNode=function(t,e){var i=this._owner.context.createBufferSource();return i.buffer=this._owner._arrayBuffers[this.src],i.connect(this.panNode),this._owner.context.currentTime,i.startTime=t+i.buffer.duration,i.start(i.startTime,e,i.buffer.duration-e),i},e.play=function(t,e,i,r,s,n){this._cleanUp(),createjs.Sound._playInstance(this,t,e,i,r,s,n)},e._beginPlaying=function(t,e,i,r){return null!=window.createjs&&this.src?(this._offset=t/1e3,this._remainingLoops=e,this.volume=i,this.pan=r,this._owner.isPreloadComplete(this.src)?(this._handleSoundReady(null),this._sendEvent("succeeded"),1):void this.playFailed()):void 0},e.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?!1:(this._paused=!0,this._offset=this._owner.context.currentTime-this._startTime,this._cleanUpAudioNode(this.sourceNode),this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(),clearTimeout(this._delayTimeoutId),clearTimeout(this._soundCompleteTimeout),!0)},e.resume=function(){return this._paused?(this._handleSoundReady(null),!0):!1},e.stop=function(){return this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this._offset=0,!0},e.setVolume=function(t){return this.volume=t,!0},e._updateVolume=function(){var t=this._muted?0:this._volume;return t!=this.gainNode.gain.value?(this.gainNode.gain.value=t,!0):!1},e.getVolume=function(){return this.volume},e.setMute=function(t){return null==t||void 0==t?!1:(this._muted=t,this._updateVolume(),!0)},e.getMute=function(){return this._muted},e.setPan=function(t){return this.pan=t,this.pan!=t?!1:void 0},e.getPan=function(){return this.pan},e.getPosition=function(){if(this._paused||null==this.sourceNode)var t=this._offset;else var t=this._owner.context.currentTime-this._startTime;return 1e3*t},e.setPosition=function(t){return this._offset=t/1e3,this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._cleanUpAudioNode(this.sourceNode),this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout)),this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||this._handleSoundReady(null),!0},e.getDuration=function(){return this._duration},e._handleSoundComplete=function(){return this._offset=0,0!=this._remainingLoops?(this._remainingLoops--,this._sourceNodeNext?(this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._startTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._startTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)):this._handleSoundReady(null),void this._sendEvent("loop")):void(null!=window.createjs&&(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this._sendEvent("complete")))},e.playFailed=function(){null!=window.createjs&&(this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed"))},e.toString=function(){return"[WebAudioPlugin SoundInstance]"},createjs.WebAudioPlugin.SoundInstance=t}(),function(){"use strict";function t(t,e){this._init(t,e)}var e=t.prototype;e.request=null,e.owner=null,e.progress=-1,e.src=null,e.originalSrc=null,e.result=null,e.onload=null,e.onprogress=null,e.onError=null,e._init=function(t,e){this.src=t,this.originalSrc=t,this.owner=e},e.load=function(t){null!=t&&(this.src=t),this.request=new XMLHttpRequest,this.request.open("GET",this.src,!0),this.request.responseType="arraybuffer",this.request.onload=createjs.proxy(this.handleLoad,this),this.request.onError=createjs.proxy(this.handleError,this),this.request.onprogress=createjs.proxy(this.handleProgress,this),this.request.send()},e.handleProgress=function(t,e){this.progress=t/e,null!=this.onprogress&&this.onprogress({loaded:t,total:e,progress:this.progress})},e.handleLoad=function(){this.owner.context.decodeAudioData(this.request.response,createjs.proxy(this.handleAudioDecoded,this),createjs.proxy(this.handleError,this))},e.handleAudioDecoded=function(t){this.progress=1,this.result=t,this.src=this.originalSrc,this.owner.addPreloadResults(this.src,this.result),this.onload&&this.onload()},e.handleError=function(t){this.owner.removeSound(this.src),this.onerror&&this.onerror(t)},e.toString=function(){return"[WebAudioPlugin Loader]"},createjs.WebAudioPlugin.Loader=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._init()}var e=t;e.MAX_INSTANCES=30,e._AUDIO_READY="canplaythrough",e._AUDIO_ENDED="ended",e._AUDIO_SEEKED="seeked",e._AUDIO_STALLED="stalled",e._capabilities=null,e.enableIOS=!1,e.isSupported=function(){if(createjs.Sound.BrowserDetect.isIOS&&!e.enableIOS)return!1;e._generateCapabilities();var t=e.tag;return null==t||null==e._capabilities?!1:!0},e._generateCapabilities=function(){if(null==e._capabilities){var t=e.tag=document.createElement("audio");if(null==t.canPlayType)return null;e._capabilities={panning:!0,volume:!0,tracks:-1};for(var i=createjs.Sound.SUPPORTED_EXTENSIONS,r=createjs.Sound.EXTENSION_MAP,s=0,n=i.length;n>s;s++){var a=i[s],o=r[a]||a;e._capabilities[a]="no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)||"no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)}}};var i=t.prototype;i._capabilities=null,i._audioSources=null,i.defaultNumChannels=2,i.loadedHandler=null,i._init=function(){this._capabilities=e._capabilities,this._audioSources={}},i.register=function(t,e){this._audioSources[t]=!0;for(var i=createjs.HTMLAudioPlugin.TagPool.get(t),r=null,s=e||this.defaultNumChannels,n=0;s>n;n++)r=this._createTag(t),i.add(r);if(r.id=t,this.loadedHandler=createjs.proxy(this._handleTagLoad,this),r.addEventListener&&r.addEventListener("canplaythrough",this.loadedHandler),null==r.onreadystatechange)r.onreadystatechange=this.loadedHandler;else{var a=r.onreadystatechange;r.onreadystatechange=function(){a(),this.loadedHandler()}}return{tag:r,numChannels:s}},i._handleTagLoad=function(t){t.target.removeEventListener&&t.target.removeEventListener("canplaythrough",this.loadedHandler),t.target.onreadystatechange=null,t.target.src!=t.target.id&&createjs.HTMLAudioPlugin.TagPool.checkSrc(t.target.id)},i._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},i.removeSound=function(t){delete this._audioSources[t],createjs.HTMLAudioPlugin.TagPool.remove(t)},i.removeAllSounds=function(){this._audioSources={},createjs.HTMLAudioPlugin.TagPool.removeAll()},i.create=function(t){if(!this.isPreloadStarted(t)){var e=createjs.HTMLAudioPlugin.TagPool.get(t),i=this._createTag(t);i.id=t,e.add(i),this.preload(t,{tag:i})}return new createjs.HTMLAudioPlugin.SoundInstance(t,this)},i.isPreloadStarted=function(t){return null!=this._audioSources[t]},i.preload=function(t,e){this._audioSources[t]=!0,new createjs.HTMLAudioPlugin.Loader(t,e.tag)},i.toString=function(){return"[HTMLAudioPlugin]"},createjs.HTMLAudioPlugin=t}(),function(){"use strict";function t(t,e){this._init(t,e)}var e=t.prototype=new createjs.EventDispatcher;e.src=null,e.uniqueId=-1,e.playState=null,e._owner=null,e.loaded=!1,e._offset=0,e._delay=0,e._volume=1;try{Object.defineProperty(e,"volume",{get:function(){return this._volume},set:function(t){null!=Number(t)&&(t=Math.max(0,Math.min(1,t)),this._volume=t,this._updateVolume())}})}catch(i){}e.pan=0,e._duration=0,e._remainingLoops=0,e._delayTimeoutId=null,e.tag=null,e._muted=!1,e._paused=!1,e._endedHandler=null,e._readyHandler=null,e._stalledHandler=null,e.loopHandler=null,e._init=function(t,e){this.src=t,this._owner=e,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleSoundReady,this),this._stalledHandler=createjs.proxy(this._handleSoundStalled,this),this.loopHandler=createjs.proxy(this.handleSoundLoop,this)},e._sendEvent=function(t){var e=new createjs.Event(t);this.dispatchEvent(e)},e._cleanUp=function(){var t=this.tag;if(null!=t){t.pause(),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1);try{t.currentTime=0}catch(e){}createjs.HTMLAudioPlugin.TagPool.setInstance(this.src,t),this.tag=null}clearTimeout(this._delayTimeoutId),null!=window.createjs&&createjs.Sound._playFinished(this)},e._interrupt=function(){null!=this.tag&&(this.playState=createjs.Sound.PLAY_INTERRUPTED,this._cleanUp(),this._paused=!1,this._sendEvent("interrupted"))},e.play=function(t,e,i,r,s,n){this._cleanUp(),createjs.Sound._playInstance(this,t,e,i,r,s,n)},e._beginPlaying=function(t,e,i,r){if(null==window.createjs)return-1;var s=this.tag=createjs.HTMLAudioPlugin.TagPool.getInstance(this.src);return null==s?(this.playFailed(),-1):(s.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._offset=t,this.volume=i,this.pan=r,this._updateVolume(),this._remainingLoops=e,4!==s.readyState?(s.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),s.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),s.preload="auto",s.load()):this._handleSoundReady(null),this._sendEvent("succeeded"),1)},e._handleSoundStalled=function(){this._cleanUp(),this._sendEvent("failed")},e._handleSoundReady=function(){if(null!=window.createjs){if(this._duration=1e3*this.tag.duration,this.playState=createjs.Sound.PLAY_SUCCEEDED,this._paused=!1,this.tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._offset>=this.getDuration())return void this.playFailed();this._offset>0&&(this.tag.currentTime=.001*this._offset),-1==this._remainingLoops&&(this.tag.loop=!0),0!=this._remainingLoops&&(this.tag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1),this.tag.loop=!0),this.tag.play()}},e.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||null==this.tag?!1:(this._paused=!0,this.tag.pause(),clearTimeout(this._delayTimeoutId),!0)},e.resume=function(){return this._paused&&null!=this.tag?(this._paused=!1,this.tag.play(),!0):!1},e.stop=function(){return this._offset=0,this.pause(),this.playState=createjs.Sound.PLAY_FINISHED,this._cleanUp(),!0},e.setMasterVolume=function(){return this._updateVolume(),!0},e.setVolume=function(t){return this.volume=t,!0},e._updateVolume=function(){if(null!=this.tag){var t=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;return t!=this.tag.volume&&(this.tag.volume=t),!0}return!1},e.getVolume=function(){return this.volume},e.setMasterMute=function(){return this._updateVolume(),!0},e.setMute=function(t){return null==t||void 0==t?!1:(this._muted=t,this._updateVolume(),!0)},e.getMute=function(){return this._muted},e.setPan=function(){return!1},e.getPan=function(){return 0},e.getPosition=function(){return null==this.tag?this._offset:1e3*this.tag.currentTime},e.setPosition=function(t){if(null==this.tag)this._offset=t;else{this.tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1);try{this.tag.currentTime=.001*t}catch(e){return!1}this.tag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1)}return!0},e.getDuration=function(){return this._duration},e._handleSoundComplete=function(){this._offset=0,null!=window.createjs&&(this.playState=createjs.Sound.PLAY_FINISHED,this._cleanUp(),this._sendEvent("complete"))},e.handleSoundLoop=function(){this._offset=0,this._remainingLoops--,0==this._remainingLoops&&(this.tag.loop=!1,this.tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1)),this._sendEvent("loop")},e.playFailed=function(){null!=window.createjs&&(this.playState=createjs.Sound.PLAY_FAILED,this._cleanUp(),this._sendEvent("failed"))},e.toString=function(){return"[HTMLAudioPlugin SoundInstance]"},createjs.HTMLAudioPlugin.SoundInstance=t}(),function(){"use strict";function t(t,e){this._init(t,e)}var e=t.prototype;e.src=null,e.tag=null,e.preloadTimer=null,e.loadedHandler=null,e._init=function(t,e){if(this.src=t,this.tag=e,this.preloadTimer=setInterval(createjs.proxy(this.preloadTick,this),200),this.loadedHandler=createjs.proxy(this.sendLoadedEvent,this),this.tag.addEventListener&&this.tag.addEventListener("canplaythrough",this.loadedHandler),null==this.tag.onreadystatechange)this.tag.onreadystatechange=createjs.proxy(this.sendLoadedEvent,this);else{var i=this.tag.onreadystatechange;this.tag.onreadystatechange=function(){i(),this.tag.onreadystatechange=createjs.proxy(this.sendLoadedEvent,this)}}this.tag.preload="auto",this.tag.load()},e.preloadTick=function(){var t=this.tag.buffered,e=this.tag.duration;t.length>0&&t.end(0)>=e-1&&this.handleTagLoaded()},e.handleTagLoaded=function(){clearInterval(this.preloadTimer)},e.sendLoadedEvent=function(){this.tag.removeEventListener&&this.tag.removeEventListener("canplaythrough",this.loadedHandler),this.tag.onreadystatechange=null,createjs.Sound._sendFileLoadEvent(this.src)},e.toString=function(){return"[HTMLAudioPlugin Loader]"},createjs.HTMLAudioPlugin.Loader=t}(),function(){"use strict";function t(t){this._init(t)}var e=t;e.tags={},e.get=function(i){var r=e.tags[i];return null==r&&(r=e.tags[i]=new t(i)),r},e.remove=function(t){var i=e.tags[t];return null==i?!1:(i.removeAll(),delete e.tags[t],!0)},e.removeAll=function(){for(var t in e.tags)e.tags[t].removeAll();e.tags={}},e.getInstance=function(t){var i=e.tags[t];return null==i?null:i.get()},e.setInstance=function(t,i){var r=e.tags[t];return null==r?null:r.set(i)},e.checkSrc=function(t){var i=e.tags[t];return null==i?null:void i.checkSrcChange()};var i=t.prototype;i.src=null,i.length=0,i.available=0,i.tags=null,i._init=function(t){this.src=t,this.tags=[]},i.add=function(t){this.tags.push(t),this.length++,this.available++},i.removeAll=function(){for(;this.length--;)delete this.tags[this.length];this.src=null,this.tags.length=0},i.get=function(){if(0==this.tags.length)return null;this.available=this.tags.length;var t=this.tags.pop();return null==t.parentNode&&document.body.appendChild(t),t},i.set=function(t){var e=createjs.indexOf(this.tags,t);-1==e&&this.tags.push(t),this.available=this.tags.length},i.checkSrcChange=function(){for(var t=this.tags.length-1,e=this.tags[t].src;t--;)this.tags[t].src=e},i.toString=function(){return"[HTMLAudioPlugin TagPool]"},createjs.HTMLAudioPlugin.TagPool=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i){this.initialize(t,e,i)},e=t.prototype=new createjs.EventDispatcher;t.NONE=0,t.LOOP=1,t.REVERSE=2,t.IGNORE={},t._tweens=[],t._plugins={},t.get=function(e,i,r,s){return s&&t.removeTweens(e),new t(e,i,r)},t.tick=function(e,i){for(var r=t._tweens.slice(),s=r.length-1;s>=0;s--){var n=r[s];i&&!n.ignoreGlobalPause||n._paused||n.tick(n._useTicks?1:e)}},t.handleEvent=function(t){"tick"==t.type&&this.tick(t.delta,t.paused)},t.removeTweens=function(e){if(e.tweenjs_count){for(var i=t._tweens,r=i.length-1;r>=0;r--)i[r]._target==e&&(i[r]._paused=!0,i.splice(r,1));e.tweenjs_count=0}},t.removeAllTweens=function(){for(var e=t._tweens,i=0,r=e.length;r>i;i++){var s=e[i];s.paused=!0,s.target.tweenjs_count=0}e.length=0},t.hasActiveTweens=function(e){return e?e.tweenjs_count:t._tweens&&!!t._tweens.length},t.installPlugin=function(e,i){var r=e.priority;null==r&&(e.priority=r=0);for(var s=0,n=i.length,a=t._plugins;n>s;s++){var o=i[s];if(a[o]){for(var h=a[o],l=0,u=h.length;u>l&&!(r<h[l].priority);l++);a[o].splice(l,0,e)}else a[o]=[e]}},t._register=function(e,i){var r=e._target,s=t._tweens;if(i)r&&(r.tweenjs_count=r.tweenjs_count?r.tweenjs_count+1:1),s.push(e),!t._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",t),t._inited=!0);else{r&&r.tweenjs_count--;for(var n=s.length;n--;)if(s[n]==e)return void s.splice(n,1)}},e.ignoreGlobalPause=!1,e.loop=!1,e.duration=0,e.pluginData=null,e.target=null,e.position=null,e.passive=!1,e._paused=!1,e._curQueueProps=null,e._initQueueProps=null,e._steps=null,e._actions=null,e._prevPosition=0,e._stepPosition=0,e._prevPos=-1,e._target=null,e._useTicks=!1,e._inited=!1,e.initialize=function(e,i,r){this.target=this._target=e,i&&(this._useTicks=i.useTicks,this.ignoreGlobalPause=i.ignoreGlobalPause,this.loop=i.loop,i.onChange&&this.addEventListener("change",i.onChange),i.override&&t.removeTweens(e)),this.pluginData=r||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],i&&i.paused?this._paused=!0:t._register(this,!0),i&&null!=i.position&&this.setPosition(i.position,t.NONE)},e.wait=function(t,e){if(null==t||0>=t)return this;var i=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:i,e:this._linearEase,p1:i,v:e})},e.to=function(t,e,i){return(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(t))})
},e.call=function(t,e,i){return this._addAction({f:t,p:e?e:[this],o:i?i:this._target})},e.set=function(t,e){return this._addAction({f:this._set,o:this,p:[t,e?e:this._target]})},e.play=function(t){return t||(t=this),this.call(t.setPaused,[!1],t)},e.pause=function(t){return t||(t=this),this.call(t.setPaused,[!0],t)},e.setPosition=function(t,e){0>t&&(t=0),null==e&&(e=1);var i=t,r=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,r=!0)),i==this._prevPos)return r;var s=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this._target)if(r)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var n=0,a=this._steps.length;a>n&&!(this._steps[n].t>i);n++);var o=this._steps[n-1];this._updateTargetProps(o,(this._stepPosition=i-o.t)/o.d)}return 0!=e&&this._actions.length>0&&(this._useTicks?this._runActions(i,i):1==e&&s>i?(s!=this.duration&&this._runActions(s,this.duration),this._runActions(0,i,!0)):this._runActions(s,i)),r&&this.setPaused(!0),this.dispatchEvent("change"),r},e.tick=function(t){this._paused||this.setPosition(this._prevPosition+t)},e.setPaused=function(e){return this._paused=!!e,t._register(this,!e),this},e.w=e.wait,e.t=e.to,e.c=e.call,e.s=e.set,e.toString=function(){return"[Tween]"},e.clone=function(){throw"Tween can not be cloned."},e._updateTargetProps=function(e,i){var r,s,n,a,o,h;if(e||1!=i){if(this.passive=!!e.v,this.passive)return;e.e&&(i=e.e(i,0,1,1)),r=e.p0,s=e.p1}else this.passive=!1,r=s=this._curQueueProps;for(var l in this._initQueueProps){null==(a=r[l])&&(r[l]=a=this._initQueueProps[l]),null==(o=s[l])&&(s[l]=o=a),n=a==o||0==i||1==i||"number"!=typeof a?1==i?o:a:a+(o-a)*i;var u=!1;if(h=t._plugins[l])for(var c=0,d=h.length;d>c;c++){var p=h[c].tween(this,l,n,r,s,i,!!e&&r==s,!e);p==t.IGNORE?u=!0:n=p}u||(this._target[l]=n)}},e._runActions=function(t,e,i){var r=t,s=e,n=-1,a=this._actions.length,o=1;for(t>e&&(r=e,s=t,n=a,a=o=-1);(n+=o)!=a;){var h=this._actions[n],l=h.t;(l==s||l>r&&s>l||i&&l==t)&&h.f.apply(h.o,h.p)}},e._appendQueueProps=function(e){var i,r,s,n,a;for(var o in e)if(void 0===this._initQueueProps[o]){if(r=this._target[o],i=t._plugins[o])for(s=0,n=i.length;n>s;s++)r=i[s].init(this,o,r);this._initQueueProps[o]=this._curQueueProps[o]=void 0===r?null:r}else r=this._curQueueProps[o];for(var o in e){if(r=this._curQueueProps[o],i=t._plugins[o])for(a=a||{},s=0,n=i.length;n>s;s++)i[s].step&&i[s].step(this,o,r,e[o],a);this._curQueueProps[o]=e[o]}return a&&this._appendQueueProps(a),this._curQueueProps},e._cloneProps=function(t){var e={};for(var i in t)e[i]=t[i];return e},e._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},e._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},e._set=function(t,e){for(var i in t)e[i]=t[i]},createjs.Tween=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i){this.initialize(t,e,i)},e=t.prototype=new createjs.EventDispatcher;e.ignoreGlobalPause=!1,e.duration=0,e.loop=!1,e.position=null,e._paused=!1,e._tweens=null,e._labels=null,e._labelList=null,e._prevPosition=0,e._prevPos=-1,e._useTicks=!1,e.initialize=function(t,e,i){this._tweens=[],i&&(this._useTicks=i.useTicks,this.loop=i.loop,this.ignoreGlobalPause=i.ignoreGlobalPause,i.onChange&&this.addEventListener("change",i.onChange)),t&&this.addTween.apply(this,t),this.setLabels(e),i&&i.paused?this._paused=!0:createjs.Tween._register(this,!0),i&&null!=i.position&&this.setPosition(i.position,createjs.Tween.NONE)},e.addTween=function(t){var e=arguments.length;if(e>1){for(var i=0;e>i;i++)this.addTween(arguments[i]);return arguments[0]}return 0==e?null:(this.removeTween(t),this._tweens.push(t),t.setPaused(!0),t._paused=!1,t._useTicks=this._useTicks,t.duration>this.duration&&(this.duration=t.duration),this._prevPos>=0&&t.setPosition(this._prevPos,createjs.Tween.NONE),t)},e.removeTween=function(t){var e=arguments.length;if(e>1){for(var i=!0,r=0;e>r;r++)i=i&&this.removeTween(arguments[r]);return i}if(0==e)return!1;for(var s=this._tweens,r=s.length;r--;)if(s[r]==t)return s.splice(r,1),t.duration>=this.duration&&this.updateDuration(),!0;return!1},e.addLabel=function(t,e){this._labels[t]=e;var i=this._labelList;if(i){for(var r=0,s=i.length;s>r&&!(e<i[r].position);r++);i.splice(r,0,{label:t,position:e})}},e.setLabels=function(t){this._labels=t?t:{}},e.getLabels=function(){var t=this._labelList;if(!t){t=this._labelList=[];var e=this._labels;for(var i in e)t.push({label:i,position:e[i]});t.sort(function(t,e){return t.position-e.position})}return t},e.getCurrentLabel=function(){var t=this.getLabels(),e=this.position,i=t.length;if(i){for(var r=0;i>r&&!(e<t[r].position);r++);return 0==r?null:t[r-1].label}return null},e.gotoAndPlay=function(t){this.setPaused(!1),this._goto(t)},e.gotoAndStop=function(t){this.setPaused(!0),this._goto(t)},e.setPosition=function(t,e){0>t&&(t=0);var i=this.loop?t%this.duration:t,r=!this.loop&&t>=this.duration;if(i==this._prevPos)return r;this._prevPosition=t,this.position=this._prevPos=i;for(var s=0,n=this._tweens.length;n>s;s++)if(this._tweens[s].setPosition(i,e),i!=this._prevPos)return!1;return r&&this.setPaused(!0),this.dispatchEvent("change"),r},e.setPaused=function(t){this._paused=!!t,createjs.Tween._register(this,!t)},e.updateDuration=function(){this.duration=0;for(var t=0,e=this._tweens.length;e>t;t++){var i=this._tweens[t];i.duration>this.duration&&(this.duration=i.duration)}},e.tick=function(t){this.setPosition(this._prevPosition+t)},e.resolve=function(t){var e=parseFloat(t);return isNaN(e)&&(e=this._labels[t]),e},e.toString=function(){return"[Timeline]"},e.clone=function(){throw"Timeline can not be cloned."},e._goto=function(t){var e=this.resolve(t);null!=e&&this.setPosition(e)},createjs.Timeline=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){throw"Ease cannot be instantiated."};t.linear=function(t){return t},t.none=t.linear,t.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},t.sineOut=function(t){return Math.sin(t*Math.PI/2)},t.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},t.backIn=t.getBackIn(1.7),t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},t.backOut=t.getBackOut(1.7),t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)}},t.backInOut=t.getBackInOut(1.7),t.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},t.circOut=function(t){return Math.sqrt(1- --t*t)},t.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.bounceInOut=function(e){return.5>e?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.getElasticIn=function(t,e){var i=2*Math.PI;return function(r){if(0==r||1==r)return r;var s=e/i*Math.asin(1/t);return-(t*Math.pow(2,10*(r-=1))*Math.sin((r-s)*i/e))}},t.elasticIn=t.getElasticIn(1,.3),t.getElasticOut=function(t,e){var i=2*Math.PI;return function(r){if(0==r||1==r)return r;var s=e/i*Math.asin(1/t);return t*Math.pow(2,-10*r)*Math.sin((r-s)*i/e)+1}},t.elasticOut=t.getElasticOut(1,.3),t.getElasticInOut=function(t,e){var i=2*Math.PI;return function(r){var s=e/i*Math.asin(1/t);return(r*=2)<1?-.5*t*Math.pow(2,10*(r-=1))*Math.sin((r-s)*i/e):.5*t*Math.pow(2,-10*(r-=1))*Math.sin((r-s)*i/e)+1}},t.elasticInOut=t.getElasticInOut(1,.3*1.5),createjs.Ease=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){throw"MotionGuidePlugin cannot be instantiated."};t.priority=0,t._rotOffS,t._rotOffE,t._rotNormS,t._rotNormE,t.install=function(){return createjs.Tween.installPlugin(t,["guide","x","y","rotation"]),createjs.Tween.IGNORE},t.init=function(t,e,i){var r=t.target;return r.hasOwnProperty("x")||(r.x=0),r.hasOwnProperty("y")||(r.y=0),r.hasOwnProperty("rotation")||(r.rotation=0),"rotation"==e&&(t.__needsRot=!0),"guide"==e?null:i},t.step=function(e,i,r,s,n){if("rotation"==i&&(e.__rotGlobalS=r,e.__rotGlobalE=s,t.testRotData(e,n)),"guide"!=i)return s;var a,o=s;o.hasOwnProperty("path")||(o.path=[]);var h=o.path;if(o.hasOwnProperty("end")||(o.end=1),o.hasOwnProperty("start")||(o.start=r&&r.hasOwnProperty("end")&&r.path===h?r.end:0),o.hasOwnProperty("_segments")&&o._length)return s;var l=h.length,u=10;if(!(l>=6&&0==(l-2)%4))throw"invalid 'path' data, please see documentation for valid paths";o._segments=[],o._length=0;for(var c=2;l>c;c+=4){for(var d,p,f=h[c-2],m=h[c-1],g=h[c+0],v=h[c+1],_=h[c+2],y=h[c+3],x=f,w=m,b=0,S=[],T=1;u>=T;T++){var E=T/u,C=1-E;d=C*C*f+2*C*E*g+E*E*_,p=C*C*m+2*C*E*v+E*E*y,b+=S[S.push(Math.sqrt((a=d-x)*a+(a=p-w)*a))-1],x=d,w=p}o._segments.push(b),o._segments.push(S),o._length+=b}a=o.orient,o.orient=!0;var P={};return t.calc(o,o.start,P),e.__rotPathS=Number(P.rotation.toFixed(5)),t.calc(o,o.end,P),e.__rotPathE=Number(P.rotation.toFixed(5)),o.orient=!1,t.calc(o,o.end,n),o.orient=a,o.orient?(e.__guideData=o,t.testRotData(e,n),s):s},t.testRotData=function(t,e){if(void 0===t.__rotGlobalS||void 0===t.__rotGlobalE){if(t.__needsRot)return;t.__rotGlobalS=t.__rotGlobalE=void 0!==t._curQueueProps.rotation?t._curQueueProps.rotation:e.rotation=t.target.rotation||0}if(void 0!==t.__guideData){var i=t.__guideData,r=t.__rotGlobalE-t.__rotGlobalS,s=t.__rotPathE-t.__rotPathS,n=r-s;if("auto"==i.orient)n>180?n-=360:-180>n&&(n+=360);else if("cw"==i.orient){for(;0>n;)n+=360;0==n&&r>0&&180!=r&&(n+=360)}else if("ccw"==i.orient){for(n=r-(s>180?360-s:s);n>0;)n-=360;0==n&&0>r&&-180!=r&&(n-=360)}i.rotDelta=n,i.rotOffS=t.__rotGlobalS-t.__rotPathS,t.__rotGlobalS=t.__rotGlobalE=t.__guideData=t.__needsRot=void 0}},t.tween=function(e,i,r,s,n,a,o){var h=n.guide;if(void 0==h||h===s.guide)return r;if(h.lastRatio!=a){var l=(h.end-h.start)*(o?h.end:a)+h.start;switch(t.calc(h,l,e.target),h.orient){case"cw":case"ccw":case"auto":e.target.rotation+=h.rotOffS+h.rotDelta*a;break;case"fixed":default:e.target.rotation+=h.rotOffS}h.lastRatio=a}return"rotation"!=i||h.orient&&"false"!=h.orient?e.target[i]:r},t.calc=function(e,i,r){void 0==e._segments&&t.validate(e),void 0==r&&(r={x:0,y:0,rotation:0});for(var s=e._segments,n=e.path,a=e._length*i,o=s.length-2,h=0;a>s[h]&&o>h;)a-=s[h],h+=2;var l=s[h+1],u=0;for(o=l.length-1;a>l[u]&&o>u;)a-=l[u],u++;var c=u/++o+a/(o*l[u]);h=2*h+2;var d=1-c;return r.x=d*d*n[h-2]+2*d*c*n[h+0]+c*c*n[h+2],r.y=d*d*n[h-1]+2*d*c*n[h+1]+c*c*n[h+3],e.orient&&(r.rotation=57.2957795*Math.atan2((n[h+1]-n[h-1])*d+(n[h+3]-n[h+1])*c,(n[h+0]-n[h-2])*d+(n[h+2]-n[h+0])*c)),r},createjs.MotionGuidePlugin=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.TweenJS=createjs.TweenJS||{};t.version="NEXT",t.buildDate="Thu, 12 Dec 2013 23:37:07 GMT"}(),ss.DebugUtil=ss.DebugUtil||new function(){function t(){return r=null,s=new Array,n=new Object,a}function e(t,e){var i=s.indexOf(t);return 0>i&&(s.push(t),i=s.length-1),null==r?void console.warn("DebugUtil: Attempted to display debug message but no display container was set!"):(n[t]=new createjs.Text(e,String(p)+"px Arial","#FFFFFF"),n[t].lineWidth=d,r.addChild(n[t]),n[t].x=l,void(n[t].y=u+i*c))}function i(t){isDefined(n[t])&&(r.removeChild(n[t]),delete n[t])}var r,s,n,a=this,o=!1,h="DEBUG_DEFAULT",l=5,u=5,c=20,d=1e3,p=12;return a.setDisplay=function(t,e,i){r=t,p=isDefined(e)?e:p,d=isDefined(i)?i:d},a.setEnabled=function(t){o=t},a.showMessage=function(t,r){var s;o&&(s=isDefined(r)?r:h,i(s),e(s,t))},t()},ss.SystemInfo=new Object,ss.SystemInfo.isIOS=void 0,ss.SystemInfo.isIPhone=void 0,ss.SystemInfo.isIPod=void 0,ss.SystemInfo.isIPad=void 0,ss.SystemInfo.isNexus=void 0,ss.SystemInfo.isNabi=void 0,ss.SystemInfo.isIE=void 0,ss.SystemInfo.isSafari=void 0,ss.SystemInfo.isChrome=void 0,ss.SystemInfo.isMaxthon=void 0,ss.SystemInfo.isFirefox=void 0,ss.SystemInfo.isSilk=void 0,ss.SystemInfo.isMobile=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/Mobile/i)||navigator.userAgent.match(/Silk/i)||navigator.userAgent.match(/NABI/i)?!0:!1},ss.SystemInfo.getIOSVersion=function(){if(!ss.SystemInfo.isIOS)return-1;var t=window.navigator.userAgent,e=t.indexOf("OS ");return e>=0?parseInt(t.substring(e+3,e+4)):(console.warn("SystemInfo.getIOSVersion: Couldn't detect IOS version!"),0)},ss.SystemInfo.getIEVersion=function(){if(!ss.SystemInfo.isIE)return-1;var t=window.navigator.userAgent,e=t.indexOf("MSIE "),i=t.indexOf("Trident/");if(e>=0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(i>=0){var r=t.indexOf("rv");return parseInt(t.substring(r+3,t.indexOf(".",r)),10)}return console.warn("SystemInfo.getIEVersion: Couldn't detect IE version!"),0},ss.SystemInfo.getSafariVersion=function(){var t,e;return ss.SystemInfo.isSafari?(t=parseInt(window.navigator.userAgent.indexOf("Version/")),e=t+8,0>t?(console.warn("SystemInfo: Unable to detect Safari version!"),0):parseInt(window.navigator.userAgent.substring(e,e+1))):-1},ss.SystemInfo._init=function(){"use strict";var t=window.navigator.userAgent;this.isIOS=!1,this.isIPhone=!1,this.isIPod=!1,this.isIPad=!1,this.isNexus=!1,this.isIE=!1,this.isSafari=!1,this.isChrome=!1,this.isFirefox=!1,this.isMaxthon=!1,this.isSilk=!1,t.match(/iPhone/i)?this.isIPhone=!0:t.match(/iPad/i)?this.isIPad=!0:t.match(/iPod/i)&&(this.isIPod=!0),(this.isIPhone||this.isIPad||this.isIPod)&&(this.isIOS=!0),t.match(/Nexus/i)&&(this.isNexus=!0),t.indexOf("MSIE ")>=0||t.indexOf("Trident")>=0?this.isIE=!0:t.match(/Silk/i)?this.isSilk=!0:t.match(/NABI/i)?this.isMaxthon=!0:t.match(/Chrome/i)?this.isChrome=!0:t.match(/Firefox/i)?this.isFirefox=!0:t.match(/Safari/i)?this.isSafari=!0:console.warn("SystemInfo: Couldn't detect browser type!")},ss.SystemInfo._init(),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var a=e||window.event,o=h.call(arguments,1),l=0,c=0,d=0,p=0,f=0,m=0;if(e=t.event.fix(a),e.type="mousewheel","detail"in a&&(d=-1*a.detail),"wheelDelta"in a&&(d=a.wheelDelta),"wheelDeltaY"in a&&(d=a.wheelDeltaY),"wheelDeltaX"in a&&(c=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(c=-1*d,d=0),l=0===d?c:d,"deltaY"in a&&(d=-1*a.deltaY,l=d),"deltaX"in a&&(c=a.deltaX,0===d&&(l=-1*c)),0!==d||0!==c){if(1===a.deltaMode){var g=t.data(this,"mousewheel-line-height");l*=g,d*=g,c*=g}else if(2===a.deltaMode){var v=t.data(this,"mousewheel-page-height");l*=v,d*=v,c*=v}if(p=Math.max(Math.abs(d),Math.abs(c)),(!n||n>p)&&(n=p,r(a,p)&&(n/=40)),r(a,p)&&(l/=40,c/=40,d/=40),l=Math[l>=1?"floor":"ceil"](l/n),c=Math[c>=1?"floor":"ceil"](c/n),d=Math[d>=1?"floor":"ceil"](d/n),u.settings.normalizeOffset&&this.getBoundingClientRect){var _=this.getBoundingClientRect();f=e.clientX-_.left,m=e.clientY-_.top}return e.deltaX=c,e.deltaY=d,e.deltaFactor=n,e.offsetX=f,e.offsetY=m,e.deltaMode=0,o.unshift(e,l,c,d),s&&clearTimeout(s),s=setTimeout(i,200),(t.event.dispatch||t.event.handle).apply(this,o)}}function i(){n=null}function r(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var s,n,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice;if(t.event.fixHooks)for(var l=a.length;l;)t.event.fixHooks[a[--l]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=o.length;i;)this.addEventListener(o[--i],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=o.length;i;)this.removeEventListener(o[--i],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var i=t(e),r=i["offsetParent"in t.fn?"offsetParent":"parent"]();return r.length||(r=t("body")),parseInt(r.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),typeof ss===String(void 0))var ss=new Object;(function(){var t=this,e=e||{};e.WEBGL_RENDERER=0,e.CANVAS_RENDERER=1,e.VERSION="v2.1.0",e.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},e.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},e._UID=0,"undefined"!=typeof Float32Array?(e.Float32Array=Float32Array,e.Uint16Array=Uint16Array):(e.Float32Array=Array,e.Uint16Array=Array),e.INTERACTION_FREQUENCY=30,e.AUTO_PREVENT_DEFAULT=!0,e.PI_2=2*Math.PI,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e.RETINA_PREFIX="@2x",e.dontSayHello=!1,e.defaultRenderOptions={view:null,transparent:!1,antialias:!1,preserveDrawingBuffer:!1,resolution:1,clearBeforeRender:!0,autoResize:!1},e.sayHello=function(t){if(!e.dontSayHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["%c %c %c Pixi.js "+e.VERSION+" - "+t+"  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,i)}else window.console&&console.log("Pixi.js "+e.VERSION+" - http://www.pixijs.com/");e.dontSayHello=!0}},e.Point=function(t,e){this.x=t||0,this.y=e||0},e.Point.prototype.clone=function(){return new e.Point(this.x,this.y)},e.Point.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},e.Point.prototype.constructor=e.Point,e.Rectangle=function(t,e,i,r){this.x=t||0,this.y=e||0,this.width=i||0,this.height=r||0},e.Rectangle.prototype.clone=function(){return new e.Rectangle(this.x,this.y,this.width,this.height)},e.Rectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(t>=i&&t<=i+this.width){var r=this.y;if(e>=r&&e<=r+this.height)return!0}return!1},e.Rectangle.prototype.constructor=e.Rectangle,e.EmptyRectangle=new e.Rectangle(0,0,0,0),e.Polygon=function(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),t[0]instanceof e.Point){for(var i=[],r=0,s=t.length;s>r;r++)i.push(t[r].x,t[r].y);t=i}this.closed=!0,this.points=t},e.Polygon.prototype.clone=function(){var t=this.points.slice();return new e.Polygon(t)},e.Polygon.prototype.contains=function(t,e){for(var i=!1,r=this.points.length/2,s=0,n=r-1;r>s;n=s++){var a=this.points[2*s],o=this.points[2*s+1],h=this.points[2*n],l=this.points[2*n+1],u=o>e!=l>e&&(h-a)*(e-o)/(l-o)+a>t;u&&(i=!i)}return i},e.Polygon.prototype.constructor=e.Polygon,e.Circle=function(t,e,i){this.x=t||0,this.y=e||0,this.radius=i||0},e.Circle.prototype.clone=function(){return new e.Circle(this.x,this.y,this.radius)},e.Circle.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.x-t,r=this.y-e,s=this.radius*this.radius;return i*=i,r*=r,s>=i+r},e.Circle.prototype.getBounds=function(){return new e.Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e.Circle.prototype.constructor=e.Circle,e.Ellipse=function(t,e,i,r){this.x=t||0,this.y=e||0,this.width=i||0,this.height=r||0},e.Ellipse.prototype.clone=function(){return new e.Ellipse(this.x,this.y,this.width,this.height)},e.Ellipse.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,r=(e-this.y)/this.height;return i*=i,r*=r,1>=i+r},e.Ellipse.prototype.getBounds=function(){return new e.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},e.Ellipse.prototype.constructor=e.Ellipse,e.RoundedRectangle=function(t,e,i,r,s){this.x=t||0,this.y=e||0,this.width=i||0,this.height=r||0,this.radius=s||20},e.RoundedRectangle.prototype.clone=function(){return new e.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},e.RoundedRectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(t>=i&&t<=i+this.width){var r=this.y;if(e>=r&&e<=r+this.height)return!0}return!1},e.RoundedRectangle.prototype.constructor=e.RoundedRectangle,e.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},e.Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},e.Matrix.prototype.toArray=function(t){this.array||(this.array=new e.Float32Array(9));var i=this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},e.Matrix.prototype.apply=function(t,i){return i=i||new e.Point,i.x=this.a*t.x+this.c*t.y+this.tx,i.y=this.b*t.x+this.d*t.y+this.ty,i},e.Matrix.prototype.applyInverse=function(t,i){i=i||new e.Point;var r=1/(this.a*this.d+this.c*-this.b);return i.x=this.d*r*t.x+-this.c*r*t.y+(this.ty*this.c-this.tx*this.d)*r,i.y=this.a*r*t.y+-this.b*r*t.x+(-this.ty*this.a+this.tx*this.b)*r,i},e.Matrix.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},e.Matrix.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},e.Matrix.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,s=this.c,n=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=n*e-this.ty*i,this.ty=n*i+this.ty*e,this},e.Matrix.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,s=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},e.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.identityMatrix=new e.Matrix,e.DisplayObject=function(){this.position=new e.Point,this.scale=new e.Point(1,1),this.pivot=new e.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new e.Matrix,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new e.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},e.DisplayObject.prototype.constructor=e.DisplayObject,Object.defineProperty(e.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(t){this._interactive=t,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(e.DisplayObject.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}}),Object.defineProperty(e.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(e.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(t){if(t){for(var e=[],i=0;i<t.length;i++)for(var r=t[i].passes,s=0;s<r.length;s++)e.push(r[s]);this._filterBlock={target:this,filterPasses:e}}this._filters=t}}),Object.defineProperty(e.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}),e.DisplayObject.prototype.updateTransform=function(){var t,i,r,s,n,a,o=this.parent.worldTransform,h=this.worldTransform;this.rotation%e.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,i=this._sr*this.scale.x,r=-this._sr*this.scale.y,s=this._cr*this.scale.y,n=this.position.x,a=this.position.y,(this.pivot.x||this.pivot.y)&&(n-=this.pivot.x*t+this.pivot.y*r,a-=this.pivot.x*i+this.pivot.y*s),h.a=t*o.a+i*o.c,h.b=t*o.b+i*o.d,h.c=r*o.a+s*o.c,h.d=r*o.b+s*o.d,h.tx=n*o.a+a*o.c+o.tx,h.ty=n*o.b+a*o.d+o.ty):(t=this.scale.x,s=this.scale.y,n=this.position.x-this.pivot.x*t,a=this.position.y-this.pivot.y*s,h.a=t*o.a,h.b=t*o.b,h.c=s*o.c,h.d=s*o.d,h.tx=n*o.a+a*o.c+o.tx,h.ty=n*o.b+a*o.d+o.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.DisplayObject.prototype.displayObjectUpdateTransform=e.DisplayObject.prototype.updateTransform,e.DisplayObject.prototype.getBounds=function(t){return t=t,e.EmptyRectangle},e.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(e.identityMatrix)},e.DisplayObject.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0)},e.DisplayObject.prototype.generateTexture=function(t,i,r){var s=this.getLocalBounds(),n=new e.RenderTexture(0|s.width,0|s.height,r,i,t);return e.DisplayObject._tempMatrix.tx=-s.x,e.DisplayObject._tempMatrix.ty=-s.y,n.render(this,e.DisplayObject._tempMatrix),n},e.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},e.DisplayObject.prototype.toGlobal=function(t){return this.updateTransform(),this.worldTransform.apply(t)},e.DisplayObject.prototype.toLocal=function(t,e){return e&&(t=e.toGlobal(t)),this.updateTransform(),this.worldTransform.applyInverse(t)},e.DisplayObject.prototype._renderCachedSprite=function(t){this._cachedSprite.worldAlpha=this.worldAlpha,t.gl?e.Sprite.prototype._renderWebGL.call(this._cachedSprite,t):e.Sprite.prototype._renderCanvas.call(this._cachedSprite,t)},e.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|t.width,0|t.height);else{var i=new e.RenderTexture(0|t.width,0|t.height);this._cachedSprite=new e.Sprite(i),this._cachedSprite.worldTransform=this.worldTransform}var r=this._filters;this._filters=null,this._cachedSprite.filters=r,e.DisplayObject._tempMatrix.tx=-t.x,e.DisplayObject._tempMatrix.ty=-t.y,this._cachedSprite.texture.render(this,e.DisplayObject._tempMatrix),this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._filters=r,this._cacheAsBitmap=!0},e.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},e.DisplayObject.prototype._renderWebGL=function(t){t=t},e.DisplayObject.prototype._renderCanvas=function(t){t=t},e.DisplayObject._tempMatrix=new e.Matrix,Object.defineProperty(e.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(e.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),e.DisplayObjectContainer=function(){e.DisplayObject.call(this),this.children=[]},e.DisplayObjectContainer.prototype=Object.create(e.DisplayObject.prototype),e.DisplayObjectContainer.prototype.constructor=e.DisplayObjectContainer,Object.defineProperty(e.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}}),Object.defineProperty(e.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}),e.DisplayObjectContainer.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},e.DisplayObjectContainer.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.stage&&t.setStageReference(this.stage),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},e.DisplayObjectContainer.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),r=this.getChildIndex(e);if(0>i||0>r)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[i]=e,this.children[r]=t}},e.DisplayObjectContainer.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.DisplayObjectContainer.prototype.setChildIndex=function(t,e){if(0>e||e>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(t);this.children.splice(i,1),this.children.splice(e,0,t)},e.DisplayObjectContainer.prototype.getChildAt=function(t){if(0>t||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[t]},e.DisplayObjectContainer.prototype.removeChild=function(t){var e=this.children.indexOf(t);return-1!==e?this.removeChildAt(e):void 0},e.DisplayObjectContainer.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return this.stage&&e.removeStageReference(),e.parent=void 0,this.children.splice(t,1),e},e.DisplayObjectContainer.prototype.removeChildren=function(t,e){var i=t||0,r="number"==typeof e?e:this.children.length,s=r-i;if(s>0&&r>=s){for(var n=this.children.splice(i,s),a=0;a<n.length;a++){var o=n[a];this.stage&&o.removeStageReference(),o.parent=void 0}return n}if(0===s&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},e.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform()},e.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=e.DisplayObjectContainer.prototype.updateTransform,e.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return e.EmptyRectangle;for(var t,i,r,s=1/0,n=1/0,a=-1/0,o=-1/0,h=!1,l=0,u=this.children.length;u>l;l++){var c=this.children[l];c.visible&&(h=!0,t=this.children[l].getBounds(),s=s<t.x?s:t.x,n=n<t.y?n:t.y,i=t.width+t.x,r=t.height+t.y,a=a>i?a:i,o=o>r?o:r)}if(!h)return e.EmptyRectangle;var d=this._bounds;return d.x=s,d.y=n,d.width=a-s,d.height=o-n,d},e.DisplayObjectContainer.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=e.identityMatrix;for(var i=0,r=this.children.length;r>i;i++)this.children[i].updateTransform();var s=this.getBounds();return this.worldTransform=t,s},e.DisplayObjectContainer.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0);for(var e=0,i=this.children.length;i>e;e++){var r=this.children[e];r.setStageReference(t)}},e.DisplayObjectContainer.prototype.removeStageReference=function(){for(var t=0,e=this.children.length;e>t;t++){var i=this.children[t];
i.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},e.DisplayObjectContainer.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);var e,i;if(this._mask||this._filters){for(this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),t.spriteBatch.start()}else for(e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t)}},e.DisplayObjectContainer.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);this._mask&&t.maskManager.pushMask(this._mask,t);for(var e=0,i=this.children.length;i>e;e++){var r=this.children[e];r._renderCanvas(t)}this._mask&&t.maskManager.popMask(t)}},e.Sprite=function(t){e.DisplayObjectContainer.call(this),this.anchor=new e.Point,this.texture=t,this._width=0,this._height=0,this.tint=16777215,this.blendMode=e.blendModes.NORMAL,this.shader=null,t.baseTexture.hasLoaded?this.onTextureUpdate():this.texture.on("update",this.onTextureUpdate.bind(this)),this.renderable=!0},e.Sprite.prototype=Object.create(e.DisplayObjectContainer.prototype),e.Sprite.prototype.constructor=e.Sprite,Object.defineProperty(e.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(e.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),e.Sprite.prototype.setTexture=function(t){this.texture=t,this.cachedTint=16777215},e.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},e.Sprite.prototype.getBounds=function(t){var e=this.texture.frame.width,i=this.texture.frame.height,r=e*(1-this.anchor.x),s=e*-this.anchor.x,n=i*(1-this.anchor.y),a=i*-this.anchor.y,o=t||this.worldTransform,h=o.a,l=o.b,u=o.c,c=o.d,d=o.tx,p=o.ty,f=h*s+u*a+d,m=c*a+l*s+p,g=h*r+u*a+d,v=c*a+l*r+p,_=h*r+u*n+d,y=c*n+l*r+p,x=h*s+u*n+d,w=c*n+l*s+p,b=-1/0,S=-1/0,T=1/0,E=1/0;T=T>f?f:T,T=T>g?g:T,T=T>_?_:T,T=T>x?x:T,E=E>m?m:E,E=E>v?v:E,E=E>y?y:E,E=E>w?w:E,b=f>b?f:b,b=g>b?g:b,b=_>b?_:b,b=x>b?x:b,S=m>S?m:S,S=v>S?v:S,S=y>S?y:S,S=w>S?w:S;var C=this._bounds;return C.x=T,C.width=b-T,C.y=E,C.height=S-E,this._currentBounds=C,C},e.Sprite.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){var e,i;if(this._mask||this._filters){var r=t.spriteBatch;for(this._filters&&(r.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(r.stop(),t.maskManager.pushMask(this.mask,t),r.start()),r.render(this),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t);r.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),r.start()}else for(t.spriteBatch.render(this),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t)}},e.Sprite.prototype._renderCanvas=function(t){if(!(this.visible===!1||0===this.alpha||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=e.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t),this.texture.valid){var i=this.texture.baseTexture.resolution/t.resolution;t.context.globalAlpha=this.worldAlpha,t.roundPixels?t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution|0,this.worldTransform.ty*t.resolution|0):t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution,this.worldTransform.ty*t.resolution),t.smoothProperty&&t.scaleMode!==this.texture.baseTexture.scaleMode&&(t.scaleMode=this.texture.baseTexture.scaleMode,t.context[t.smoothProperty]=t.scaleMode===e.scaleModes.LINEAR);var r=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,s=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=e.CanvasTinter.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,r/i,s/i,this.texture.crop.width/i,this.texture.crop.height/i)):t.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,r/i,s/i,this.texture.crop.width/i,this.texture.crop.height/i)}for(var n=0,a=this.children.length;a>n;n++)this.children[n]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.Sprite.fromFrame=function(t){var i=e.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache'+this);return new e.Sprite(i)},e.Sprite.fromImage=function(t,i,r){var s=e.Texture.fromImage(t,i,r);return new e.Sprite(s)},e.SpriteBatch=function(t){e.DisplayObjectContainer.call(this),this.textureThing=t,this.ready=!1},e.SpriteBatch.prototype=Object.create(e.DisplayObjectContainer.prototype),e.SpriteBatch.prototype.constructor=e.SpriteBatch,e.SpriteBatch.prototype.initWebGL=function(t){this.fastSpriteBatch=new e.WebGLFastSpriteBatch(t),this.ready=!0},e.SpriteBatch.prototype.updateTransform=function(){e.DisplayObject.prototype.updateTransform.call(this)},e.SpriteBatch.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(t.gl),t.spriteBatch.stop(),t.shaderManager.setShader(t.shaderManager.fastShader),this.fastSpriteBatch.begin(this,t),this.fastSpriteBatch.render(this),t.spriteBatch.start())},e.SpriteBatch.prototype._renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.children.length){var i=t.context;i.globalAlpha=this.worldAlpha,e.DisplayObject.prototype.updateTransform.call(this);for(var r=this.worldTransform,s=!0,n=0;n<this.children.length;n++){var a=this.children[n];if(a.visible){var o=a.texture,h=o.frame;if(i.globalAlpha=this.worldAlpha*a.alpha,a.rotation%(2*Math.PI)===0)s&&(i.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),s=!1),i.drawImage(o.baseTexture.source,h.x,h.y,h.width,h.height,a.anchor.x*-h.width*a.scale.x+a.position.x+.5|0,a.anchor.y*-h.height*a.scale.y+a.position.y+.5|0,h.width*a.scale.x,h.height*a.scale.y);else{s||(s=!0),e.DisplayObject.prototype.updateTransform.call(a);var l=a.worldTransform;t.roundPixels?i.setTransform(l.a,l.b,l.c,l.d,0|l.tx,0|l.ty):i.setTransform(l.a,l.b,l.c,l.d,l.tx,l.ty),i.drawImage(o.baseTexture.source,h.x,h.y,h.width,h.height,a.anchor.x*-h.width+.5|0,a.anchor.y*-h.height+.5|0,h.width,h.height)}}}}},e.MovieClip=function(t){e.Sprite.call(this,t[0]),this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},e.MovieClip.prototype=Object.create(e.Sprite.prototype),e.MovieClip.prototype.constructor=e.MovieClip,Object.defineProperty(e.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),e.MovieClip.prototype.stop=function(){this.playing=!1},e.MovieClip.prototype.play=function(){this.playing=!0},e.MovieClip.prototype.gotoAndStop=function(t){this.playing=!1,this.currentFrame=t;var e=this.currentFrame+.5|0;this.setTexture(this.textures[e%this.textures.length])},e.MovieClip.prototype.gotoAndPlay=function(t){this.currentFrame=t,this.playing=!0},e.MovieClip.prototype.updateTransform=function(){if(e.Sprite.prototype.updateTransform.call(this),this.playing){this.currentFrame+=this.animationSpeed;var t=this.currentFrame+.5|0;this.currentFrame=this.currentFrame%this.textures.length,this.loop||t<this.textures.length?this.setTexture(this.textures[t%this.textures.length]):t>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},e.MovieClip.fromFrames=function(t){for(var i=[],r=0;r<t.length;r++)i.push(new e.Texture.fromFrame(t[r]));return new e.MovieClip(i)},e.MovieClip.fromImages=function(t){for(var i=[],r=0;r<t.length;r++)i.push(new e.Texture.fromImage(t[r]));return new e.MovieClip(i)},e.FilterBlock=function(){this.visible=!0,this.renderable=!0},e.FilterBlock.prototype.constructor=e.FilterBlock,e.Text=function(t,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,e.Sprite.call(this,e.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(i)},e.Text.prototype=Object.create(e.Sprite.prototype),e.Text.prototype.constructor=e.Text,Object.defineProperty(e.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(e.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),e.Text.prototype.setStyle=function(t){t=t||{},t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowAngle=t.dropShadowAngle||Math.PI/6,t.dropShadowDistance=t.dropShadowDistance||4,t.dropShadowColor=t.dropShadowColor||"black",this.style=t,this.dirty=!0},e.Text.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},e.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this.resolution,this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var e=t.split(/(?:\r\n|\r|\n)/),i=[],r=0,s=this.determineFontProperties(this.style.font),n=0;n<e.length;n++){var a=this.context.measureText(e[n]).width;i[n]=a,r=Math.max(r,a)}var o=r+this.style.strokeThickness;this.style.dropShadow&&(o+=this.style.dropShadowDistance),this.canvas.width=(o+this.context.lineWidth)*this.resolution;var h=s.fontSize+this.style.strokeThickness,l=h*e.length;this.style.dropShadow&&(l+=this.style.dropShadowDistance),this.canvas.height=l*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic";var u,c;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var d=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,p=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(n=0;n<e.length;n++)u=this.style.strokeThickness/2,c=this.style.strokeThickness/2+n*h+s.ascent,"right"===this.style.align?u+=r-i[n]:"center"===this.style.align&&(u+=(r-i[n])/2),this.style.fill&&this.context.fillText(e[n],u+d,c+p)}for(this.context.fillStyle=this.style.fill,n=0;n<e.length;n++)u=this.style.strokeThickness/2,c=this.style.strokeThickness/2+n*h+s.ascent,"right"===this.style.align?u+=r-i[n]:"center"===this.style.align&&(u+=(r-i[n])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(e[n],u,c),this.style.fill&&this.context.fillText(e[n],u,c);this.updateTexture()},e.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.texture.baseTexture.dirty()},e.Text.prototype._renderWebGL=function(t){this.dirty&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),e.Sprite.prototype._renderWebGL.call(this,t)},e.Text.prototype._renderCanvas=function(t){this.dirty&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),e.Sprite.prototype._renderCanvas.call(this,t)},e.Text.prototype.determineFontProperties=function(t){var i=e.Text.fontPropertiesCache[t];if(!i){i={};var r=e.Text.fontPropertiesCanvas,s=e.Text.fontPropertiesContext;s.font=t;var n=Math.ceil(s.measureText("|Mq").width),a=Math.ceil(s.measureText("M").width),o=2*a;a=1.4*a|0,r.width=n,r.height=o,s.fillStyle="#f00",s.fillRect(0,0,n,o),s.font=t,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText("|Mq",0,a);var h,l,u=s.getImageData(0,0,n,o).data,c=u.length,d=4*n,p=0,f=!1;for(h=0;a>h;h++){for(l=0;d>l;l+=4)if(255!==u[p+l]){f=!0;break}if(f)break;p+=d}for(i.ascent=a-h,p=c-d,f=!1,h=o;h>a;h--){for(l=0;d>l;l+=4)if(255!==u[p+l]){f=!0;break}if(f)break;p-=d}i.descent=h-a,i.fontSize=i.ascent+i.descent,e.Text.fontPropertiesCache[t]=i}return i},e.Text.prototype.wordWrap=function(t){for(var e="",i=t.split("\n"),r=0;r<i.length;r++){for(var s=this.style.wordWrapWidth,n=i[r].split(" "),a=0;a<n.length;a++){var o=this.context.measureText(n[a]).width,h=o+this.context.measureText(" ").width;0===a||h>s?(a>0&&(e+="\n"),e+=n[a],s=this.style.wordWrapWidth-o):(s-=h,e+=" "+n[a])}r<i.length-1&&(e+="\n")}return e},e.Text.prototype.getBounds=function(t){return this.dirty&&(this.updateText(),this.dirty=!1),e.Sprite.prototype.getBounds.call(this,t)},e.Text.prototype.destroy=function(t){this.context=null,this.canvas=null,this.texture.destroy(void 0===t?!0:t)},e.Text.fontPropertiesCache={},e.Text.fontPropertiesCanvas=document.createElement("canvas"),e.Text.fontPropertiesContext=e.Text.fontPropertiesCanvas.getContext("2d"),e.BitmapText=function(t,i){e.DisplayObjectContainer.call(this),this.textWidth=0,this.textHeight=0,this._pool=[],this.setText(t),this.setStyle(i),this.updateText(),this.dirty=!1},e.BitmapText.prototype=Object.create(e.DisplayObjectContainer.prototype),e.BitmapText.prototype.constructor=e.BitmapText,e.BitmapText.prototype.setText=function(t){this.text=t||" ",this.dirty=!0},e.BitmapText.prototype.setStyle=function(t){t=t||{},t.align=t.align||"left",this.style=t;var i=t.font.split(" ");this.fontName=i[i.length-1],this.fontSize=i.length>=2?parseInt(i[i.length-2],10):e.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=t.tint},e.BitmapText.prototype.updateText=function(){for(var t=e.BitmapText.fonts[this.fontName],i=new e.Point,r=null,s=[],n=0,a=[],o=0,h=this.fontSize/t.size,l=0;l<this.text.length;l++){var u=this.text.charCodeAt(l);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(l)))a.push(i.x),n=Math.max(n,i.x),o++,i.x=0,i.y+=t.lineHeight,r=null;else{var c=t.chars[u];c&&(r&&c.kerning[r]&&(i.x+=c.kerning[r]),s.push({texture:c.texture,line:o,charCode:u,position:new e.Point(i.x+c.xOffset,i.y+c.yOffset)}),i.x+=c.xAdvance,r=u)}}a.push(i.x),n=Math.max(n,i.x);var d=[];for(l=0;o>=l;l++){var p=0;"right"===this.style.align?p=n-a[l]:"center"===this.style.align&&(p=(n-a[l])/2),d.push(p)}var f=this.children.length,m=s.length,g=this.tint||16777215;for(l=0;m>l;l++){var v=f>l?this.children[l]:this._pool.pop();v?v.setTexture(s[l].texture):v=new e.Sprite(s[l].texture),v.position.x=(s[l].position.x+d[s[l].line])*h,v.position.y=s[l].position.y*h,v.scale.x=v.scale.y=h,v.tint=g,v.parent||this.addChild(v)}for(;this.children.length>m;){var _=this.getChildAt(this.children.length-1);this._pool.push(_),this.removeChild(_)}this.textWidth=n*h,this.textHeight=(i.y+t.lineHeight)*h},e.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),e.DisplayObjectContainer.prototype.updateTransform.call(this)},e.BitmapText.fonts={},e.InteractionData=function(){this.global=new e.Point,this.target=null,this.originalEvent=null},e.InteractionData.prototype.getLocalPosition=function(t,i){var r=t.worldTransform,s=this.global,n=r.a,a=r.c,o=r.tx,h=r.b,l=r.d,u=r.ty,c=1/(n*l+a*-h);return i=i||new e.Point,i.x=l*c*s.x+-a*c*s.y+(u*a-o*l)*c,i.y=n*c*s.y+-h*c*s.x+(-u*n+o*h)*c,i},e.InteractionData.prototype.constructor=e.InteractionData,e.InteractionManager=function(t){this.stage=t,this.mouse=new e.InteractionData,this.touches={},this.tempPoint=new e.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1,this.resolution=1},e.InteractionManager.prototype.constructor=e.InteractionManager,e.InteractionManager.prototype.collectInteractiveSprite=function(t,e){for(var i=t.children,r=i.length,s=r-1;s>=0;s--){var n=i[s];n._interactive?(e.interactiveChildren=!0,this.interactiveItems.push(n),n.children.length>0&&this.collectInteractiveSprite(n,n)):(n.__iParent=null,n.children.length>0&&this.collectInteractiveSprite(n,e))}},e.InteractionManager.prototype.setTarget=function(t){this.target=t,this.resolution=t.resolution,null===this.interactionDOMElement&&this.setTargetDomElement(t.view)},e.InteractionManager.prototype.setTargetDomElement=function(t){this.removeEvents(),window.navigator.msPointerEnabled&&(t.style["-ms-content-zooming"]="none",t.style["-ms-touch-action"]="none"),this.interactionDOMElement=t,t.addEventListener("mousemove",this.onMouseMove,!0),t.addEventListener("mousedown",this.onMouseDown,!0),t.addEventListener("mouseout",this.onMouseOut,!0),t.addEventListener("touchstart",this.onTouchStart,!0),t.addEventListener("touchend",this.onTouchEnd,!0),t.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0)},e.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))},e.InteractionManager.prototype.update=function(){if(this.target){var t=Date.now(),i=t-this.last;if(i=i*e.INTERACTION_FREQUENCY/1e3,!(1>i)){this.last=t;var r=0;this.dirty&&this.rebuildInteractiveGraph();var s=this.interactiveItems.length,n="inherit",a=!1;for(r=0;s>r;r++){var o=this.interactiveItems[r];o.__hit=this.hitTest(o,this.mouse),this.mouse.target=o,o.__hit&&!a?(o.buttonMode&&(n=o.defaultCursor),o.interactiveChildren||(a=!0),o.__isOver||(o.mouseover&&o.mouseover(this.mouse),o.__isOver=!0)):o.__isOver&&(o.mouseout&&o.mouseout(this.mouse),o.__isOver=!1)}this.currentCursorStyle!==n&&(this.currentCursorStyle=n,this.interactionDOMElement.style.cursor=n)}}},e.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var t=this.interactiveItems.length,e=0;t>e;e++)this.interactiveItems[e].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},e.InteractionManager.prototype.onMouseMove=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;var e=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(t.clientX-e.left)*(this.target.width/e.width)/this.resolution,this.mouse.global.y=(t.clientY-e.top)*(this.target.height/e.height)/this.resolution;for(var i=this.interactiveItems.length,r=0;i>r;r++){var s=this.interactiveItems[r];s.mousemove&&s.mousemove(this.mouse)}},e.InteractionManager.prototype.onMouseDown=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t,e.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();for(var i=this.interactiveItems.length,r=this.mouse.originalEvent,s=2===r.button||3===r.which,n=s?"rightdown":"mousedown",a=s?"rightclick":"click",o=s?"__rightIsDown":"__mouseIsDown",h=s?"__isRightDown":"__isDown",l=0;i>l;l++){var u=this.interactiveItems[l];if((u[n]||u[a])&&(u[o]=!0,u.__hit=this.hitTest(u,this.mouse),u.__hit&&(u[n]&&u[n](this.mouse),u[h]=!0,!u.interactiveChildren)))break}},e.InteractionManager.prototype.onMouseOut=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;var e=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var i=0;e>i;i++){var r=this.interactiveItems[i];r.__isOver&&(this.mouse.target=r,r.mouseout&&r.mouseout(this.mouse),r.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},e.InteractionManager.prototype.onMouseUp=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;for(var e=this.interactiveItems.length,i=!1,r=this.mouse.originalEvent,s=2===r.button||3===r.which,n=s?"rightup":"mouseup",a=s?"rightclick":"click",o=s?"rightupoutside":"mouseupoutside",h=s?"__isRightDown":"__isDown",l=0;e>l;l++){var u=this.interactiveItems[l];(u[a]||u[n]||u[o])&&(u.__hit=this.hitTest(u,this.mouse),u.__hit&&!i?(u[n]&&u[n](this.mouse),u[h]&&u[a]&&u[a](this.mouse),u.interactiveChildren||(i=!0)):u[h]&&u[o]&&u[o](this.mouse),u[h]=!1)}},e.InteractionManager.prototype.hitTest=function(t,i){var r=i.global;if(!t.worldVisible)return!1;var s,n=t.worldTransform,a=n.a,o=n.b,h=n.c,l=n.tx,u=n.d,c=n.ty,d=1/(a*u+h*-o),p=u*d*r.x+-h*d*r.y+(c*h-l*u)*d,f=a*d*r.y+-o*d*r.x+(-c*a+l*o)*d;if(i.target=t,t.hitArea&&t.hitArea.contains)return t.hitArea.contains(p,f)?(i.target=t,!0):!1;if(t instanceof e.Sprite){var m,g=t.texture.frame.width,v=t.texture.frame.height,_=-g*t.anchor.x;if(p>_&&_+g>p&&(m=-v*t.anchor.y,f>m&&m+v>f))return i.target=t,!0}else if(t instanceof e.Graphics){var y=t.graphicsData;for(s=0;s<y.length;s++){var x=y[s];if(x.fill&&x.shape&&x.shape.contains(p,f))return i.target=t,!0}}var w=t.children.length;for(s=0;w>s;s++){var b=t.children[s],S=this.hitTest(b,i);if(S)return i.target=t,!0}return!1},e.InteractionManager.prototype.onTouchMove=function(t){this.dirty&&this.rebuildInteractiveGraph();var e,i=this.interactionDOMElement.getBoundingClientRect(),r=t.changedTouches,s=0;for(s=0;s<r.length;s++){var n=r[s];e=this.touches[n.identifier],e.originalEvent=t,e.global.x=(n.clientX-i.left)*(this.target.width/i.width)/this.resolution,e.global.y=(n.clientY-i.top)*(this.target.height/i.height)/this.resolution,!navigator.isCocoonJS||i.left||i.top||t.target.style.width||t.target.style.height||(e.global.x=n.clientX,e.global.y=n.clientY);for(var a=0;a<this.interactiveItems.length;a++){var o=this.interactiveItems[a];o.touchmove&&o.__touchData&&o.__touchData[n.identifier]&&o.touchmove(e)}}},e.InteractionManager.prototype.onTouchStart=function(t){this.dirty&&this.rebuildInteractiveGraph();var i=this.interactionDOMElement.getBoundingClientRect();e.AUTO_PREVENT_DEFAULT&&t.preventDefault();for(var r=t.changedTouches,s=0;s<r.length;s++){var n=r[s],a=this.pool.pop();a||(a=new e.InteractionData),a.originalEvent=t,this.touches[n.identifier]=a,a.global.x=(n.clientX-i.left)*(this.target.width/i.width)/this.resolution,a.global.y=(n.clientY-i.top)*(this.target.height/i.height)/this.resolution,!navigator.isCocoonJS||i.left||i.top||t.target.style.width||t.target.style.height||(a.global.x=n.clientX,a.global.y=n.clientY);for(var o=this.interactiveItems.length,h=0;o>h;h++){var l=this.interactiveItems[h];if((l.touchstart||l.tap)&&(l.__hit=this.hitTest(l,a),l.__hit&&(l.touchstart&&l.touchstart(a),l.__isDown=!0,l.__touchData=l.__touchData||{},l.__touchData[n.identifier]=a,!l.interactiveChildren)))break}}},e.InteractionManager.prototype.onTouchEnd=function(t){this.dirty&&this.rebuildInteractiveGraph();for(var e=this.interactionDOMElement.getBoundingClientRect(),i=t.changedTouches,r=0;r<i.length;r++){var s=i[r],n=this.touches[s.identifier],a=!1;n.global.x=(s.clientX-e.left)*(this.target.width/e.width)/this.resolution,n.global.y=(s.clientY-e.top)*(this.target.height/e.height)/this.resolution,!navigator.isCocoonJS||e.left||e.top||t.target.style.width||t.target.style.height||(n.global.x=s.clientX,n.global.y=s.clientY);for(var o=this.interactiveItems.length,h=0;o>h;h++){var l=this.interactiveItems[h];l.__touchData&&l.__touchData[s.identifier]&&(l.__hit=this.hitTest(l,l.__touchData[s.identifier]),n.originalEvent=t,(l.touchend||l.tap)&&(l.__hit&&!a?(l.touchend&&l.touchend(n),l.__isDown&&l.tap&&l.tap(n),l.interactiveChildren||(a=!0)):l.__isDown&&l.touchendoutside&&l.touchendoutside(n),l.__isDown=!1),l.__touchData[s.identifier]=null)}this.pool.push(n),this.touches[s.identifier]=null}},e.Stage=function(t){e.DisplayObjectContainer.call(this),this.worldTransform=new e.Matrix,this.interactive=!0,this.interactionManager=new e.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new e.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(t)},e.Stage.prototype=Object.create(e.DisplayObjectContainer.prototype),e.Stage.prototype.constructor=e.Stage,e.Stage.prototype.setInteractionDelegate=function(t){this.interactionManager.setTargetDomElement(t)},e.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},e.Stage.prototype.setBackgroundColor=function(t){this.backgroundColor=t||0,this.backgroundColorSplit=e.hex2rgb(this.backgroundColor);var i=this.backgroundColor.toString(16);i="000000".substr(0,6-i.length)+i,this.backgroundColorString="#"+i},e.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global},function(t){for(var e=0,i=["ms","moz","webkit","o"],r=0;r<i.length&&!t.requestAnimationFrame;++r)t.requestAnimationFrame=t[i[r]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[i[r]+"CancelAnimationFrame"]||t[i[r]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(i){var r=(new Date).getTime(),s=Math.max(0,16-(r-e)),n=t.setTimeout(function(){i(r+s)},s);return e=r+s,n}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)}),t.requestAnimFrame=t.requestAnimationFrame}(this),e.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},e.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){return function(t){function e(){for(var r=arguments.length,n=new Array(r);r--;)n[r]=arguments[r];return n=s.concat(n),i.apply(this instanceof e?this:t,n)}var i=this,r=arguments.length-1,s=[];if(r>0)for(s.length=r;r--;)s[r]=arguments[r+1];if("function"!=typeof i)throw new TypeError;return e.prototype=function n(t){return t&&(n.prototype=t),this instanceof n?void 0:new n}(i.prototype),e}}()),e.AjaxRequest=function(){var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var e=0;e<t.length;e++)try{return new window.ActiveXObject(t[e])}catch(i){}},e.canUseNewCanvasBlendModes=function(){if("undefined"==typeof document)return!1;var t=document.createElement("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="#000",e.fillRect(0,0,1,1),e.globalCompositeOperation="multiply",e.fillStyle="#fff",e.fillRect(0,0,1,1),0===e.getImageData(0,0,1,1).data[0]},e.getNextPowerOfTwo=function(t){if(t>0&&0===(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},e.EventTarget={call:function(t){t&&(t=t.prototype||t,e.EventTarget.mixin(t))},mixin:function(t){t.listeners=function(t){return this._listeners=this._listeners||{},this._listeners[t]?this._listeners[t].slice():[]},t.emit=t.dispatchEvent=function(t,i){if(this._listeners=this._listeners||{},"object"==typeof t&&(i=t,t=t.type),i&&i.__isEventObject===!0||(i=new e.Event(this,t,i)),this._listeners&&this._listeners[t]){var r,s=this._listeners[t].slice(0),n=s.length,a=s[0];for(r=0;n>r;a=s[++r])if(a.call(this,i),i.stoppedImmediate)return this;if(i.stopped)return this}return this.parent&&this.parent.emit&&this.parent.emit.call(this.parent,t,i),this},t.on=t.addEventListener=function(t,e){return this._listeners=this._listeners||{},(this._listeners[t]=this._listeners[t]||[]).push(e),this},t.once=function(t,e){function i(){e.apply(r.off(t,i),arguments)}this._listeners=this._listeners||{};var r=this;return i._originalHandler=e,this.on(t,i)},t.off=t.removeEventListener=function(t,e){if(this._listeners=this._listeners||{},!this._listeners[t])return this;for(var i=this._listeners[t],r=e?i.length:0;r-->0;)(i[r]===e||i[r]._originalHandler===e)&&i.splice(r,1);return 0===i.length&&delete this._listeners[t],this},t.removeAllListeners=function(t){return this._listeners=this._listeners||{},this._listeners[t]?(delete this._listeners[t],this):this}}},e.Event=function(t,e,i){this.__isEventObject=!0,this.stopped=!1,this.stoppedImmediate=!1,this.target=t,this.type=e,this.data=i,this.content=i,this.timeStamp=Date.now()},e.Event.prototype.stopPropagation=function(){this.stopped=!0},e.Event.prototype.stopImmediatePropagation=function(){this.stoppedImmediate=!0},e.autoDetectRenderer=function(t,i,r){t||(t=800),i||(i=600);var s=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}();return s?new e.WebGLRenderer(t,i,r):new e.CanvasRenderer(t,i,r)},e.autoDetectRecommendedRenderer=function(t,i,r){t||(t=800),i||(i=600);var s=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}(),n=/Android/i.test(navigator.userAgent);return s&&!n?new e.WebGLRenderer(t,i,r):new e.CanvasRenderer(t,i,r)},e.PolyK={},e.PolyK.Triangulate=function(t){var i=!0,r=t.length>>1;if(3>r)return[];for(var s=[],n=[],a=0;r>a;a++)n.push(a);a=0;for(var o=r;o>3;){var h=n[(a+0)%o],l=n[(a+1)%o],u=n[(a+2)%o],c=t[2*h],d=t[2*h+1],p=t[2*l],f=t[2*l+1],m=t[2*u],g=t[2*u+1],v=!1;if(e.PolyK._convex(c,d,p,f,m,g,i)){v=!0;for(var _=0;o>_;_++){var y=n[_];if(y!==h&&y!==l&&y!==u&&e.PolyK._PointInTriangle(t[2*y],t[2*y+1],c,d,p,f,m,g)){v=!1;break}}}if(v)s.push(h,l,u),n.splice((a+1)%o,1),o--,a=0;else if(a++>3*o){if(!i)return null;for(s=[],n=[],a=0;r>a;a++)n.push(a);a=0,o=r,i=!1}}return s.push(n[0],n[1],n[2]),s},e.PolyK._PointInTriangle=function(t,e,i,r,s,n,a,o){var h=a-i,l=o-r,u=s-i,c=n-r,d=t-i,p=e-r,f=h*h+l*l,m=h*u+l*c,g=h*d+l*p,v=u*u+c*c,_=u*d+c*p,y=1/(f*v-m*m),x=(v*g-m*_)*y,w=(f*_-m*g)*y;return x>=0&&w>=0&&1>x+w},e.PolyK._convex=function(t,e,i,r,s,n,a){return(e-r)*(s-i)+(i-t)*(n-r)>=0===a},e.initDefaultShaders=function(){},e.CompileVertexShader=function(t,i){return e._CompileShader(t,i,t.VERTEX_SHADER)},e.CompileFragmentShader=function(t,i){return e._CompileShader(t,i,t.FRAGMENT_SHADER)},e._CompileShader=function(t,e,i){var r=e.join("\n"),s=t.createShader(i);return t.shaderSource(s,r),t.compileShader(s),t.getShaderParameter(s,t.COMPILE_STATUS)?s:(window.console.log(t.getShaderInfoLog(s)),null)},e.compileProgram=function(t,i,r){var s=e.CompileFragmentShader(t,r),n=e.CompileVertexShader(t,i),a=t.createProgram();return t.attachShader(a,n),t.attachShader(a,s),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||window.console.log("Could not initialise shaders"),a
},e.PixiShader=function(t){this._UID=e._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},e.PixiShader.prototype.constructor=e.PixiShader,e.PixiShader.prototype.init=function(){var t=this.gl,i=e.compileProgram(t,this.vertexSrc||e.PixiShader.defaultVertexSrc,this.fragmentSrc);t.useProgram(i),this.uSampler=t.getUniformLocation(i,"uSampler"),this.projectionVector=t.getUniformLocation(i,"projectionVector"),this.offsetVector=t.getUniformLocation(i,"offsetVector"),this.dimensions=t.getUniformLocation(i,"dimensions"),this.aVertexPosition=t.getAttribLocation(i,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(i,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(i,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var r in this.uniforms)this.uniforms[r].uniformLocation=t.getUniformLocation(i,r);this.initUniforms(),this.program=i},e.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var i in this.uniforms){t=this.uniforms[i];var r=t.type;"sampler2D"===r?(t._init=!1,null!==t.value&&this.initSampler2D(t)):"mat2"===r||"mat3"===r||"mat4"===r?(t.glMatrix=!0,t.glValueLength=1,"mat2"===r?t.glFunc=e.uniformMatrix2fv:"mat3"===r?t.glFunc=e.uniformMatrix3fv:"mat4"===r&&(t.glFunc=e.uniformMatrix4fv)):(t.glFunc=e["uniform"+r],t.glValueLength="2f"===r||"2i"===r?2:"3f"===r||"3i"===r?3:"4f"===r||"4i"===r?4:1)}},e.PixiShader.prototype.initSampler2D=function(t){if(t.value&&t.value.baseTexture&&t.value.baseTexture.hasLoaded){var e=this.gl;if(e.activeTexture(e["TEXTURE"+this.textureCount]),e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]),t.textureData){var i=t.textureData,r=i.magFilter?i.magFilter:e.LINEAR,s=i.minFilter?i.minFilter:e.LINEAR,n=i.wrapS?i.wrapS:e.CLAMP_TO_EDGE,a=i.wrapT?i.wrapT:e.CLAMP_TO_EDGE,o=i.luminance?e.LUMINANCE:e.RGBA;if(i.repeat&&(n=e.REPEAT,a=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var h=i.width?i.width:512,l=i.height?i.height:2,u=i.border?i.border:0;e.texImage2D(e.TEXTURE_2D,0,o,h,l,u,o,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,o,e.RGBA,e.UNSIGNED_BYTE,t.value.baseTexture.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,a)}e.uniform1i(t.uniformLocation,this.textureCount),t._init=!0,this.textureCount++}},e.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var t,i=this.gl;for(var r in this.uniforms)t=this.uniforms[r],1===t.glValueLength?t.glMatrix===!0?t.glFunc.call(i,t.uniformLocation,t.transpose,t.value):t.glFunc.call(i,t.uniformLocation,t.value):2===t.glValueLength?t.glFunc.call(i,t.uniformLocation,t.value.x,t.value.y):3===t.glValueLength?t.glFunc.call(i,t.uniformLocation,t.value.x,t.value.y,t.value.z):4===t.glValueLength?t.glFunc.call(i,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w):"sampler2D"===t.type&&(t._init?(i.activeTexture(i["TEXTURE"+this.textureCount]),t.value.baseTexture._dirty[i.id]?e.instances[i.id].updateTexture(t.value.baseTexture):i.bindTexture(i.TEXTURE_2D,t.value.baseTexture._glTextures[i.id]),i.uniform1i(t.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(t))},e.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},e.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;","   vColor = vec4(color * aColor.x, aColor.x);","}"],e.PixiFastShader=function(t){this._UID=e._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},e.PixiFastShader.prototype.constructor=e.PixiFastShader,e.PixiFastShader.prototype.init=function(){var t=this.gl,i=e.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(i),this.uSampler=t.getUniformLocation(i,"uSampler"),this.projectionVector=t.getUniformLocation(i,"projectionVector"),this.offsetVector=t.getUniformLocation(i,"offsetVector"),this.dimensions=t.getUniformLocation(i,"dimensions"),this.uMatrix=t.getUniformLocation(i,"uMatrix"),this.aVertexPosition=t.getAttribLocation(i,"aVertexPosition"),this.aPositionCoord=t.getAttribLocation(i,"aPositionCoord"),this.aScale=t.getAttribLocation(i,"aScale"),this.aRotation=t.getAttribLocation(i,"aRotation"),this.aTextureCoord=t.getAttribLocation(i,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(i,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=i},e.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},e.StripShader=function(t){this._UID=e._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},e.StripShader.prototype.constructor=e.StripShader,e.StripShader.prototype.init=function(){var t=this.gl,i=e.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(i),this.uSampler=t.getUniformLocation(i,"uSampler"),this.projectionVector=t.getUniformLocation(i,"projectionVector"),this.offsetVector=t.getUniformLocation(i,"offsetVector"),this.colorAttribute=t.getAttribLocation(i,"aColor"),this.aVertexPosition=t.getAttribLocation(i,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(i,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=t.getUniformLocation(i,"translationMatrix"),this.alpha=t.getUniformLocation(i,"alpha"),this.program=i},e.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},e.PrimitiveShader=function(t){this._UID=e._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},e.PrimitiveShader.prototype.constructor=e.PrimitiveShader,e.PrimitiveShader.prototype.init=function(){var t=this.gl,i=e.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(i),this.projectionVector=t.getUniformLocation(i,"projectionVector"),this.offsetVector=t.getUniformLocation(i,"offsetVector"),this.tintColor=t.getUniformLocation(i,"tint"),this.aVertexPosition=t.getAttribLocation(i,"aVertexPosition"),this.colorAttribute=t.getAttribLocation(i,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(i,"translationMatrix"),this.alpha=t.getUniformLocation(i,"alpha"),this.program=i},e.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},e.ComplexPrimitiveShader=function(t){this._UID=e._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},e.ComplexPrimitiveShader.prototype.constructor=e.ComplexPrimitiveShader,e.ComplexPrimitiveShader.prototype.init=function(){var t=this.gl,i=e.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(i),this.projectionVector=t.getUniformLocation(i,"projectionVector"),this.offsetVector=t.getUniformLocation(i,"offsetVector"),this.tintColor=t.getUniformLocation(i,"tint"),this.color=t.getUniformLocation(i,"color"),this.aVertexPosition=t.getAttribLocation(i,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(i,"translationMatrix"),this.alpha=t.getUniformLocation(i,"alpha"),this.program=i},e.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},e.WebGLGraphics=function(){},e.WebGLGraphics.renderGraphics=function(t,i){var r,s=i.gl,n=i.projection,a=i.offset,o=i.shaderManager.primitiveShader;t.dirty&&e.WebGLGraphics.updateGraphics(t,s);for(var h=t._webGL[s.id],l=0;l<h.data.length;l++)1===h.data[l].mode?(r=h.data[l],i.stencilManager.pushStencil(t,r,i),s.drawElements(s.TRIANGLE_FAN,4,s.UNSIGNED_SHORT,2*(r.indices.length-4)),i.stencilManager.popStencil(t,r,i)):(r=h.data[l],i.shaderManager.setShader(o),o=i.shaderManager.primitiveShader,s.uniformMatrix3fv(o.translationMatrix,!1,t.worldTransform.toArray(!0)),s.uniform2f(o.projectionVector,n.x,-n.y),s.uniform2f(o.offsetVector,-a.x,-a.y),s.uniform3fv(o.tintColor,e.hex2rgb(t.tint)),s.uniform1f(o.alpha,t.worldAlpha),s.bindBuffer(s.ARRAY_BUFFER,r.buffer),s.vertexAttribPointer(o.aVertexPosition,2,s.FLOAT,!1,24,0),s.vertexAttribPointer(o.colorAttribute,4,s.FLOAT,!1,24,8),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,r.indexBuffer),s.drawElements(s.TRIANGLE_STRIP,r.indices.length,s.UNSIGNED_SHORT,0))},e.WebGLGraphics.updateGraphics=function(t,i){var r=t._webGL[i.id];r||(r=t._webGL[i.id]={lastIndex:0,data:[],gl:i}),t.dirty=!1;var s;if(t.clearDirty){for(t.clearDirty=!1,s=0;s<r.data.length;s++){var n=r.data[s];n.reset(),e.WebGLGraphics.graphicsDataPool.push(n)}r.data=[],r.lastIndex=0}var a;for(s=r.lastIndex;s<t.graphicsData.length;s++){var o=t.graphicsData[s];if(o.type===e.Graphics.POLY){if(o.points=o.shape.points.slice(),o.shape.closed&&o.points[0]!==o.points[o.points.length-2]&&o.points[1]!==o.points[o.points.length-1]&&o.points.push(o.points[0],o.points[1]),o.fill&&o.points.length>=6)if(o.points.length<12){a=e.WebGLGraphics.switchMode(r,0);var h=e.WebGLGraphics.buildPoly(o,a);h||(a=e.WebGLGraphics.switchMode(r,1),e.WebGLGraphics.buildComplexPoly(o,a))}else a=e.WebGLGraphics.switchMode(r,1),e.WebGLGraphics.buildComplexPoly(o,a);o.lineWidth>0&&(a=e.WebGLGraphics.switchMode(r,0),e.WebGLGraphics.buildLine(o,a))}else a=e.WebGLGraphics.switchMode(r,0),o.type===e.Graphics.RECT?e.WebGLGraphics.buildRectangle(o,a):o.type===e.Graphics.CIRC||o.type===e.Graphics.ELIP?e.WebGLGraphics.buildCircle(o,a):o.type===e.Graphics.RREC&&e.WebGLGraphics.buildRoundedRectangle(o,a);r.lastIndex++}for(s=0;s<r.data.length;s++)a=r.data[s],a.dirty&&a.upload()},e.WebGLGraphics.switchMode=function(t,i){var r;return t.data.length?(r=t.data[t.data.length-1],(r.mode!==i||1===i)&&(r=e.WebGLGraphics.graphicsDataPool.pop()||new e.WebGLGraphicsData(t.gl),r.mode=i,t.data.push(r))):(r=e.WebGLGraphics.graphicsDataPool.pop()||new e.WebGLGraphicsData(t.gl),r.mode=i,t.data.push(r)),r.dirty=!0,r},e.WebGLGraphics.buildRectangle=function(t,i){var r=t.shape,s=r.x,n=r.y,a=r.width,o=r.height;if(t.fill){var h=e.hex2rgb(t.fillColor),l=t.fillAlpha,u=h[0]*l,c=h[1]*l,d=h[2]*l,p=i.points,f=i.indices,m=p.length/6;p.push(s,n),p.push(u,c,d,l),p.push(s+a,n),p.push(u,c,d,l),p.push(s,n+o),p.push(u,c,d,l),p.push(s+a,n+o),p.push(u,c,d,l),f.push(m,m,m+1,m+2,m+3,m+3)}if(t.lineWidth){var g=t.points;t.points=[s,n,s+a,n,s+a,n+o,s,n+o,s,n],e.WebGLGraphics.buildLine(t,i),t.points=g}},e.WebGLGraphics.buildRoundedRectangle=function(t,i){var r=t.shape,s=r.x,n=r.y,a=r.width,o=r.height,h=r.radius,l=[];if(l.push(s,n+h),l=l.concat(e.WebGLGraphics.quadraticBezierCurve(s,n+o-h,s,n+o,s+h,n+o)),l=l.concat(e.WebGLGraphics.quadraticBezierCurve(s+a-h,n+o,s+a,n+o,s+a,n+o-h)),l=l.concat(e.WebGLGraphics.quadraticBezierCurve(s+a,n+h,s+a,n,s+a-h,n)),l=l.concat(e.WebGLGraphics.quadraticBezierCurve(s+h,n,s,n,s,n+h)),t.fill){var u=e.hex2rgb(t.fillColor),c=t.fillAlpha,d=u[0]*c,p=u[1]*c,f=u[2]*c,m=i.points,g=i.indices,v=m.length/6,_=e.PolyK.Triangulate(l),y=0;for(y=0;y<_.length;y+=3)g.push(_[y]+v),g.push(_[y]+v),g.push(_[y+1]+v),g.push(_[y+2]+v),g.push(_[y+2]+v);for(y=0;y<l.length;y++)m.push(l[y],l[++y],d,p,f,c)}if(t.lineWidth){var x=t.points;t.points=l,e.WebGLGraphics.buildLine(t,i),t.points=x}},e.WebGLGraphics.quadraticBezierCurve=function(t,e,i,r,s,n){function a(t,e,i){var r=e-t;return t+r*i}for(var o,h,l,u,c,d,p=20,f=[],m=0,g=0;p>=g;g++)m=g/p,o=a(t,i,m),h=a(e,r,m),l=a(i,s,m),u=a(r,n,m),c=a(o,l,m),d=a(h,u,m),f.push(c,d);return f},e.WebGLGraphics.buildCircle=function(t,i){var r,s,n=t.shape,a=n.x,o=n.y;t.type===e.Graphics.CIRC?(r=n.radius,s=n.radius):(r=n.width,s=n.height);var h=40,l=2*Math.PI/h,u=0;if(t.fill){var c=e.hex2rgb(t.fillColor),d=t.fillAlpha,p=c[0]*d,f=c[1]*d,m=c[2]*d,g=i.points,v=i.indices,_=g.length/6;for(v.push(_),u=0;h+1>u;u++)g.push(a,o,p,f,m,d),g.push(a+Math.sin(l*u)*r,o+Math.cos(l*u)*s,p,f,m,d),v.push(_++,_++);v.push(_-1)}if(t.lineWidth){var y=t.points;for(t.points=[],u=0;h+1>u;u++)t.points.push(a+Math.sin(l*u)*r,o+Math.cos(l*u)*s);e.WebGLGraphics.buildLine(t,i),t.points=y}},e.WebGLGraphics.buildLine=function(t,i){var r=0,s=t.points;if(0!==s.length){if(t.lineWidth%2)for(r=0;r<s.length;r++)s[r]+=.5;var n=new e.Point(s[0],s[1]),a=new e.Point(s[s.length-2],s[s.length-1]);if(n.x===a.x&&n.y===a.y){s=s.slice(),s.pop(),s.pop(),a=new e.Point(s[s.length-2],s[s.length-1]);var o=a.x+.5*(n.x-a.x),h=a.y+.5*(n.y-a.y);s.unshift(o,h),s.push(o,h)}var l,u,c,d,p,f,m,g,v,_,y,x,w,b,S,T,E,C,P,M,A,R,I,L=i.points,D=i.indices,O=s.length/2,F=s.length,B=L.length/6,j=t.lineWidth/2,N=e.hex2rgb(t.lineColor),k=t.lineAlpha,U=N[0]*k,X=N[1]*k,G=N[2]*k;for(c=s[0],d=s[1],p=s[2],f=s[3],v=-(d-f),_=c-p,I=Math.sqrt(v*v+_*_),v/=I,_/=I,v*=j,_*=j,L.push(c-v,d-_,U,X,G,k),L.push(c+v,d+_,U,X,G,k),r=1;O-1>r;r++)c=s[2*(r-1)],d=s[2*(r-1)+1],p=s[2*r],f=s[2*r+1],m=s[2*(r+1)],g=s[2*(r+1)+1],v=-(d-f),_=c-p,I=Math.sqrt(v*v+_*_),v/=I,_/=I,v*=j,_*=j,y=-(f-g),x=p-m,I=Math.sqrt(y*y+x*x),y/=I,x/=I,y*=j,x*=j,S=-_+d-(-_+f),T=-v+p-(-v+c),E=(-v+c)*(-_+f)-(-v+p)*(-_+d),C=-x+g-(-x+f),P=-y+p-(-y+m),M=(-y+m)*(-x+f)-(-y+p)*(-x+g),A=S*P-C*T,Math.abs(A)<.1?(A+=10.1,L.push(p-v,f-_,U,X,G,k),L.push(p+v,f+_,U,X,G,k)):(l=(T*M-P*E)/A,u=(C*E-S*M)/A,R=(l-p)*(l-p)+(u-f)+(u-f),R>19600?(w=v-y,b=_-x,I=Math.sqrt(w*w+b*b),w/=I,b/=I,w*=j,b*=j,L.push(p-w,f-b),L.push(U,X,G,k),L.push(p+w,f+b),L.push(U,X,G,k),L.push(p-w,f-b),L.push(U,X,G,k),F++):(L.push(l,u),L.push(U,X,G,k),L.push(p-(l-p),f-(u-f)),L.push(U,X,G,k)));for(c=s[2*(O-2)],d=s[2*(O-2)+1],p=s[2*(O-1)],f=s[2*(O-1)+1],v=-(d-f),_=c-p,I=Math.sqrt(v*v+_*_),v/=I,_/=I,v*=j,_*=j,L.push(p-v,f-_),L.push(U,X,G,k),L.push(p+v,f+_),L.push(U,X,G,k),D.push(B),r=0;F>r;r++)D.push(B++);D.push(B-1)}},e.WebGLGraphics.buildComplexPoly=function(t,i){var r=t.points.slice();if(!(r.length<6)){var s=i.indices;i.points=r,i.alpha=t.fillAlpha,i.color=e.hex2rgb(t.fillColor);for(var n,a,o=1/0,h=-1/0,l=1/0,u=-1/0,c=0;c<r.length;c+=2)n=r[c],a=r[c+1],o=o>n?n:o,h=n>h?n:h,l=l>a?a:l,u=a>u?a:u;r.push(o,l,h,l,h,u,o,u);var d=r.length/2;for(c=0;d>c;c++)s.push(c)}},e.WebGLGraphics.buildPoly=function(t,i){var r=t.points;if(!(r.length<6)){var s=i.points,n=i.indices,a=r.length/2,o=e.hex2rgb(t.fillColor),h=t.fillAlpha,l=o[0]*h,u=o[1]*h,c=o[2]*h,d=e.PolyK.Triangulate(r);if(!d)return!1;var p=s.length/6,f=0;for(f=0;f<d.length;f+=3)n.push(d[f]+p),n.push(d[f]+p),n.push(d[f+1]+p),n.push(d[f+2]+p),n.push(d[f+2]+p);for(f=0;a>f;f++)s.push(r[2*f],r[2*f+1],l,u,c,h);return!0}},e.WebGLGraphics.graphicsDataPool=[],e.WebGLGraphicsData=function(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.lastIndex=0,this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},e.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[],this.lastIndex=0},e.WebGLGraphicsData.prototype.upload=function(){var t=this.gl;this.glPoints=new e.Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndicies=new e.Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndicies,t.STATIC_DRAW),this.dirty=!1},e.glContexts=[],e.instances=[],e.WebGLRenderer=function(t,i,r){if(r)for(var s in e.defaultRenderOptions)"undefined"==typeof r[s]&&(r[s]=e.defaultRenderOptions[s]);else r=e.defaultRenderOptions;e.defaultRenderer||(e.sayHello("webGL"),e.defaultRenderer=this),this.type=e.WEBGL_RENDERER,this.resolution=r.resolution,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.preserveDrawingBuffer=r.preserveDrawingBuffer,this.clearBeforeRender=r.clearBeforeRender,this.width=t||800,this.height=i||600,this.view=r.view||document.createElement("canvas"),this.contextLostBound=this.handleContextLost.bind(this),this.contextRestoredBound=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLostBound,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredBound,!1),this._contextOptions={alpha:this.transparent,antialias:r.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer},this.projection=new e.Point,this.offset=new e.Point(0,0),this.shaderManager=new e.WebGLShaderManager,this.spriteBatch=new e.WebGLSpriteBatch,this.maskManager=new e.WebGLMaskManager,this.filterManager=new e.WebGLFilterManager,this.stencilManager=new e.WebGLStencilManager,this.blendModeManager=new e.WebGLBlendModeManager,this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,this.renderSession.renderer=this,this.renderSession.resolution=this.resolution,this.initContext(),this.mapBlendModes()},e.WebGLRenderer.prototype.constructor=e.WebGLRenderer,e.WebGLRenderer.prototype.initContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=t,!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=t.id=e.WebGLRenderer.glContextId++,e.glContexts[this.glContextId]=t,e.instances[this.glContextId]=this,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.shaderManager.setContext(t),this.spriteBatch.setContext(t),this.maskManager.setContext(t),this.filterManager.setContext(t),this.blendModeManager.setContext(t),this.stencilManager.setContext(t),this.renderSession.gl=this.gl,this.resize(this.width,this.height)},e.WebGLRenderer.prototype.render=function(t){if(!this.contextLost){this.__stage!==t&&(t.interactive&&t.interactionManager.removeEvents(),this.__stage=t),t.updateTransform();var e=this.gl;t._interactive?t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)):t._interactiveEventsAdded&&(t._interactiveEventsAdded=!1,t.interactionManager.setTarget(this)),e.viewport(0,0,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,null),this.clearBeforeRender&&(this.transparent?e.clearColor(0,0,0,0):e.clearColor(t.backgroundColorSplit[0],t.backgroundColorSplit[1],t.backgroundColorSplit[2],1),e.clear(e.COLOR_BUFFER_BIT)),this.renderDisplayObject(t,this.projection)}},e.WebGLRenderer.prototype.renderDisplayObject=function(t,i,r){this.renderSession.blendModeManager.setBlendMode(e.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.projection=i,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,r),t._renderWebGL(this.renderSession),this.spriteBatch.end()},e.WebGLRenderer.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},e.WebGLRenderer.prototype.updateTexture=function(t){if(t.hasLoaded){var i=this.gl;return t._glTextures[i.id]||(t._glTextures[i.id]=i.createTexture()),i.bindTexture(i.TEXTURE_2D,t._glTextures[i.id]),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t.source),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t.scaleMode===e.scaleModes.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t.scaleMode===e.scaleModes.LINEAR?i.LINEAR:i.NEAREST),t._powerOf2?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.REPEAT)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE)),t._dirty[i.id]=!1,t._glTextures[i.id]}},e.WebGLRenderer.prototype.handleContextLost=function(t){t.preventDefault(),this.contextLost=!0},e.WebGLRenderer.prototype.handleContextRestored=function(){this.initContext();for(var t in e.TextureCache){var i=e.TextureCache[t].baseTexture;i._glTextures=[]}this.contextLost=!1},e.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLostBound),this.view.removeEventListener("webglcontextrestored",this.contextRestoredBound),e.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},e.WebGLRenderer.prototype.mapBlendModes=function(){var t=this.gl;e.blendModesWebGL||(e.blendModesWebGL=[],e.blendModesWebGL[e.blendModes.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.ADD]=[t.SRC_ALPHA,t.DST_ALPHA],e.blendModesWebGL[e.blendModes.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.SCREEN]=[t.SRC_ALPHA,t.ONE],e.blendModesWebGL[e.blendModes.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA])},e.WebGLRenderer.glContextId=0,e.WebGLBlendModeManager=function(){this.currentBlendMode=99999},e.WebGLBlendModeManager.prototype.constructor=e.WebGLBlendModeManager,e.WebGLBlendModeManager.prototype.setContext=function(t){this.gl=t},e.WebGLBlendModeManager.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var i=e.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(i[0],i[1]),!0},e.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},e.WebGLMaskManager=function(){},e.WebGLMaskManager.prototype.constructor=e.WebGLMaskManager,e.WebGLMaskManager.prototype.setContext=function(t){this.gl=t},e.WebGLMaskManager.prototype.pushMask=function(t,i){var r=i.gl;t.dirty&&e.WebGLGraphics.updateGraphics(t,r),t._webGL[r.id].data.length&&i.stencilManager.pushStencil(t,t._webGL[r.id].data[0],i)},e.WebGLMaskManager.prototype.popMask=function(t,e){var i=this.gl;e.stencilManager.popStencil(t,t._webGL[i.id].data[0],e)},e.WebGLMaskManager.prototype.destroy=function(){this.gl=null},e.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},e.WebGLStencilManager.prototype.setContext=function(t){this.gl=t},e.WebGLStencilManager.prototype.pushStencil=function(t,e,i){var r=this.gl;this.bindGraphics(t,e,i),0===this.stencilStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(e);var s=this.count;r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),1===e.mode?(r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),this.reverse?(r.stencilFunc(r.EQUAL,255-s,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,s,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),this.reverse?r.stencilFunc(r.EQUAL,255-(s+1),255):r.stencilFunc(r.EQUAL,s+1,255),this.reverse=!this.reverse):(this.reverse?(r.stencilFunc(r.EQUAL,s,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,255-s,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,s+1,255):r.stencilFunc(r.EQUAL,255-(s+1),255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),this.count++},e.WebGLStencilManager.prototype.bindGraphics=function(t,i,r){this._currentGraphics=t;var s,n=this.gl,a=r.projection,o=r.offset;1===i.mode?(s=r.shaderManager.complexPrimitiveShader,r.shaderManager.setShader(s),n.uniformMatrix3fv(s.translationMatrix,!1,t.worldTransform.toArray(!0)),n.uniform2f(s.projectionVector,a.x,-a.y),n.uniform2f(s.offsetVector,-o.x,-o.y),n.uniform3fv(s.tintColor,e.hex2rgb(t.tint)),n.uniform3fv(s.color,i.color),n.uniform1f(s.alpha,t.worldAlpha*i.alpha),n.bindBuffer(n.ARRAY_BUFFER,i.buffer),n.vertexAttribPointer(s.aVertexPosition,2,n.FLOAT,!1,8,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,i.indexBuffer)):(s=r.shaderManager.primitiveShader,r.shaderManager.setShader(s),n.uniformMatrix3fv(s.translationMatrix,!1,t.worldTransform.toArray(!0)),n.uniform2f(s.projectionVector,a.x,-a.y),n.uniform2f(s.offsetVector,-o.x,-o.y),n.uniform3fv(s.tintColor,e.hex2rgb(t.tint)),n.uniform1f(s.alpha,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,i.buffer),n.vertexAttribPointer(s.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(s.colorAttribute,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,i.indexBuffer))},e.WebGLStencilManager.prototype.popStencil=function(t,e,i){var r=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)r.disable(r.STENCIL_TEST);else{var s=this.count;this.bindGraphics(t,e,i),r.colorMask(!1,!1,!1,!1),1===e.mode?(this.reverse=!this.reverse,this.reverse?(r.stencilFunc(r.EQUAL,255-(s+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,s+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,s,255):r.stencilFunc(r.EQUAL,255-s,255)):(this.reverse?(r.stencilFunc(r.EQUAL,s+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,255-(s+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,s,255):r.stencilFunc(r.EQUAL,255-s,255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}},e.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},e.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.stack=[]},e.WebGLShaderManager.prototype.constructor=e.WebGLShaderManager,e.WebGLShaderManager.prototype.setContext=function(t){this.gl=t,this.primitiveShader=new e.PrimitiveShader(t),this.complexPrimitiveShader=new e.ComplexPrimitiveShader(t),this.defaultShader=new e.PixiShader(t),this.fastShader=new e.PixiFastShader(t),this.stripShader=new e.StripShader(t),this.setShader(this.defaultShader)},e.WebGLShaderManager.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(e=0;e<t.length;e++){var i=t[e];this.tempAttribState[i]=!0}var r=this.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?r.enableVertexAttribArray(e):r.disableVertexAttribArray(e))},e.WebGLShaderManager.prototype.setShader=function(t){return this._currentId===t._UID?!1:(this._currentId=t._UID,this.currentShader=t,this.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},e.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null
},e.WebGLSpriteBatch=function(){this.vertSize=6,this.size=2e3;var t=4*this.size*this.vertSize,i=6*this.size;this.vertices=new e.Float32Array(t),this.indices=new e.Uint16Array(i),this.lastIndexCount=0;for(var r=0,s=0;i>r;r+=6,s+=4)this.indices[r+0]=s+0,this.indices[r+1]=s+1,this.indices[r+2]=s+2,this.indices[r+3]=s+0,this.indices[r+4]=s+2,this.indices[r+5]=s+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=new e.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])},e.WebGLSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999;var i=new e.PixiShader(t);i.fragmentSrc=this.defaultShader.fragmentSrc,i.uniforms={},i.init(),this.defaultShader.shaders[t.id]=i},e.WebGLSpriteBatch.prototype.begin=function(t){this.renderSession=t,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},e.WebGLSpriteBatch.prototype.end=function(){this.flush()},e.WebGLSpriteBatch.prototype.render=function(t){var e=t.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture);var i=e._uvs;if(i){var r,s,n,a,o=t.worldAlpha,h=t.tint,l=this.vertices,u=t.anchor.x,c=t.anchor.y;if(e.trim){var d=e.trim;s=d.x-u*d.width,r=s+e.crop.width,a=d.y-c*d.height,n=a+e.crop.height}else r=e.frame.width*(1-u),s=e.frame.width*-u,n=e.frame.height*(1-c),a=e.frame.height*-c;var p=4*this.currentBatchSize*this.vertSize,f=e.baseTexture.resolution,m=t.worldTransform,g=m.a/f,v=m.b/f,_=m.c/f,y=m.d/f,x=m.tx,w=m.ty;l[p++]=g*s+_*a+x,l[p++]=y*a+v*s+w,l[p++]=i.x0,l[p++]=i.y0,l[p++]=o,l[p++]=h,l[p++]=g*r+_*a+x,l[p++]=y*a+v*r+w,l[p++]=i.x1,l[p++]=i.y1,l[p++]=o,l[p++]=h,l[p++]=g*r+_*n+x,l[p++]=y*n+v*r+w,l[p++]=i.x2,l[p++]=i.y2,l[p++]=o,l[p++]=h,l[p++]=g*s+_*n+x,l[p++]=y*n+v*s+w,l[p++]=i.x3,l[p++]=i.y3,l[p++]=o,l[p++]=h,this.sprites[this.currentBatchSize++]=t}},e.WebGLSpriteBatch.prototype.renderTilingSprite=function(t){var i=t.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=i.baseTexture),t._uvs||(t._uvs=new e.TextureUvs);var r=t._uvs;t.tilePosition.x%=i.baseTexture.width*t.tileScaleOffset.x,t.tilePosition.y%=i.baseTexture.height*t.tileScaleOffset.y;var s=t.tilePosition.x/(i.baseTexture.width*t.tileScaleOffset.x),n=t.tilePosition.y/(i.baseTexture.height*t.tileScaleOffset.y),a=t.width/i.baseTexture.width/(t.tileScale.x*t.tileScaleOffset.x),o=t.height/i.baseTexture.height/(t.tileScale.y*t.tileScaleOffset.y);r.x0=0-s,r.y0=0-n,r.x1=1*a-s,r.y1=0-n,r.x2=1*a-s,r.y2=1*o-n,r.x3=0-s,r.y3=1*o-n;var h=t.worldAlpha,l=t.tint,u=this.vertices,c=t.width,d=t.height,p=t.anchor.x,f=t.anchor.y,m=c*(1-p),g=c*-p,v=d*(1-f),_=d*-f,y=4*this.currentBatchSize*this.vertSize,x=i.baseTexture.resolution,w=t.worldTransform,b=w.a/x,S=w.b/x,T=w.c/x,E=w.d/x,C=w.tx,P=w.ty;u[y++]=b*g+T*_+C,u[y++]=E*_+S*g+P,u[y++]=r.x0,u[y++]=r.y0,u[y++]=h,u[y++]=l,u[y++]=b*m+T*_+C,u[y++]=E*_+S*m+P,u[y++]=r.x1,u[y++]=r.y1,u[y++]=h,u[y++]=l,u[y++]=b*m+T*v+C,u[y++]=E*v+S*m+P,u[y++]=r.x2,u[y++]=r.y2,u[y++]=h,u[y++]=l,u[y++]=b*g+T*v+C,u[y++]=E*v+S*g+P,u[y++]=r.x3,u[y++]=r.y3,u[y++]=h,u[y++]=l,this.sprites[this.currentBatchSize++]=t},e.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t,i=this.gl;if(this.dirty){this.dirty=!1,i.activeTexture(i.TEXTURE0),i.bindBuffer(i.ARRAY_BUFFER,this.vertexBuffer),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t=this.defaultShader.shaders[i.id];var r=4*this.vertSize;i.vertexAttribPointer(t.aVertexPosition,2,i.FLOAT,!1,r,0),i.vertexAttribPointer(t.aTextureCoord,2,i.FLOAT,!1,r,8),i.vertexAttribPointer(t.colorAttribute,2,i.FLOAT,!1,r,16)}if(this.currentBatchSize>.5*this.size)i.bufferSubData(i.ARRAY_BUFFER,0,this.vertices);else{var s=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);i.bufferSubData(i.ARRAY_BUFFER,0,s)}for(var n,a,o,h,l=0,u=0,c=null,d=this.renderSession.blendModeManager.currentBlendMode,p=null,f=!1,m=!1,g=0,v=this.currentBatchSize;v>g;g++){if(h=this.sprites[g],n=h.texture.baseTexture,a=h.blendMode,o=h.shader||this.defaultShader,f=d!==a,m=p!==o,(c!==n||f||m)&&(this.renderBatch(c,l,u),u=g,l=0,c=n,f&&(d=a,this.renderSession.blendModeManager.setBlendMode(d)),m)){p=o,t=p.shaders[i.id],t||(t=new e.PixiShader(i),t.fragmentSrc=p.fragmentSrc,t.uniforms=p.uniforms,t.init(),p.shaders[i.id]=t),this.renderSession.shaderManager.setShader(t),t.dirty&&t.syncUniforms();var _=this.renderSession.projection;i.uniform2f(t.projectionVector,_.x,_.y);var y=this.renderSession.offset;i.uniform2f(t.offsetVector,y.x,y.y)}l++}this.renderBatch(c,l,u),this.currentBatchSize=0}},e.WebGLSpriteBatch.prototype.renderBatch=function(t,e,i){if(0!==e){var r=this.gl;t._dirty[r.id]?this.renderSession.renderer.updateTexture(t):r.bindTexture(r.TEXTURE_2D,t._glTextures[r.id]),r.drawElements(r.TRIANGLES,6*e,r.UNSIGNED_SHORT,6*i*2),this.renderSession.drawCount++}},e.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},e.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},e.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},e.WebGLFastSpriteBatch=function(t){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var i=4*this.size*this.vertSize,r=6*this.maxSize;this.vertices=new e.Float32Array(i),this.indices=new e.Uint16Array(r),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var s=0,n=0;r>s;s+=6,n+=4)this.indices[s+0]=n+0,this.indices[s+1]=n+1,this.indices[s+2]=n+2,this.indices[s+3]=n+0,this.indices[s+4]=n+2,this.indices[s+5]=n+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(t)},e.WebGLFastSpriteBatch.prototype.constructor=e.WebGLFastSpriteBatch,e.WebGLFastSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW)},e.WebGLFastSpriteBatch.prototype.begin=function(t,e){this.renderSession=e,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=t.worldTransform.toArray(!0),this.start()},e.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},e.WebGLFastSpriteBatch.prototype.render=function(t){var e=t.children,i=e[0];if(i.texture._uvs){this.currentBaseTexture=i.texture.baseTexture,i.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(i.blendMode));for(var r=0,s=e.length;s>r;r++)this.renderSprite(e[r]);this.flush()}},e.WebGLFastSpriteBatch.prototype.renderSprite=function(t){if(t.visible&&(t.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=t.texture.baseTexture,t.texture._uvs))){var e,i,r,s,n,a,o,h,l=this.vertices;if(e=t.texture._uvs,i=t.texture.frame.width,r=t.texture.frame.height,t.texture.trim){var u=t.texture.trim;n=u.x-t.anchor.x*u.width,s=n+t.texture.crop.width,o=u.y-t.anchor.y*u.height,a=o+t.texture.crop.height}else s=t.texture.frame.width*(1-t.anchor.x),n=t.texture.frame.width*-t.anchor.x,a=t.texture.frame.height*(1-t.anchor.y),o=t.texture.frame.height*-t.anchor.y;h=4*this.currentBatchSize*this.vertSize,l[h++]=n,l[h++]=o,l[h++]=t.position.x,l[h++]=t.position.y,l[h++]=t.scale.x,l[h++]=t.scale.y,l[h++]=t.rotation,l[h++]=e.x0,l[h++]=e.y1,l[h++]=t.alpha,l[h++]=s,l[h++]=o,l[h++]=t.position.x,l[h++]=t.position.y,l[h++]=t.scale.x,l[h++]=t.scale.y,l[h++]=t.rotation,l[h++]=e.x1,l[h++]=e.y1,l[h++]=t.alpha,l[h++]=s,l[h++]=a,l[h++]=t.position.x,l[h++]=t.position.y,l[h++]=t.scale.x,l[h++]=t.scale.y,l[h++]=t.rotation,l[h++]=e.x2,l[h++]=e.y2,l[h++]=t.alpha,l[h++]=n,l[h++]=a,l[h++]=t.position.x,l[h++]=t.position.y,l[h++]=t.scale.x,l[h++]=t.scale.y,l[h++]=t.rotation,l[h++]=e.x3,l[h++]=e.y3,l[h++]=t.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},e.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t=this.gl;if(this.currentBaseTexture._glTextures[t.id]||this.renderSession.renderer.updateTexture(this.currentBaseTexture,t),t.bindTexture(t.TEXTURE_2D,this.currentBaseTexture._glTextures[t.id]),this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,e)}t.drawElements(t.TRIANGLES,6*this.currentBatchSize,t.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},e.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},e.WebGLFastSpriteBatch.prototype.start=function(){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;t.uniform2f(this.shader.projectionVector,e.x,e.y),t.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var i=4*this.vertSize;t.vertexAttribPointer(this.shader.aVertexPosition,2,t.FLOAT,!1,i,0),t.vertexAttribPointer(this.shader.aPositionCoord,2,t.FLOAT,!1,i,8),t.vertexAttribPointer(this.shader.aScale,2,t.FLOAT,!1,i,16),t.vertexAttribPointer(this.shader.aRotation,1,t.FLOAT,!1,i,24),t.vertexAttribPointer(this.shader.aTextureCoord,2,t.FLOAT,!1,i,28),t.vertexAttribPointer(this.shader.colorAttribute,1,t.FLOAT,!1,i,36)},e.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},e.WebGLFilterManager.prototype.constructor=e.WebGLFilterManager,e.WebGLFilterManager.prototype.setContext=function(t){this.gl=t,this.texturePool=[],this.initShaderBuffers()},e.WebGLFilterManager.prototype.begin=function(t,e){this.renderSession=t,this.defaultShader=t.shaderManager.defaultShader;var i=this.renderSession.projection;this.width=2*i.x,this.height=2*-i.y,this.buffer=e},e.WebGLFilterManager.prototype.pushFilter=function(t){var i=this.gl,r=this.renderSession.projection,s=this.renderSession.offset;t._filterArea=t.target.filterArea||t.target.getBounds(),this.filterStack.push(t);var n=t.filterPasses[0];this.offsetX+=t._filterArea.x,this.offsetY+=t._filterArea.y;var a=this.texturePool.pop();a?a.resize(this.width,this.height):a=new e.FilterTexture(this.gl,this.width,this.height),i.bindTexture(i.TEXTURE_2D,a.texture);var o=t._filterArea,h=n.padding;o.x-=h,o.y-=h,o.width+=2*h,o.height+=2*h,o.x<0&&(o.x=0),o.width>this.width&&(o.width=this.width),o.y<0&&(o.y=0),o.height>this.height&&(o.height=this.height),i.bindFramebuffer(i.FRAMEBUFFER,a.frameBuffer),i.viewport(0,0,o.width,o.height),r.x=o.width/2,r.y=-o.height/2,s.x=-o.x,s.y=-o.y,i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),t._glFilterTexture=a},e.WebGLFilterManager.prototype.popFilter=function(){var t=this.gl,i=this.filterStack.pop(),r=i._filterArea,s=i._glFilterTexture,n=this.renderSession.projection,a=this.renderSession.offset;if(i.filterPasses.length>1){t.viewport(0,0,r.width,r.height),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=r.height,this.vertexArray[2]=r.width,this.vertexArray[3]=r.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=r.width,this.vertexArray[7]=0,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray);var o=s,h=this.texturePool.pop();h||(h=new e.FilterTexture(this.gl,this.width,this.height)),h.resize(this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,h.frameBuffer),t.clear(t.COLOR_BUFFER_BIT),t.disable(t.BLEND);for(var l=0;l<i.filterPasses.length-1;l++){var u=i.filterPasses[l];t.bindFramebuffer(t.FRAMEBUFFER,h.frameBuffer),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,o.texture),this.applyFilterPass(u,r,r.width,r.height);var c=o;o=h,h=c}t.enable(t.BLEND),s=o,this.texturePool.push(h)}var d=i.filterPasses[i.filterPasses.length-1];this.offsetX-=r.x,this.offsetY-=r.y;var p=this.width,f=this.height,m=0,g=0,v=this.buffer;if(0===this.filterStack.length)t.colorMask(!0,!0,!0,!0);else{var _=this.filterStack[this.filterStack.length-1];r=_._filterArea,p=r.width,f=r.height,m=r.x,g=r.y,v=_._glFilterTexture.frameBuffer}n.x=p/2,n.y=-f/2,a.x=m,a.y=g,r=i._filterArea;var y=r.x-m,x=r.y-g;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=y,this.vertexArray[1]=x+r.height,this.vertexArray[2]=y+r.width,this.vertexArray[3]=x+r.height,this.vertexArray[4]=y,this.vertexArray[5]=x,this.vertexArray[6]=y+r.width,this.vertexArray[7]=x,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray),t.viewport(0,0,p,f),t.bindFramebuffer(t.FRAMEBUFFER,v),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,s.texture),this.applyFilterPass(d,r,p,f),this.texturePool.push(s),i._glFilterTexture=null},e.WebGLFilterManager.prototype.applyFilterPass=function(t,i,r,s){var n=this.gl,a=t.shaders[n.id];a||(a=new e.PixiShader(n),a.fragmentSrc=t.fragmentSrc,a.uniforms=t.uniforms,a.init(),t.shaders[n.id]=a),this.renderSession.shaderManager.setShader(a),n.uniform2f(a.projectionVector,r/2,-s/2),n.uniform2f(a.offsetVector,0,0),t.uniforms.dimensions&&(t.uniforms.dimensions.value[0]=this.width,t.uniforms.dimensions.value[1]=this.height,t.uniforms.dimensions.value[2]=this.vertexArray[0],t.uniforms.dimensions.value[3]=this.vertexArray[5]),a.syncUniforms(),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),n.vertexAttribPointer(a.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.uvBuffer),n.vertexAttribPointer(a.aTextureCoord,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.colorBuffer),n.vertexAttribPointer(a.colorAttribute,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0),this.renderSession.drawCount++},e.WebGLFilterManager.prototype.initShaderBuffers=function(){var t=this.gl;this.vertexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.vertexArray=new e.Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.STATIC_DRAW),this.uvArray=new e.Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvArray,t.STATIC_DRAW),this.colorArray=new e.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colorArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),t.STATIC_DRAW)},e.WebGLFilterManager.prototype.destroy=function(){var t=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var e=0;e<this.texturePool.length;e++)this.texturePool[e].destroy();this.texturePool=null,t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.uvBuffer),t.deleteBuffer(this.colorBuffer),t.deleteBuffer(this.indexBuffer)},e.FilterTexture=function(t,i,r,s){this.gl=t,this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),s=s||e.scaleModes.DEFAULT,t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,s===e.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s===e.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0),this.renderBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.renderBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.renderBuffer),this.resize(i,r)},e.FilterTexture.prototype.constructor=e.FilterTexture,e.FilterTexture.prototype.clear=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},e.FilterTexture.prototype.resize=function(t,e){if(this.width!==t||this.height!==e){this.width=t,this.height=e;var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindRenderbuffer(i.RENDERBUFFER,this.renderBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e)}},e.FilterTexture.prototype.destroy=function(){var t=this.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},e.CanvasBuffer=function(t,e){this.width=t,this.height=e,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e},e.CanvasBuffer.prototype.constructor=e.CanvasBuffer,e.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},e.CanvasBuffer.prototype.resize=function(t,e){this.width=this.canvas.width=t,this.height=this.canvas.height=e},e.CanvasMaskManager=function(){},e.CanvasMaskManager.prototype.constructor=e.CanvasMaskManager,e.CanvasMaskManager.prototype.pushMask=function(t,i){var r=i.context;r.save();var s=t.alpha,n=t.worldTransform,a=i.resolution;r.setTransform(n.a*a,n.b*a,n.c*a,n.d*a,n.tx*a,n.ty*a),e.CanvasGraphics.renderGraphicsMask(t,r),r.clip(),t.worldAlpha=s},e.CanvasMaskManager.prototype.popMask=function(t){t.context.restore()},e.CanvasTinter=function(){},e.CanvasTinter.getTintedTexture=function(t,i){var r=t.texture;i=e.CanvasTinter.roundColor(i);var s="#"+("00000"+(0|i).toString(16)).substr(-6);if(r.tintCache=r.tintCache||{},r.tintCache[s])return r.tintCache[s];var n=e.CanvasTinter.canvas||document.createElement("canvas");if(e.CanvasTinter.tintMethod(r,i,n),e.CanvasTinter.convertTintToImage){var a=new Image;a.src=n.toDataURL(),r.tintCache[s]=a}else r.tintCache[s]=n,e.CanvasTinter.canvas=null;return n},e.CanvasTinter.tintWithMultiply=function(t,e,i){var r=i.getContext("2d"),s=t.crop;i.width=s.width,i.height=s.height,r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,s.width,s.height),r.globalCompositeOperation="multiply",r.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height)},e.CanvasTinter.tintWithOverlay=function(t,e,i){var r=i.getContext("2d"),s=t.crop;i.width=s.width,i.height=s.height,r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,s.width,s.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height)},e.CanvasTinter.tintWithPerPixel=function(t,i,r){var s=r.getContext("2d"),n=t.crop;r.width=n.width,r.height=n.height,s.globalCompositeOperation="copy",s.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height);for(var a=e.hex2rgb(i),o=a[0],h=a[1],l=a[2],u=s.getImageData(0,0,n.width,n.height),c=u.data,d=0;d<c.length;d+=4)c[d+0]*=o,c[d+1]*=h,c[d+2]*=l;s.putImageData(u,0,0)},e.CanvasTinter.roundColor=function(t){var i=e.CanvasTinter.cacheStepsPerColorChannel,r=e.hex2rgb(t);return r[0]=Math.min(255,r[0]/i*i),r[1]=Math.min(255,r[1]/i*i),r[2]=Math.min(255,r[2]/i*i),e.rgb2hex(r)},e.CanvasTinter.cacheStepsPerColorChannel=8,e.CanvasTinter.convertTintToImage=!1,e.CanvasTinter.canUseMultiply=e.canUseNewCanvasBlendModes(),e.CanvasTinter.tintMethod=e.CanvasTinter.canUseMultiply?e.CanvasTinter.tintWithMultiply:e.CanvasTinter.tintWithPerPixel,e.CanvasRenderer=function(t,i,r){if(r)for(var s in e.defaultRenderOptions)"undefined"==typeof r[s]&&(r[s]=e.defaultRenderOptions[s]);else r=e.defaultRenderOptions;e.defaultRenderer||(e.sayHello("Canvas"),e.defaultRenderer=this),this.type=e.CANVAS_RENDERER,this.resolution=r.resolution,this.clearBeforeRender=r.clearBeforeRender,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.width=t||800,this.height=i||600,this.width*=this.resolution,this.height*=this.resolution,this.view=r.view||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width*this.resolution,this.view.height=this.height*this.resolution,this.count=0,this.maskManager=new e.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,roundPixels:!1},this.mapBlendModes(),this.resize(t,i),"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},e.CanvasRenderer.prototype.constructor=e.CanvasRenderer,e.CanvasRenderer.prototype.render=function(t){t.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=e.blendModes.NORMAL,this.context.globalCompositeOperation=e.blendModesCanvas[e.blendModes.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=t.backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t),t.interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)))},e.CanvasRenderer.prototype.destroy=function(t){"undefined"==typeof t&&(t=!0),t&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},e.CanvasRenderer.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},e.CanvasRenderer.prototype.renderDisplayObject=function(t,e){this.renderSession.context=e||this.context,this.renderSession.resolution=this.resolution,t._renderCanvas(this.renderSession)},e.CanvasRenderer.prototype.mapBlendModes=function(){e.blendModesCanvas||(e.blendModesCanvas=[],e.canUseNewCanvasBlendModes()?(e.blendModesCanvas[e.blendModes.NORMAL]="source-over",e.blendModesCanvas[e.blendModes.ADD]="lighter",e.blendModesCanvas[e.blendModes.MULTIPLY]="multiply",e.blendModesCanvas[e.blendModes.SCREEN]="screen",e.blendModesCanvas[e.blendModes.OVERLAY]="overlay",e.blendModesCanvas[e.blendModes.DARKEN]="darken",e.blendModesCanvas[e.blendModes.LIGHTEN]="lighten",e.blendModesCanvas[e.blendModes.COLOR_DODGE]="color-dodge",e.blendModesCanvas[e.blendModes.COLOR_BURN]="color-burn",e.blendModesCanvas[e.blendModes.HARD_LIGHT]="hard-light",e.blendModesCanvas[e.blendModes.SOFT_LIGHT]="soft-light",e.blendModesCanvas[e.blendModes.DIFFERENCE]="difference",e.blendModesCanvas[e.blendModes.EXCLUSION]="exclusion",e.blendModesCanvas[e.blendModes.HUE]="hue",e.blendModesCanvas[e.blendModes.SATURATION]="saturation",e.blendModesCanvas[e.blendModes.COLOR]="color",e.blendModesCanvas[e.blendModes.LUMINOSITY]="luminosity"):(e.blendModesCanvas[e.blendModes.NORMAL]="source-over",e.blendModesCanvas[e.blendModes.ADD]="lighter",e.blendModesCanvas[e.blendModes.MULTIPLY]="source-over",e.blendModesCanvas[e.blendModes.SCREEN]="source-over",e.blendModesCanvas[e.blendModes.OVERLAY]="source-over",e.blendModesCanvas[e.blendModes.DARKEN]="source-over",e.blendModesCanvas[e.blendModes.LIGHTEN]="source-over",e.blendModesCanvas[e.blendModes.COLOR_DODGE]="source-over",e.blendModesCanvas[e.blendModes.COLOR_BURN]="source-over",e.blendModesCanvas[e.blendModes.HARD_LIGHT]="source-over",e.blendModesCanvas[e.blendModes.SOFT_LIGHT]="source-over",e.blendModesCanvas[e.blendModes.DIFFERENCE]="source-over",e.blendModesCanvas[e.blendModes.EXCLUSION]="source-over",e.blendModesCanvas[e.blendModes.HUE]="source-over",e.blendModesCanvas[e.blendModes.SATURATION]="source-over",e.blendModesCanvas[e.blendModes.COLOR]="source-over",e.blendModesCanvas[e.blendModes.LUMINOSITY]="source-over"))},e.CanvasGraphics=function(){},e.CanvasGraphics.renderGraphics=function(t,i){for(var r=t.worldAlpha,s="",n=0;n<t.graphicsData.length;n++){var a=t.graphicsData[n],o=a.shape;if(i.strokeStyle=s="#"+("00000"+(0|a.lineColor).toString(16)).substr(-6),i.lineWidth=a.lineWidth,a.type===e.Graphics.POLY){i.beginPath();var h=o.points;i.moveTo(h[0],h[1]);for(var l=1;l<h.length/2;l++)i.lineTo(h[2*l],h[2*l+1]);o.closed&&i.lineTo(h[0],h[1]),h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&i.closePath(),a.fill&&(i.globalAlpha=a.fillAlpha*r,i.fillStyle=s="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),i.fill()),a.lineWidth&&(i.globalAlpha=a.lineAlpha*r,i.stroke())}else if(a.type===e.Graphics.RECT)(a.fillColor||0===a.fillColor)&&(i.globalAlpha=a.fillAlpha*r,i.fillStyle=s="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),i.fillRect(o.x,o.y,o.width,o.height)),a.lineWidth&&(i.globalAlpha=a.lineAlpha*r,i.strokeRect(o.x,o.y,o.width,o.height));else if(a.type===e.Graphics.CIRC)i.beginPath(),i.arc(o.x,o.y,o.radius,0,2*Math.PI),i.closePath(),a.fill&&(i.globalAlpha=a.fillAlpha*r,i.fillStyle=s="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),i.fill()),a.lineWidth&&(i.globalAlpha=a.lineAlpha*r,i.stroke());else if(a.type===e.Graphics.ELIP){var u=2*o.width,c=2*o.height,d=o.x-u/2,p=o.y-c/2;i.beginPath();var f=.5522848,m=u/2*f,g=c/2*f,v=d+u,_=p+c,y=d+u/2,x=p+c/2;i.moveTo(d,x),i.bezierCurveTo(d,x-g,y-m,p,y,p),i.bezierCurveTo(y+m,p,v,x-g,v,x),i.bezierCurveTo(v,x+g,y+m,_,y,_),i.bezierCurveTo(y-m,_,d,x+g,d,x),i.closePath(),a.fill&&(i.globalAlpha=a.fillAlpha*r,i.fillStyle=s="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),i.fill()),a.lineWidth&&(i.globalAlpha=a.lineAlpha*r,i.stroke())}else if(a.type===e.Graphics.RREC){var w=o.x,b=o.y,S=o.width,T=o.height,E=o.radius,C=Math.min(S,T)/2|0;E=E>C?C:E,i.beginPath(),i.moveTo(w,b+E),i.lineTo(w,b+T-E),i.quadraticCurveTo(w,b+T,w+E,b+T),i.lineTo(w+S-E,b+T),i.quadraticCurveTo(w+S,b+T,w+S,b+T-E),i.lineTo(w+S,b+E),i.quadraticCurveTo(w+S,b,w+S-E,b),i.lineTo(w+E,b),i.quadraticCurveTo(w,b,w,b+E),i.closePath(),(a.fillColor||0===a.fillColor)&&(i.globalAlpha=a.fillAlpha*r,i.fillStyle=s="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),i.fill()),a.lineWidth&&(i.globalAlpha=a.lineAlpha*r,i.stroke())}}},e.CanvasGraphics.renderGraphicsMask=function(t,i){var r=t.graphicsData.length;if(0!==r){r>1&&(r=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var s=0;1>s;s++){var n=t.graphicsData[s],a=n.shape;if(n.type===e.Graphics.POLY){i.beginPath();var o=a.points;i.moveTo(o[0],o[1]);for(var h=1;h<o.length/2;h++)i.lineTo(o[2*h],o[2*h+1]);o[0]===o[o.length-2]&&o[1]===o[o.length-1]&&i.closePath()}else if(n.type===e.Graphics.RECT)i.beginPath(),i.rect(a.x,a.y,a.width,a.height),i.closePath();else if(n.type===e.Graphics.CIRC)i.beginPath(),i.arc(a.x,a.y,a.radius,0,2*Math.PI),i.closePath();else if(n.type===e.Graphics.ELIP){var l=2*a.width,u=2*a.height,c=a.x-l/2,d=a.y-u/2;i.beginPath();var p=.5522848,f=l/2*p,m=u/2*p,g=c+l,v=d+u,_=c+l/2,y=d+u/2;i.moveTo(c,y),i.bezierCurveTo(c,y-m,_-f,d,_,d),i.bezierCurveTo(_+f,d,g,y-m,g,y),i.bezierCurveTo(g,y+m,_+f,v,_,v),i.bezierCurveTo(_-f,v,c,y+m,c,y),i.closePath()}else if(n.type===e.Graphics.RREC){var x=a.points,w=x[0],b=x[1],S=x[2],T=x[3],E=x[4],C=Math.min(S,T)/2|0;E=E>C?C:E,i.beginPath(),i.moveTo(w,b+E),i.lineTo(w,b+T-E),i.quadraticCurveTo(w,b+T,w+E,b+T),i.lineTo(w+S-E,b+T),i.quadraticCurveTo(w+S,b+T,w+S,b+T-E),i.lineTo(w+S,b+E),i.quadraticCurveTo(w+S,b,w+S-E,b),i.lineTo(w+E,b),i.quadraticCurveTo(w,b,w,b+E),i.closePath()}}}},e.Graphics=function(){e.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=e.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new e.Rectangle(0,0,1,1),this.dirty=!0,this.webGLDirty=!1,this.cachedSpriteDirty=!1},e.Graphics.prototype=Object.create(e.DisplayObjectContainer.prototype),e.Graphics.prototype.constructor=e.Graphics,Object.defineProperty(e.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap=t,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),e.Graphics.prototype.lineStyle=function(t,i,r){if(this.lineWidth=t||0,this.lineColor=i||0,this.lineAlpha=arguments.length<3?1:r,this.currentPath){if(this.currentPath.shape.points.length)return this.drawShape(new e.Polygon(this.currentPath.shape.points.slice(-2))),this;this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha}return this},e.Graphics.prototype.moveTo=function(t,i){return this.drawShape(new e.Polygon([t,i])),this},e.Graphics.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty=!0,this},e.Graphics.prototype.quadraticCurveTo=function(t,e,i,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s,n,a=20,o=this.currentPath.shape.points;0===o.length&&this.moveTo(0,0);for(var h=o[o.length-2],l=o[o.length-1],u=0,c=1;a>=c;c++)u=c/a,s=h+(t-h)*u,n=l+(e-l)*u,o.push(s+(t+(i-t)*u-s)*u,n+(e+(r-e)*u-n)*u);return this.dirty=!0,this},e.Graphics.prototype.bezierCurveTo=function(t,e,i,r,s,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var a,o,h,l,u,c=20,d=this.currentPath.shape.points,p=d[d.length-2],f=d[d.length-1],m=0,g=1;c>=g;g++)m=g/c,a=1-m,o=a*a,h=o*a,l=m*m,u=l*m,d.push(h*p+3*o*m*t+3*a*l*i+u*s,h*f+3*o*m*e+3*a*l*r+u*n);return this.dirty=!0,this},e.Graphics.prototype.arcTo=function(t,e,i,r,s){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var n=this.currentPath.shape.points,a=n[n.length-2],o=n[n.length-1],h=o-e,l=a-t,u=r-e,c=i-t,d=Math.abs(h*c-l*u);if(1e-8>d||0===s)(n[n.length-2]!==t||n[n.length-1]!==e)&&n.push(t,e);else{var p=h*h+l*l,f=u*u+c*c,m=h*u+l*c,g=s*Math.sqrt(p)/d,v=s*Math.sqrt(f)/d,_=g*m/p,y=v*m/f,x=g*c+v*l,w=g*u+v*h,b=l*(v+_),S=h*(v+_),T=c*(g+y),E=u*(g+y),C=Math.atan2(S-w,b-x),P=Math.atan2(E-w,T-x);this.arc(x+t,w+e,s,C,P,l*u>c*h)}return this.dirty=!0,this},e.Graphics.prototype.arc=function(t,e,i,r,s,n){var a=t+Math.cos(r)*i,o=e+Math.sin(r)*i,h=this.currentPath.shape.points;if(0===h.length?(this.moveTo(a,o),h=this.currentPath.shape.points):(h[h.length-2]!==a||h[h.length-1]!==o)&&h.push(a,o),r===s)return this;
!n&&r>=s?s+=2*Math.PI:n&&s>=r&&(r+=2*Math.PI);var l=n?-1*(r-s):s-r,u=Math.abs(l)/(2*Math.PI)*40;if(0===l)return this;for(var c=l/(2*u),d=2*c,p=Math.cos(c),f=Math.sin(c),m=u-1,g=m%1/m,v=0;m>=v;v++){var _=v+g*v,y=c+r+d*_,x=Math.cos(y),w=-Math.sin(y);h.push((p*x+f*w)*i+t,(p*-w+f*x)*i+e)}return this.dirty=!0,this},e.Graphics.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.Graphics.prototype.drawRect=function(t,i,r,s){return this.drawShape(new e.Rectangle(t,i,r,s)),this},e.Graphics.prototype.drawRoundedRect=function(t,i,r,s,n){return this.drawShape(new e.RoundedRectangle(t,i,r,s,n)),this},e.Graphics.prototype.drawCircle=function(t,i,r){return this.drawShape(new e.Circle(t,i,r)),this},e.Graphics.prototype.drawEllipse=function(t,i,r,s){return this.drawShape(new e.Ellipse(t,i,r,s)),this},e.Graphics.prototype.drawPolygon=function(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments)),this.drawShape(new e.Polygon(t)),this},e.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},e.Graphics.prototype.generateTexture=function(t,i){t=t||1;var r=this.getBounds(),s=new e.CanvasBuffer(r.width*t,r.height*t),n=e.Texture.fromCanvas(s.canvas,i);return n.baseTexture.resolution=t,s.context.scale(t,t),s.context.translate(-r.x,-r.y),e.CanvasGraphics.renderGraphics(this,s.context),n},e.Graphics.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,void e.Sprite.prototype._renderWebGL.call(this._cachedSprite,t);if(t.spriteBatch.stop(),t.blendModeManager.setBlendMode(this.blendMode),this._mask&&t.maskManager.pushMask(this._mask,t),this._filters&&t.filterManager.pushFilter(this._filterBlock),this.blendMode!==t.spriteBatch.currentBlendMode){t.spriteBatch.currentBlendMode=this.blendMode;var i=e.blendModesWebGL[t.spriteBatch.currentBlendMode];t.spriteBatch.gl.blendFunc(i[0],i[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),e.WebGLGraphics.renderGraphics(this,t),this.children.length){t.spriteBatch.start();for(var r=0,s=this.children.length;s>r;r++)this.children[r]._renderWebGL(t);t.spriteBatch.stop()}this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(this.mask,t),t.drawCount++,t.spriteBatch.start()}},e.Graphics.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void e.Sprite.prototype._renderCanvas.call(this._cachedSprite,t);var i=t.context,r=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,i.globalCompositeOperation=e.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t);var s=t.resolution;i.setTransform(r.a*s,r.b*s,r.c*s,r.d*s,r.tx*s,r.ty*s),e.CanvasGraphics.renderGraphics(this,i);for(var n=0,a=this.children.length;a>n;n++)this.children[n]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.Graphics.prototype.getBounds=function(t){if(this.isMask)return e.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var i=this._localBounds,r=i.x,s=i.width+i.x,n=i.y,a=i.height+i.y,o=t||this.worldTransform,h=o.a,l=o.b,u=o.c,c=o.d,d=o.tx,p=o.ty,f=h*s+u*a+d,m=c*a+l*s+p,g=h*r+u*a+d,v=c*a+l*r+p,_=h*r+u*n+d,y=c*n+l*r+p,x=h*s+u*n+d,w=c*n+l*s+p,b=f,S=m,T=f,E=m;return T=T>g?g:T,T=T>_?_:T,T=T>x?x:T,E=E>v?v:E,E=E>y?y:E,E=E>w?w:E,b=g>b?g:b,b=_>b?_:b,b=x>b?x:b,S=v>S?v:S,S=y>S?y:S,S=w>S?w:S,this._bounds.x=T,this._bounds.width=b-T,this._bounds.y=E,this._bounds.height=S-E,this._bounds},e.Graphics.prototype.updateLocalBounds=function(){var t=1/0,i=-1/0,r=1/0,s=-1/0;if(this.graphicsData.length)for(var n,a,o,h,l,u,c=0;c<this.graphicsData.length;c++){var d=this.graphicsData[c],p=d.type,f=d.lineWidth;if(n=d.shape,p===e.Graphics.RECT||p===e.Graphics.RREC)o=n.x-f/2,h=n.y-f/2,l=n.width+f,u=n.height+f,t=t>o?o:t,i=o+l>i?o+l:i,r=r>h?h:r,s=h+u>s?h+u:s;else if(p===e.Graphics.CIRC)o=n.x,h=n.y,l=n.radius+f/2,u=n.radius+f/2,t=t>o-l?o-l:t,i=o+l>i?o+l:i,r=r>h-u?h-u:r,s=h+u>s?h+u:s;else if(p===e.Graphics.ELIP)o=n.x,h=n.y,l=n.width+f/2,u=n.height+f/2,t=t>o-l?o-l:t,i=o+l>i?o+l:i,r=r>h-u?h-u:r,s=h+u>s?h+u:s;else{a=n.points;for(var m=0;m<a.length;m+=2)o=a[m],h=a[m+1],t=t>o-f?o-f:t,i=o+f>i?o+f:i,r=r>h-f?h-f:r,s=h+f>s?h+f:s}}else t=0,i=0,r=0,s=0;var g=this.boundsPadding;this._localBounds.x=t-g,this._localBounds.width=i-t+2*g,this._localBounds.y=r-g,this._localBounds.height=s-r+2*g},e.Graphics.prototype._generateCachedSprite=function(){var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(t.width,t.height);else{var i=new e.CanvasBuffer(t.width,t.height),r=e.Texture.fromCanvas(i.canvas);this._cachedSprite=new e.Sprite(r),this._cachedSprite.buffer=i,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._cachedSprite.buffer.context.translate(-t.x,-t.y),this.worldAlpha=1,e.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},e.Graphics.prototype.updateCachedSpriteTexture=function(){var t=this._cachedSprite,e=t.texture,i=t.buffer.canvas;e.baseTexture.width=i.width,e.baseTexture.height=i.height,e.crop.width=e.frame.width=i.width,e.crop.height=e.frame.height=i.height,t._width=i.width,t._height=i.height,e.baseTexture.dirty()},e.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},e.Graphics.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var i=new e.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(i),i.type===e.Graphics.POLY&&(i.shape.closed=this.filling,this.currentPath=i),this.dirty=!0,i},e.GraphicsData=function(t,e,i,r,s,n,a){this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this.fillColor=r,this.fillAlpha=s,this.fill=n,this.shape=a,this.type=a.type},e.Graphics.POLY=0,e.Graphics.RECT=1,e.Graphics.CIRC=2,e.Graphics.ELIP=3,e.Graphics.RREC=4,e.Polygon.prototype.type=e.Graphics.POLY,e.Rectangle.prototype.type=e.Graphics.RECT,e.Circle.prototype.type=e.Graphics.CIRC,e.Ellipse.prototype.type=e.Graphics.ELIP,e.RoundedRectangle.prototype.type=e.Graphics.RREC,e.Strip=function(t){e.DisplayObjectContainer.call(this),this.texture=t,this.uvs=new e.Float32Array([0,1,1,1,1,0,0,1]),this.verticies=new e.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new e.Float32Array([1,1,1,1]),this.indices=new e.Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=e.blendModes.NORMAL,this.padding=0},e.Strip.prototype=Object.create(e.DisplayObjectContainer.prototype),e.Strip.prototype.constructor=e.Strip,e.Strip.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||(t.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(t),t.shaderManager.setShader(t.shaderManager.stripShader),this._renderStrip(t),t.spriteBatch.start())},e.Strip.prototype._initWebGL=function(t){var e=t.gl;this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),this._uvBuffer=e.createBuffer(),this._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.verticies,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colors,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)},e.Strip.prototype._renderStrip=function(t){var e=t.gl,i=t.projection,r=t.offset,s=t.shaderManager.stripShader;t.blendModeManager.setBlendMode(this.blendMode),e.uniformMatrix3fv(s.translationMatrix,!1,this.worldTransform.toArray(!0)),e.uniform2f(s.projectionVector,i.x,-i.y),e.uniform2f(s.offsetVector,-r.x,-r.y),e.uniform1f(s.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.verticies,e.STATIC_DRAW),e.vertexAttribPointer(s.aVertexPosition,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.STATIC_DRAW),e.vertexAttribPointer(s.aTextureCoord,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),this.texture.baseTexture._dirty[e.id]?t.renderer.updateTexture(this.texture.baseTexture):e.bindTexture(e.TEXTURE_2D,this.texture.baseTexture._glTextures[e.id]),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)):(e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.verticies),e.vertexAttribPointer(s.aVertexPosition,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.vertexAttribPointer(s.aTextureCoord,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),this.texture.baseTexture._dirty[e.id]?t.renderer.updateTexture(this.texture.baseTexture):e.bindTexture(e.TEXTURE_2D,this.texture.baseTexture._glTextures[e.id]),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),e.drawElements(e.TRIANGLE_STRIP,this.indices.length,e.UNSIGNED_SHORT,0)},e.Strip.prototype._renderCanvas=function(t){var e=t.context,i=this.worldTransform;t.roundPixels?e.setTransform(i.a,i.b,i.c,i.d,0|i.tx,0|i.ty):e.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty);var r=this,s=r.verticies,n=r.uvs,a=s.length/2;this.count++;for(var o=0;a-2>o;o++){var h=2*o,l=s[h],u=s[h+2],c=s[h+4],d=s[h+1],p=s[h+3],f=s[h+5];if(this.padding>0){var m=(l+u+c)/3,g=(d+p+f)/3,v=l-m,_=d-g,y=Math.sqrt(v*v+_*_);l=m+v/y*(y+3),d=g+_/y*(y+3),v=u-m,_=p-g,y=Math.sqrt(v*v+_*_),u=m+v/y*(y+3),p=g+_/y*(y+3),v=c-m,_=f-g,y=Math.sqrt(v*v+_*_),c=m+v/y*(y+3),f=g+_/y*(y+3)}var x=n[h]*r.texture.width,w=n[h+2]*r.texture.width,b=n[h+4]*r.texture.width,S=n[h+1]*r.texture.height,T=n[h+3]*r.texture.height,E=n[h+5]*r.texture.height;e.save(),e.beginPath(),e.moveTo(l,d),e.lineTo(u,p),e.lineTo(c,f),e.closePath(),e.clip();var C=x*T+S*b+w*E-T*b-S*w-x*E,P=l*T+S*c+u*E-T*c-S*u-l*E,M=x*u+l*b+w*c-u*b-l*w-x*c,A=x*T*c+S*u*b+l*w*E-l*T*b-S*w*c-x*u*E,R=d*T+S*f+p*E-T*f-S*p-d*E,I=x*p+d*b+w*f-p*b-d*w-x*f,L=x*T*f+S*p*b+d*w*E-d*T*b-S*w*f-x*p*E;e.transform(P/C,R/C,M/C,I/C,A/C,L/C),e.drawImage(r.texture.baseTexture.source,0,0),e.restore()}},e.Strip.prototype.renderStripFlat=function(t){var e=this.context,i=t.verticies,r=i.length/2;this.count++,e.beginPath();for(var s=1;r-2>s;s++){var n=2*s,a=i[n],o=i[n+2],h=i[n+4],l=i[n+1],u=i[n+3],c=i[n+5];e.moveTo(a,l),e.lineTo(o,u),e.lineTo(h,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},e.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},e.Rope=function(t,i){e.Strip.call(this,t),this.points=i,this.verticies=new e.Float32Array(4*i.length),this.uvs=new e.Float32Array(4*i.length),this.colors=new e.Float32Array(2*i.length),this.indices=new e.Uint16Array(2*i.length),this.refresh()},e.Rope.prototype=Object.create(e.Strip.prototype),e.Rope.prototype.constructor=e.Rope,e.Rope.prototype.refresh=function(){var t=this.points;if(!(t.length<1)){var e=this.uvs,i=t[0],r=this.indices,s=this.colors;this.count-=.2,e[0]=0,e[1]=0,e[2]=0,e[3]=1,s[0]=1,s[1]=1,r[0]=0,r[1]=1;for(var n,a,o,h=t.length,l=1;h>l;l++)n=t[l],a=4*l,o=l/(h-1),l%2?(e[a]=o,e[a+1]=0,e[a+2]=o,e[a+3]=1):(e[a]=o,e[a+1]=0,e[a+2]=o,e[a+3]=1),a=2*l,s[a]=1,s[a+1]=1,a=2*l,r[a]=a,r[a+1]=a+1,i=n}},e.Rope.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){var i,r=t[0],s={x:0,y:0};this.count-=.2;for(var n,a,o,h,l,u=this.verticies,c=t.length,d=0;c>d;d++)n=t[d],a=4*d,i=d<t.length-1?t[d+1]:n,s.y=-(i.x-r.x),s.x=i.y-r.y,o=10*(1-d/(c-1)),o>1&&(o=1),h=Math.sqrt(s.x*s.x+s.y*s.y),l=this.texture.height/2,s.x/=h,s.y/=h,s.x*=l,s.y*=l,u[a]=n.x+s.x,u[a+1]=n.y+s.y,u[a+2]=n.x-s.x,u[a+3]=n.y-s.y,r=n;e.DisplayObjectContainer.prototype.updateTransform.call(this)}},e.Rope.prototype.setTexture=function(t){this.texture=t},e.TilingSprite=function(t,i,r){e.Sprite.call(this,t),this._width=i||100,this._height=r||100,this.tileScale=new e.Point(1,1),this.tileScaleOffset=new e.Point(1,1),this.tilePosition=new e.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=e.blendModes.NORMAL},e.TilingSprite.prototype=Object.create(e.Sprite.prototype),e.TilingSprite.prototype.constructor=e.TilingSprite,Object.defineProperty(e.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(e.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}}),e.TilingSprite.prototype.setTexture=function(t){this.texture!==t&&(this.texture=t,this.refreshTexture=!0,this.cachedTint=16777215)},e.TilingSprite.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha){var i,r;for(this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(e.updateWebGLTexture(this.tilingTexture.baseTexture,t.gl),this.tilingTexture.needsUpdate=!1)):t.spriteBatch.renderTilingSprite(this),i=0,r=this.children.length;r>i;i++)this.children[i]._renderWebGL(t);t.spriteBatch.stop(),this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(this._mask,t),t.spriteBatch.start()}},e.TilingSprite.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){var i=t.context;this._mask&&t.maskManager.pushMask(this._mask,i),i.globalAlpha=this.worldAlpha;var r,s,n=this.worldTransform,a=t.resolution;if(i.setTransform(n.a*a,n.c*a,n.b*a,n.d*a,n.tx*a,n.ty*a),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=i.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,i.globalCompositeOperation=e.blendModesCanvas[t.currentBlendMode]);var o=this.tilePosition,h=this.tileScale;for(o.x%=this.tilingTexture.baseTexture.width,o.y%=this.tilingTexture.baseTexture.height,i.scale(h.x,h.y),i.translate(o.x+this.anchor.x*-this._width,o.y+this.anchor.y*-this._height),i.fillStyle=this.__tilePattern,i.fillRect(-o.x,-o.y,this._width/h.x,this._height/h.y),i.scale(1/h.x,1/h.y),i.translate(-o.x+this.anchor.x*this._width,-o.y+this.anchor.y*this._height),this._mask&&t.maskManager.popMask(t.context),r=0,s=this.children.length;s>r;r++)this.children[r]._renderCanvas(t)}},e.TilingSprite.prototype.getBounds=function(){var t=this._width,e=this._height,i=t*(1-this.anchor.x),r=t*-this.anchor.x,s=e*(1-this.anchor.y),n=e*-this.anchor.y,a=this.worldTransform,o=a.a,h=a.b,l=a.c,u=a.d,c=a.tx,d=a.ty,p=o*r+l*n+c,f=u*n+h*r+d,m=o*i+l*n+c,g=u*n+h*i+d,v=o*i+l*s+c,_=u*s+h*i+d,y=o*r+l*s+c,x=u*s+h*r+d,w=-1/0,b=-1/0,S=1/0,T=1/0;S=S>p?p:S,S=S>m?m:S,S=S>v?v:S,S=S>y?y:S,T=T>f?f:T,T=T>g?g:T,T=T>_?_:T,T=T>x?x:T,w=p>w?p:w,w=m>w?m:w,w=v>w?v:w,w=y>w?y:w,b=f>b?f:b,b=g>b?g:b,b=_>b?_:b,b=x>b?x:b;var E=this._bounds;return E.x=S,E.width=w-S,E.y=T,E.height=b-T,this._currentBounds=E,E},e.TilingSprite.prototype.onTextureUpdate=function(){},e.TilingSprite.prototype.generateTilingTexture=function(t){if(this.texture.baseTexture.hasLoaded){var i,r,s=this.originalTexture||this.texture,n=s.frame,a=n.width!==s.baseTexture.width||n.height!==s.baseTexture.height,o=!1;if(t?(i=e.getNextPowerOfTwo(n.width),r=e.getNextPowerOfTwo(n.height),(n.width!==i||n.height!==r)&&(o=!0)):a&&(i=n.width,r=n.height,o=!0),o){var h;this.tilingTexture&&this.tilingTexture.isTiling?(h=this.tilingTexture.canvasBuffer,h.resize(i,r),this.tilingTexture.baseTexture.width=i,this.tilingTexture.baseTexture.height=r,this.tilingTexture.needsUpdate=!0):(h=new e.CanvasBuffer(i,r),this.tilingTexture=e.Texture.fromCanvas(h.canvas),this.tilingTexture.canvasBuffer=h,this.tilingTexture.isTiling=!0),h.context.drawImage(s.baseTexture.source,s.crop.x,s.crop.y,s.crop.width,s.crop.height,0,0,i,r),this.tileScaleOffset.x=n.width/i,this.tileScaleOffset.y=n.height/r}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=s;this.refreshTexture=!1,this.originalTexture=this.texture,this.texture=this.tilingTexture,this.tilingTexture.baseTexture._powerOf2=!0}};var i={};i.BoneData=function(t,e){this.name=t,this.parent=e},i.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1},i.SlotData=function(t,e){this.name=t,this.boneData=e},i.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null},i.Bone=function(t,e){this.data=t,this.parent=e,this.setToSetupPose()},i.Bone.yDown=!1,i.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(t,e){var r=this.parent;null!=r?(this.worldX=this.x*r.m00+this.y*r.m01+r.worldX,this.worldY=this.x*r.m10+this.y*r.m11+r.worldY,this.worldScaleX=r.worldScaleX*this.scaleX,this.worldScaleY=r.worldScaleY*this.scaleY,this.worldRotation=r.worldRotation+this.rotation):(this.worldX=this.x,this.worldY=this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation);var s=this.worldRotation*Math.PI/180,n=Math.cos(s),a=Math.sin(s);this.m00=n*this.worldScaleX,this.m10=a*this.worldScaleX,this.m01=-a*this.worldScaleY,this.m11=n*this.worldScaleY,t&&(this.m00=-this.m00,this.m01=-this.m01),e&&(this.m10=-this.m10,this.m11=-this.m11),i.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY}},i.Slot=function(t,e,i){this.data=t,this.skeleton=e,this.bone=i,this.setToSetupPose()},i.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(t){this.attachment=t,this._attachmentTime=this.skeleton.time},setAttachmentTime:function(t){this._attachmentTime=this.skeleton.time-t},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var t=this.data;this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a;for(var e=this.skeleton.data.slots,i=0,r=e.length;r>i;i++)if(e[i]==t){this.setAttachment(t.attachmentName?this.skeleton.getAttachmentBySlotIndex(i,t.attachmentName):null);break}}},i.Skin=function(t){this.name=t,this.attachments={}},i.Skin.prototype={addAttachment:function(t,e,i){this.attachments[t+":"+e]=i},getAttachment:function(t,e){return this.attachments[t+":"+e]},_attachAll:function(t,e){for(var i in e.attachments){var r=i.indexOf(":"),s=parseInt(i.substring(0,r),10),n=i.substring(r+1),a=t.slots[s];if(a.attachment&&a.attachment.name==n){var o=this.getAttachment(s,n);o&&a.setAttachment(o)}}}},i.Animation=function(t,e,i){this.name=t,this.timelines=e,this.duration=i},i.Animation.prototype={apply:function(t,e,i){i&&this.duration&&(e%=this.duration);for(var r=this.timelines,s=0,n=r.length;n>s;s++)r[s].apply(t,e,1)},mix:function(t,e,i,r){i&&this.duration&&(e%=this.duration);for(var s=this.timelines,n=0,a=s.length;a>n;n++)s[n].apply(t,e,r)}},i.binarySearch=function(t,e,i){var r=0,s=Math.floor(t.length/i)-2;if(!s)return i;for(var n=s>>>1;;){if(t[(n+1)*i]<=e?r=n+1:s=n,r==s)return(r+1)*i;n=r+s>>>1}},i.linearSearch=function(t,e,i){for(var r=0,s=t.length-i;s>=r;r+=i)if(t[r]>e)return r;return-1},i.Curves=function(t){this.curves=[],this.curves.length=6*(t-1)},i.Curves.prototype={setLinear:function(t){this.curves[6*t]=0},setStepped:function(t){this.curves[6*t]=-1},setCurve:function(t,e,i,r,s){var n=.1,a=n*n,o=a*n,h=3*n,l=3*a,u=6*a,c=6*o,d=2*-e+r,p=2*-i+s,f=3*(e-r)+1,m=3*(i-s)+1,g=6*t,v=this.curves;v[g]=e*h+d*l+f*o,v[g+1]=i*h+p*l+m*o,v[g+2]=d*u+f*c,v[g+3]=p*u+m*c,v[g+4]=f*c,v[g+5]=m*c},getCurvePercent:function(t,e){e=0>e?0:e>1?1:e;var i=6*t,r=this.curves,s=r[i];if(!s)return e;if(-1==s)return 0;for(var n=r[i+1],a=r[i+2],o=r[i+3],h=r[i+4],l=r[i+5],u=s,c=n,d=8;;){if(u>=e){var p=u-s,f=c-n;return f+(c-f)*(e-p)/(u-p)}if(!d)break;d--,s+=a,n+=o,a+=h,o+=l,u+=s,c+=n}return c+(1-c)*(e-u)/(1-u)}},i.RotateTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=2*t},i.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,i){t*=2,this.frames[t]=e,this.frames[t+1]=i},apply:function(t,e,r){var s,n=this.frames;if(!(e<n[0])){var a=t.bones[this.boneIndex];if(e>=n[n.length-2]){for(s=a.data.rotation+n[n.length-1]-a.rotation;s>180;)s-=360;for(;-180>s;)s+=360;return void(a.rotation+=s*r)}var o=i.binarySearch(n,e,2),h=n[o-1],l=n[o],u=1-(e-l)/(n[o-2]-l);for(u=this.curves.getCurvePercent(o/2-1,u),s=n[o+1]-h;s>180;)s-=360;for(;-180>s;)s+=360;for(s=a.data.rotation+(h+s*u)-a.rotation;s>180;)s-=360;for(;-180>s;)s+=360;a.rotation+=s*r}}},i.TranslateTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=3*t},i.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,i,r){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r},apply:function(t,e,r){var s=this.frames;if(!(e<s[0])){var n=t.bones[this.boneIndex];if(e>=s[s.length-3])return n.x+=(n.data.x+s[s.length-2]-n.x)*r,void(n.y+=(n.data.y+s[s.length-1]-n.y)*r);var a=i.binarySearch(s,e,3),o=s[a-2],h=s[a-1],l=s[a],u=1-(e-l)/(s[a+-3]-l);u=this.curves.getCurvePercent(a/3-1,u),n.x+=(n.data.x+o+(s[a+1]-o)*u-n.x)*r,n.y+=(n.data.y+h+(s[a+2]-h)*u-n.y)*r}}},i.ScaleTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=3*t},i.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,i,r){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r},apply:function(t,e,r){var s=this.frames;if(!(e<s[0])){var n=t.bones[this.boneIndex];if(e>=s[s.length-3])return n.scaleX+=(n.data.scaleX-1+s[s.length-2]-n.scaleX)*r,void(n.scaleY+=(n.data.scaleY-1+s[s.length-1]-n.scaleY)*r);var a=i.binarySearch(s,e,3),o=s[a-2],h=s[a-1],l=s[a],u=1-(e-l)/(s[a+-3]-l);u=this.curves.getCurvePercent(a/3-1,u),n.scaleX+=(n.data.scaleX-1+o+(s[a+1]-o)*u-n.scaleX)*r,n.scaleY+=(n.data.scaleY-1+h+(s[a+2]-h)*u-n.scaleY)*r}}},i.ColorTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=5*t},i.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(t,e,i,r,s,n){t*=5,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r,this.frames[t+3]=s,this.frames[t+4]=n},apply:function(t,e,r){var s=this.frames;if(!(e<s[0])){var n=t.slots[this.slotIndex];if(e>=s[s.length-5]){var a=s.length-1;return n.r=s[a-3],n.g=s[a-2],n.b=s[a-1],void(n.a=s[a])}var o=i.binarySearch(s,e,5),h=s[o-4],l=s[o-3],u=s[o-2],c=s[o-1],d=s[o],p=1-(e-d)/(s[o-5]-d);p=this.curves.getCurvePercent(o/5-1,p);var f=h+(s[o+1]-h)*p,m=l+(s[o+2]-l)*p,g=u+(s[o+3]-u)*p,v=c+(s[o+4]-c)*p;1>r?(n.r+=(f-n.r)*r,n.g+=(m-n.g)*r,n.b+=(g-n.b)*r,n.a+=(v-n.a)*r):(n.r=f,n.g=m,n.b=g,n.a=v)}}},i.AttachmentTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=t,this.attachmentNames=[],this.attachmentNames.length=t},i.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},apply:function(t,e){var r=this.frames;if(!(e<r[0])){var s;s=e>=r[r.length-1]?r.length-1:i.binarySearch(r,e,1)-1;var n=this.attachmentNames[s];t.slots[this.slotIndex].setAttachment(n?t.getAttachmentBySlotIndex(this.slotIndex,n):null)}}},i.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.animations=[]},i.SkeletonData.prototype={defaultSkin:null,findBone:function(t){for(var e=this.bones,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null},findBoneIndex:function(t){for(var e=this.bones,i=0,r=e.length;r>i;i++)if(e[i].name==t)return i;return-1},findSlot:function(t){for(var e=this.slots,i=0,r=e.length;r>i;i++)if(e[i].name==t)return slot[i];return null},findSlotIndex:function(t){for(var e=this.slots,i=0,r=e.length;r>i;i++)if(e[i].name==t)return i;return-1},findSkin:function(t){for(var e=this.skins,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null},findAnimation:function(t){for(var e=this.animations,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null}},i.Skeleton=function(t){this.data=t,this.bones=[];for(var e=0,r=t.bones.length;r>e;e++){var s=t.bones[e],n=s.parent?this.bones[t.bones.indexOf(s.parent)]:null;this.bones.push(new i.Bone(s,n))}for(this.slots=[],this.drawOrder=[],e=0,r=t.slots.length;r>e;e++){var a=t.slots[e],o=this.bones[t.bones.indexOf(a.boneData)],h=new i.Slot(a,this,o);this.slots.push(h),this.drawOrder.push(h)}},i.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateWorldTransform:function(){for(var t=this.flipX,e=this.flipY,i=this.bones,r=0,s=i.length;s>r;r++)i[r].updateWorldTransform(t,e)},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var t=this.bones,e=0,i=t.length;i>e;e++)t[e].setToSetupPose()},setSlotsToSetupPose:function(){for(var t=this.slots,e=0,i=t.length;i>e;e++)t[e].setToSetupPose(e)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(t){for(var e=this.bones,i=0,r=e.length;r>i;i++)if(e[i].data.name==t)return e[i];return null},findBoneIndex:function(t){for(var e=this.bones,i=0,r=e.length;r>i;i++)if(e[i].data.name==t)return i;return-1},findSlot:function(t){for(var e=this.slots,i=0,r=e.length;r>i;i++)if(e[i].data.name==t)return e[i];return null},findSlotIndex:function(t){for(var e=this.slots,i=0,r=e.length;r>i;i++)if(e[i].data.name==t)return i;return-1},setSkinByName:function(t){var e=this.data.findSkin(t);if(!e)throw"Skin not found: "+t;this.setSkin(e)},setSkin:function(t){this.skin&&t&&t._attachAll(this,this.skin),this.skin=t},getAttachmentBySlotName:function(t,e){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t),e)},getAttachmentBySlotIndex:function(t,e){if(this.skin){var i=this.skin.getAttachment(t,e);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},setAttachment:function(t,e){for(var i=this.slots,r=0,s=i.size;s>r;r++){var n=i[r];if(n.data.name==t){var a=null;if(e&&(a=this.getAttachment(r,e),null==a))throw"Attachment not found: "+e+", for slot: "+t;return void n.setAttachment(a)}}throw"Slot not found: "+t},update:function(t){time+=t}},i.AttachmentType={region:0},i.RegionAttachment=function(){this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},i.RegionAttachment.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(t,e,i,r,s){var n=this.uvs;s?(n[2]=t,n[3]=r,n[4]=t,n[5]=e,n[6]=i,n[7]=e,n[0]=i,n[1]=r):(n[0]=t,n[1]=r,n[2]=t,n[3]=e,n[4]=i,n[5]=e,n[6]=i,n[7]=r)},updateOffset:function(){var t=this.width/this.regionOriginalWidth*this.scaleX,e=this.height/this.regionOriginalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.regionOffsetX*t,r=-this.height/2*this.scaleY+this.regionOffsetY*e,s=i+this.regionWidth*t,n=r+this.regionHeight*e,a=this.rotation*Math.PI/180,o=Math.cos(a),h=Math.sin(a),l=i*o+this.x,u=i*h,c=r*o+this.y,d=r*h,p=s*o+this.x,f=s*h,m=n*o+this.y,g=n*h,v=this.offset;v[0]=l-d,v[1]=c+u,v[2]=l-g,v[3]=m+u,v[4]=p-g,v[5]=m+f,v[6]=p-d,v[7]=c+f},computeVertices:function(t,e,i,r){t+=i.worldX,e+=i.worldY;var s=i.m00,n=i.m01,a=i.m10,o=i.m11,h=this.offset;r[0]=h[0]*s+h[1]*n+t,r[1]=h[0]*a+h[1]*o+e,r[2]=h[2]*s+h[3]*n+t,r[3]=h[2]*a+h[3]*o+e,r[4]=h[4]*s+h[5]*n+t,r[5]=h[4]*a+h[5]*o+e,r[6]=h[6]*s+h[7]*n+t,r[7]=h[6]*a+h[7]*o+e}},i.AnimationStateData=function(t){this.skeletonData=t,this.animationToMixTime={}},i.AnimationStateData.prototype={defaultMix:0,setMixByName:function(t,e,i){var r=this.skeletonData.findAnimation(t);if(!r)throw"Animation not found: "+t;var s=this.skeletonData.findAnimation(e);if(!s)throw"Animation not found: "+e;this.setMix(r,s,i)},setMix:function(t,e,i){this.animationToMixTime[t.name+":"+e.name]=i},getMix:function(t,e){var i=this.animationToMixTime[t.name+":"+e.name];return i?i:this.defaultMix}},i.AnimationState=function(t){this.data=t,this.queue=[]},i.AnimationState.prototype={animationSpeed:1,current:null,previous:null,currentTime:0,previousTime:0,currentLoop:!1,previousLoop:!1,mixTime:0,mixDuration:0,update:function(t){if(this.currentTime+=t*this.animationSpeed,this.previousTime+=t,this.mixTime+=t,this.queue.length>0){var e=this.queue[0];this.currentTime>=e.delay&&(this._setAnimation(e.animation,e.loop),this.queue.shift())}},apply:function(t){if(this.current)if(this.previous){this.previous.apply(t,this.previousTime,this.previousLoop);var e=this.mixTime/this.mixDuration;e>=1&&(e=1,this.previous=null),this.current.mix(t,this.currentTime,this.currentLoop,e)}else this.current.apply(t,this.currentTime,this.currentLoop)},clearAnimation:function(){this.previous=null,this.current=null,this.queue.length=0},_setAnimation:function(t,e){this.previous=null,t&&this.current&&(this.mixDuration=this.data.getMix(this.current,t),this.mixDuration>0&&(this.mixTime=0,this.previous=this.current,this.previousTime=this.currentTime,this.previousLoop=this.currentLoop)),this.current=t,this.currentLoop=e,this.currentTime=0},setAnimationByName:function(t,e){var i=this.data.skeletonData.findAnimation(t);if(!i)throw"Animation not found: "+t;this.setAnimation(i,e)},setAnimation:function(t,e){this.queue.length=0,this._setAnimation(t,e)},addAnimationByName:function(t,e,i){var r=this.data.skeletonData.findAnimation(t);if(!r)throw"Animation not found: "+t;this.addAnimation(r,e,i)},addAnimation:function(t,e,i){var r={};if(r.animation=t,r.loop=e,!i||0>=i){var s=this.queue.length?this.queue[this.queue.length-1].animation:this.current;i=null!=s?s.duration-this.data.getMix(s,t)+(i||0):0}r.delay=i,this.queue.push(r)},isComplete:function(){return!this.current||this.currentTime>=this.current.duration}},i.SkeletonJson=function(t){this.attachmentLoader=t},i.SkeletonJson.prototype={scale:1,readSkeletonData:function(t){for(var e,r=new i.SkeletonData,s=t.bones,n=0,a=s.length;a>n;n++){var o=s[n],h=null;if(o.parent&&(h=r.findBone(o.parent),!h))throw"Parent bone not found: "+o.parent;e=new i.BoneData(o.name,h),e.length=(o.length||0)*this.scale,e.x=(o.x||0)*this.scale,e.y=(o.y||0)*this.scale,e.rotation=o.rotation||0,e.scaleX=o.scaleX||1,e.scaleY=o.scaleY||1,r.bones.push(e)}var l=t.slots;for(n=0,a=l.length;a>n;n++){var u=l[n];if(e=r.findBone(u.bone),!e)throw"Slot bone not found: "+u.bone;var c=new i.SlotData(u.name,e),d=u.color;d&&(c.r=i.SkeletonJson.toColor(d,0),c.g=i.SkeletonJson.toColor(d,1),c.b=i.SkeletonJson.toColor(d,2),c.a=i.SkeletonJson.toColor(d,3)),c.attachmentName=u.attachment,r.slots.push(c)}var p=t.skins;for(var f in p)if(p.hasOwnProperty(f)){var m=p[f],g=new i.Skin(f);for(var v in m)if(m.hasOwnProperty(v)){var _=r.findSlotIndex(v),y=m[v];for(var x in y)if(y.hasOwnProperty(x)){var w=this.readAttachment(g,x,y[x]);null!=w&&g.addAttachment(_,x,w)}}r.skins.push(g),"default"==g.name&&(r.defaultSkin=g)}var b=t.animations;for(var S in b)b.hasOwnProperty(S)&&this.readAnimation(S,b[S],r);
return r},readAttachment:function(t,e,r){e=r.name||e;var s=i.AttachmentType[r.type||"region"];if(s==i.AttachmentType.region){var n=new i.RegionAttachment;return n.x=(r.x||0)*this.scale,n.y=(r.y||0)*this.scale,n.scaleX=r.scaleX||1,n.scaleY=r.scaleY||1,n.rotation=r.rotation||0,n.width=(r.width||32)*this.scale,n.height=(r.height||32)*this.scale,n.updateOffset(),n.rendererObject={},n.rendererObject.name=e,n.rendererObject.scale={},n.rendererObject.scale.x=n.scaleX,n.rendererObject.scale.y=n.scaleY,n.rendererObject.rotation=-n.rotation*Math.PI/180,n}throw"Unknown attachment type: "+s},readAnimation:function(t,e,r){var s,n,a,o,h,l,u,c=[],d=0,p=e.bones;for(var f in p)if(p.hasOwnProperty(f)){var m=r.findBoneIndex(f);if(-1==m)throw"Bone not found: "+f;var g=p[f];for(a in g)if(g.hasOwnProperty(a))if(h=g[a],"rotate"==a){for(n=new i.RotateTimeline(h.length),n.boneIndex=m,s=0,l=0,u=h.length;u>l;l++)o=h[l],n.setFrame(s,o.time,o.angle),i.SkeletonJson.readCurve(n,s,o),s++;c.push(n),d=Math.max(d,n.frames[2*n.getFrameCount()-2])}else{if("translate"!=a&&"scale"!=a)throw"Invalid timeline type for a bone: "+a+" ("+f+")";var v=1;for("scale"==a?n=new i.ScaleTimeline(h.length):(n=new i.TranslateTimeline(h.length),v=this.scale),n.boneIndex=m,s=0,l=0,u=h.length;u>l;l++){o=h[l];var _=(o.x||0)*v,y=(o.y||0)*v;n.setFrame(s,o.time,_,y),i.SkeletonJson.readCurve(n,s,o),s++}c.push(n),d=Math.max(d,n.frames[3*n.getFrameCount()-3])}}var x=e.slots;for(var w in x)if(x.hasOwnProperty(w)){var b=x[w],S=r.findSlotIndex(w);for(a in b)if(b.hasOwnProperty(a))if(h=b[a],"color"==a){for(n=new i.ColorTimeline(h.length),n.slotIndex=S,s=0,l=0,u=h.length;u>l;l++){o=h[l];var T=o.color,E=i.SkeletonJson.toColor(T,0),C=i.SkeletonJson.toColor(T,1),P=i.SkeletonJson.toColor(T,2),M=i.SkeletonJson.toColor(T,3);n.setFrame(s,o.time,E,C,P,M),i.SkeletonJson.readCurve(n,s,o),s++}c.push(n),d=Math.max(d,n.frames[5*n.getFrameCount()-5])}else{if("attachment"!=a)throw"Invalid timeline type for a slot: "+a+" ("+w+")";for(n=new i.AttachmentTimeline(h.length),n.slotIndex=S,s=0,l=0,u=h.length;u>l;l++)o=h[l],n.setFrame(s++,o.time,o.name);c.push(n),d=Math.max(d,n.frames[n.getFrameCount()-1])}}r.animations.push(new i.Animation(t,c,d))}},i.SkeletonJson.readCurve=function(t,e,i){var r=i.curve;r&&("stepped"==r?t.curves.setStepped(e):r instanceof Array&&t.curves.setCurve(e,r[0],r[1],r[2],r[3]))},i.SkeletonJson.toColor=function(t,e){if(8!=t.length)throw"Color hexidecimal length must be 8, recieved: "+t;return parseInt(t.substr(2*e,2),16)/255},i.Atlas=function(t,e){this.textureLoader=e,this.pages=[],this.regions=[];var r=new i.AtlasReader(t),s=[];s.length=4;for(var n=null;;){var a=r.readLine();if(null==a)break;if(a=r.trim(a),a.length)if(n){var o=new i.AtlasRegion;o.name=a,o.page=n,o.rotate="true"==r.readValue(),r.readTuple(s);var h=parseInt(s[0],10),l=parseInt(s[1],10);r.readTuple(s);var u=parseInt(s[0],10),c=parseInt(s[1],10);o.u=h/n.width,o.v=l/n.height,o.rotate?(o.u2=(h+c)/n.width,o.v2=(l+u)/n.height):(o.u2=(h+u)/n.width,o.v2=(l+c)/n.height),o.x=h,o.y=l,o.width=Math.abs(u),o.height=Math.abs(c),4==r.readTuple(s)&&(o.splits=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10)],4==r.readTuple(s)&&(o.pads=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10)],r.readTuple(s))),o.originalWidth=parseInt(s[0],10),o.originalHeight=parseInt(s[1],10),r.readTuple(s),o.offsetX=parseInt(s[0],10),o.offsetY=parseInt(s[1],10),o.index=parseInt(r.readValue(),10),this.regions.push(o)}else{n=new i.AtlasPage,n.name=a,n.format=i.Atlas.Format[r.readValue()],r.readTuple(s),n.minFilter=i.Atlas.TextureFilter[s[0]],n.magFilter=i.Atlas.TextureFilter[s[1]];var d=r.readValue();n.uWrap=i.Atlas.TextureWrap.clampToEdge,n.vWrap=i.Atlas.TextureWrap.clampToEdge,"x"==d?n.uWrap=i.Atlas.TextureWrap.repeat:"y"==d?n.vWrap=i.Atlas.TextureWrap.repeat:"xy"==d&&(n.uWrap=n.vWrap=i.Atlas.TextureWrap.repeat),e.load(n,a),this.pages.push(n)}else n=null}},i.Atlas.prototype={findRegion:function(t){for(var e=this.regions,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null},dispose:function(){for(var t=this.pages,e=0,i=t.length;i>e;e++)this.textureLoader.unload(t[e].rendererObject)},updateUVs:function(t){for(var e=this.regions,i=0,r=e.length;r>i;i++){var s=e[i];s.page==t&&(s.u=s.x/t.width,s.v=s.y/t.height,s.rotate?(s.u2=(s.x+s.height)/t.width,s.v2=(s.y+s.width)/t.height):(s.u2=(s.x+s.width)/t.width,s.v2=(s.y+s.height)/t.height))}}},i.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},i.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},i.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},i.AtlasPage=function(){},i.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},i.AtlasRegion=function(){},i.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},i.AtlasReader=function(t){this.lines=t.split(/\r\n|\r|\n/)},i.AtlasReader.prototype={index:0,trim:function(t){return t.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw"Invalid line: "+t;return this.trim(t.substring(e+1))},readTuple:function(t){var e=this.readLine(),i=e.indexOf(":");if(-1==i)throw"Invalid line: "+e;for(var r=0,s=i+1;3>r;r++){var n=e.indexOf(",",s);if(-1==n){if(!r)throw"Invalid line: "+e;break}t[r]=this.trim(e.substr(s,n-s)),s=n+1}return t[r]=this.trim(e.substring(s)),r+1}},i.AtlasAttachmentLoader=function(t){this.atlas=t},i.AtlasAttachmentLoader.prototype={newAttachment:function(t,e,r){switch(e){case i.AttachmentType.region:var s=this.atlas.findRegion(r);if(!s)throw"Region not found in atlas: "+r+" ("+e+")";var n=new i.RegionAttachment(r);return n.rendererObject=s,n.setUVs(s.u,s.v,s.u2,s.v2,s.rotate),n.regionOffsetX=s.offsetX,n.regionOffsetY=s.offsetY,n.regionWidth=s.width,n.regionHeight=s.height,n.regionOriginalWidth=s.originalWidth,n.regionOriginalHeight=s.originalHeight,n}throw"Unknown attachment type: "+e}},i.Bone.yDown=!0,e.AnimCache={},e.Spine=function(t){if(e.DisplayObjectContainer.call(this),this.spineData=e.AnimCache[t],!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+t);this.skeleton=new i.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new i.AnimationStateData(this.spineData),this.state=new i.AnimationState(this.stateData),this.slotContainers=[];for(var r=0,s=this.skeleton.drawOrder.length;s>r;r++){var n=this.skeleton.drawOrder[r],a=n.attachment,o=new e.DisplayObjectContainer;if(this.slotContainers.push(o),this.addChild(o),a instanceof i.RegionAttachment){var h=a.rendererObject.name,l=this.createSprite(n,a.rendererObject);n.currentSprite=l,n.currentSpriteName=h,o.addChild(l)}}},e.Spine.prototype=Object.create(e.DisplayObjectContainer.prototype),e.Spine.prototype.constructor=e.Spine,e.Spine.prototype.updateTransform=function(){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.state.update(t),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var r=this.skeleton.drawOrder,s=0,n=r.length;n>s;s++){var a=r[s],o=a.attachment,h=this.slotContainers[s];if(o instanceof i.RegionAttachment){if(o.rendererObject&&(!a.currentSpriteName||a.currentSpriteName!=o.name)){var l=o.rendererObject.name;if(void 0!==a.currentSprite&&(a.currentSprite.visible=!1),a.sprites=a.sprites||{},void 0!==a.sprites[l])a.sprites[l].visible=!0;else{var u=this.createSprite(a,o.rendererObject);h.addChild(u)}a.currentSprite=a.sprites[l],a.currentSpriteName=l}h.visible=!0;var c=a.bone;h.position.x=c.worldX+o.x*c.m00+o.y*c.m01,h.position.y=c.worldY+o.x*c.m10+o.y*c.m11,h.scale.x=c.worldScaleX,h.scale.y=c.worldScaleY,h.rotation=-(a.bone.worldRotation*Math.PI/180),h.alpha=a.a,a.currentSprite.tint=e.rgb2hex([a.r,a.g,a.b])}else h.visible=!1}e.DisplayObjectContainer.prototype.updateTransform.call(this)},e.Spine.prototype.createSprite=function(t,i){var r=e.TextureCache[i.name]?i.name:i.name+".png",s=new e.Sprite(e.Texture.fromFrame(r));return s.scale=i.scale,s.rotation=i.rotation,s.anchor.x=s.anchor.y=.5,t.sprites=t.sprites||{},t.sprites[i.name]=s,s},e.BaseTextureCache={},e.BaseTextureCacheIdGenerator=0,e.BaseTexture=function(t,i){if(this.resolution=1,this.width=100,this.height=100,this.scaleMode=i||e.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=t,this._UID=e._UID++,this.premultipliedAlpha=!0,this._glTextures=[],this._dirty=[!0,!0,!0,!0],t){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty();else{var r=this;this.source.onload=function(){r.hasLoaded=!0,r.width=r.source.naturalWidth||r.source.width,r.height=r.source.naturalHeight||r.source.height,r.dirty(),r.dispatchEvent({type:"loaded",content:r})},this.source.onerror=function(){r.dispatchEvent({type:"error",content:r})}}this.imageUrl=null,this._powerOf2=!1}},e.BaseTexture.prototype.constructor=e.BaseTexture,e.EventTarget.mixin(e.BaseTexture.prototype),e.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete e.BaseTextureCache[this.imageUrl],delete e.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete e.BaseTextureCache[this.source._pixiId],this.source=null,this.unloadFromGPU()},e.BaseTexture.prototype.updateSourceImage=function(t){this.hasLoaded=!1,this.source.src=null,this.source.src=t},e.BaseTexture.prototype.dirty=function(){for(var t=0;t<this._glTextures.length;t++)this._dirty[t]=!0},e.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var t=this._glTextures.length-1;t>=0;t--){var i=this._glTextures[t],r=e.glContexts[t];r&&i&&r.deleteTexture(i)}this._glTextures.length=0,this.dirty()},e.BaseTexture.fromImage=function(t,i,r){var s=e.BaseTextureCache[t];if(void 0===i&&-1===t.indexOf("data:")&&(i=!0),!s){var n=new Image;i&&(n.crossOrigin=""),n.src=t,s=new e.BaseTexture(n,r),s.imageUrl=t,e.BaseTextureCache[t]=s,-1!==t.indexOf(e.RETINA_PREFIX+".")&&(s.resolution=2)}return s},e.BaseTexture.fromCanvas=function(t,i){t._pixiId||(t._pixiId="canvas_"+e.TextureCacheIdGenerator++);var r=e.BaseTextureCache[t._pixiId];return r||(r=new e.BaseTexture(t,i),e.BaseTextureCache[t._pixiId]=r),r},e.TextureCache={},e.FrameCache={},e.TextureCacheIdGenerator=0,e.Texture=function(t,i,r,s){this.noFrame=!1,i||(this.noFrame=!0,i=new e.Rectangle(0,0,1,1)),t instanceof e.Texture&&(t=t.baseTexture),this.baseTexture=t,this.frame=i,this.trim=s,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=r||new e.Rectangle(0,0,1,1),t.hasLoaded?(this.noFrame&&(i=new e.Rectangle(0,0,t.width,t.height)),this.setFrame(i)):t.addEventListener("loaded",this.onBaseTextureLoaded.bind(this))},e.Texture.prototype.constructor=e.Texture,e.EventTarget.mixin(e.Texture.prototype),e.Texture.prototype.onBaseTextureLoaded=function(){var t=this.baseTexture;t.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new e.Rectangle(0,0,t.width,t.height)),this.setFrame(this.frame),this.dispatchEvent({type:"update",content:this})},e.Texture.prototype.destroy=function(t){t&&this.baseTexture.destroy(),this.valid=!1},e.Texture.prototype.setFrame=function(t){if(this.noFrame=!1,this.frame=t,this.width=t.width,this.height=t.height,this.crop.x=t.x,this.crop.y=t.y,this.crop.width=t.width,this.crop.height=t.height,!this.trim&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs()},e.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new e.TextureUvs);var t=this.crop,i=this.baseTexture.width,r=this.baseTexture.height;this._uvs.x0=t.x/i,this._uvs.y0=t.y/r,this._uvs.x1=(t.x+t.width)/i,this._uvs.y1=t.y/r,this._uvs.x2=(t.x+t.width)/i,this._uvs.y2=(t.y+t.height)/r,this._uvs.x3=t.x/i,this._uvs.y3=(t.y+t.height)/r},e.Texture.fromImage=function(t,i,r){var s=e.TextureCache[t];return s||(s=new e.Texture(e.BaseTexture.fromImage(t,i,r)),e.TextureCache[t]=s),s},e.Texture.fromFrame=function(t){var i=e.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache ');return i},e.Texture.fromCanvas=function(t,i){var r=e.BaseTexture.fromCanvas(t,i);return new e.Texture(r)},e.Texture.addTextureToCache=function(t,i){e.TextureCache[i]=t},e.Texture.removeTextureFromCache=function(t){var i=e.TextureCache[t];return delete e.TextureCache[t],delete e.BaseTextureCache[t],i},e.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},e.Texture.emptyTexture=new e.Texture(new e.BaseTexture),e.RenderTexture=function(t,i,r,s,n){if(this.width=t||100,this.height=i||100,this.resolution=n||1,this.frame=new e.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=new e.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.baseTexture=new e.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=s||e.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,e.Texture.call(this,this.baseTexture,new e.Rectangle(0,0,this.width,this.height)),this.renderer=r||e.defaultRenderer,this.renderer.type===e.WEBGL_RENDERER){var a=this.renderer.gl;this.baseTexture._dirty[a.id]=!1,this.textureBuffer=new e.FilterTexture(a,this.width*this.resolution,this.height*this.resolution,this.baseTexture.scaleMode),this.baseTexture._glTextures[a.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new e.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new e.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()},e.RenderTexture.prototype=Object.create(e.Texture.prototype),e.RenderTexture.prototype.constructor=e.RenderTexture,e.RenderTexture.prototype.resize=function(t,i,r){(t!==this.width||i!==this.height)&&(this.valid=t>0&&i>0,this.width=this.frame.width=this.crop.width=t,this.height=this.frame.height=this.crop.height=i,r&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.renderer.type===e.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width*this.resolution,this.height*this.resolution))},e.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===e.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},e.RenderTexture.prototype.renderWebGL=function(t,e,i){if(this.valid){var r=t.worldTransform;r.identity(),r.translate(0,2*this.projection.y),e&&r.append(e),r.scale(1,-1),t.worldAlpha=1;for(var s=t.children,n=0,a=s.length;a>n;n++)s[n].updateTransform();var o=this.renderer.gl;o.viewport(0,0,this.width*this.resolution,this.height*this.resolution),o.bindFramebuffer(o.FRAMEBUFFER,this.textureBuffer.frameBuffer),i&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(t,this.projection,this.textureBuffer.frameBuffer),this.renderer.spriteBatch.dirty=!0}},e.RenderTexture.prototype.renderCanvas=function(t,e,i){if(this.valid){var r=t.worldTransform;r.identity(),e&&r.append(e),t.worldAlpha=1;for(var s=t.children,n=0,a=s.length;a>n;n++)s[n].updateTransform();i&&this.textureBuffer.clear();var o=this.textureBuffer.context,h=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,o),this.renderer.resolution=h}},e.RenderTexture.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},e.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},e.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===e.WEBGL_RENDERER){var t=this.renderer.gl,i=this.textureBuffer.width,r=this.textureBuffer.height,s=new Uint8Array(4*i*r);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,i,r,t.RGBA,t.UNSIGNED_BYTE,s),t.bindFramebuffer(t.FRAMEBUFFER,null);var n=new e.CanvasBuffer(i,r),a=n.context.getImageData(0,0,i,r);return a.data.set(s),n.context.putImageData(a,0,0),n.canvas}return this.textureBuffer.canvas},e.RenderTexture.tempMatrix=new e.Matrix,e.VideoTexture=function(t,i){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),e.BaseTexture.call(this,t,i),this.autoUpdate=!1,this.updateBound=this._onUpdate.bind(this),t.complete||(this._onCanPlay=this.onCanPlay.bind(this),t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this.onPlayStart.bind(this)),t.addEventListener("pause",this.onPlayStop.bind(this)))},e.VideoTexture.prototype=Object.create(e.BaseTexture.prototype),e.VideoTexture.constructor=e.VideoTexture,e.VideoTexture.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this.updateBound),this.dirty())},e.VideoTexture.prototype.onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this.updateBound),this.autoUpdate=!0)},e.VideoTexture.prototype.onPlayStop=function(){this.autoUpdate=!1},e.VideoTexture.prototype.onCanPlay=function(){"canplaythrough"===event.type&&(this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.dispatchEvent({type:"loaded",content:this}))))},e.VideoTexture.baseTextureFromVideo=function(t,i){t._pixiId||(t._pixiId="video_"+e.TextureCacheIdGenerator++);var r=e.BaseTextureCache[t._pixiId];return r||(r=new e.VideoTexture(t,i),e.BaseTextureCache[t._pixiId]=r),r},e.VideoTexture.prototype.destroy=function(){this.source&&this.source._pixiId&&(e.BaseTextureCache[this.source._pixiId]=null,delete e.BaseTextureCache[this.source._pixiId],this.source._pixiId=null,delete this.source._pixiId),e.BaseTexture.prototype.destroy.call(this)},e.VideoTexture.textureFromVideo=function(t,i){var r=e.VideoTexture.baseTextureFromVideo(t,i);return new e.Texture(r)},e.VideoTexture.fromUrl=function(t,i){var r=document.createElement("video");return r.src=t,r.autoPlay=!0,r.play(),e.VideoTexture.textureFromVideo(r,i)},e.AssetLoader=function(t,i){this.assetURLs=t,this.crossorigin=i,this.loadersByType={jpg:e.ImageLoader,jpeg:e.ImageLoader,png:e.ImageLoader,gif:e.ImageLoader,webp:e.ImageLoader,json:e.JsonLoader,atlas:e.AtlasLoader,anim:e.SpineLoader,xml:e.BitmapFontLoader,fnt:e.BitmapFontLoader}},e.EventTarget.mixin(e.AssetLoader.prototype),e.AssetLoader.prototype.constructor=e.AssetLoader,e.AssetLoader.prototype._getDataType=function(t){var e="data:",i=t.slice(0,e.length).toLowerCase();if(i===e){var r=t.slice(e.length),s=r.indexOf(",");if(-1===s)return null;var n=r.slice(0,s).split(";")[0];return n&&"text/plain"!==n.toLowerCase()?n.split("/").pop().toLowerCase():"txt"}return null},e.AssetLoader.prototype.load=function(){function t(t){e.onAssetLoaded(t.data.content)}var e=this;this.loadCount=this.assetURLs.length;for(var i=0;i<this.assetURLs.length;i++){var r=this.assetURLs[i],s=this._getDataType(r);s||(s=r.split("?").shift().split(".").pop().toLowerCase());var n=this.loadersByType[s];if(!n)throw new Error(s+" is an unsupported file type");var a=new n(r,this.crossorigin);a.on("loaded",t),a.load()}},e.AssetLoader.prototype.onAssetLoaded=function(t){this.loadCount--,this.emit("onProgress",{content:this,loader:t}),this.onProgress&&this.onProgress(t),this.loadCount||(this.emit("onComplete",{content:this}),this.onComplete&&this.onComplete())},e.JsonLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.loaded=!1},e.JsonLoader.prototype.constructor=e.JsonLoader,e.EventTarget.mixin(e.JsonLoader.prototype),e.JsonLoader.prototype.load=function(){window.XDomainRequest&&this.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=this.onError.bind(this),this.ajaxRequest.ontimeout=this.onError.bind(this),this.ajaxRequest.onprogress=function(){}):this.ajaxRequest=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),this.ajaxRequest.onload=this.onJSONLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send()},e.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames){var t=this.baseUrl+this.json.meta.image,r=new e.ImageLoader(t,this.crossorigin),s=this.json.frames;this.texture=r.texture.baseTexture,r.addEventListener("loaded",this.onLoaded.bind(this));for(var n in s){var a=s[n].frame;if(a){var o=new e.Rectangle(a.x,a.y,a.w,a.h),h=o.clone(),l=null;if(s[n].trimmed){var u=s[n].sourceSize,c=s[n].spriteSourceSize;l=new e.Rectangle(c.x,c.y,u.w,u.h)}e.TextureCache[n]=new e.Texture(this.texture,o,h,l)}}r.load()}else if(this.json.bones){var d=new i.SkeletonJson,p=d.readSkeletonData(this.json);e.AnimCache[this.url]=p,this.onLoaded()}else this.onLoaded()},e.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},e.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},e.AtlasLoader=function(t,e){this.url=t,this.baseUrl=t.replace(/[^\/]*$/,""),this.crossorigin=e,this.loaded=!1},e.AtlasLoader.constructor=e.AtlasLoader,e.EventTarget.mixin(e.AtlasLoader.prototype),e.AtlasLoader.prototype.load=function(){this.ajaxRequest=new e.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},e.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};var t=this.ajaxRequest.responseText.split(/\r?\n/),i=-3,r=0,s=null,n=!1,a=0,o=0,h=this.onLoaded.bind(this);for(a=0;a<t.length;a++)if(t[a]=t[a].replace(/^\s+|\s+$/g,""),""===t[a]&&(n=a+1),t[a].length>0){if(n===a)this.atlas.meta.image.push(t[a]),r=this.atlas.meta.image.length-1,this.atlas.frames.push({}),i=-3;else if(i>0)if(i%7===1)null!=s&&(this.atlas.frames[r][s.name]=s),s={name:t[a],frame:{}};else{var l=t[a].split(" ");if(i%7===3)s.frame.x=Number(l[1].replace(",","")),s.frame.y=Number(l[2]);else if(i%7===4)s.frame.w=Number(l[1].replace(",","")),s.frame.h=Number(l[2]);else if(i%7===5){var u={x:0,y:0,w:Number(l[1].replace(",","")),h:Number(l[2])};u.w>s.frame.w||u.h>s.frame.h?(s.trimmed=!0,s.realSize=u):s.trimmed=!1}}i++}if(null!=s&&(this.atlas.frames[r][s.name]=s),this.atlas.meta.image.length>0){for(this.images=[],o=0;o<this.atlas.meta.image.length;o++){var c=this.baseUrl+this.atlas.meta.image[o],d=this.atlas.frames[o];this.images.push(new e.ImageLoader(c,this.crossorigin));for(a in d){var p=d[a].frame;p&&(e.TextureCache[a]=new e.Texture(this.images[o].texture.baseTexture,{x:p.x,y:p.y,width:p.w,height:p.h}),d[a].trimmed&&(e.TextureCache[a].realSize=d[a].realSize,e.TextureCache[a].trim.x=0,e.TextureCache[a].trim.y=0))}}for(this.currentImageId=0,o=0;o<this.images.length;o++)this.images[o].on("loaded",h);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},e.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.emit("loaded",{content:this}))},e.AtlasLoader.prototype.onError=function(){this.emit("error",{content:this})},e.SpriteSheetLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},e.SpriteSheetLoader.prototype.constructor=e.SpriteSheetLoader,e.EventTarget.mixin(e.SpriteSheetLoader.prototype),e.SpriteSheetLoader.prototype.load=function(){var t=this,i=new e.JsonLoader(this.url,this.crossorigin);i.on("loaded",function(e){t.json=e.data.content.json,t.onLoaded()}),i.load()},e.SpriteSheetLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},e.ImageLoader=function(t,i){this.texture=e.Texture.fromImage(t,i),this.frames=[]},e.ImageLoader.prototype.constructor=e.ImageLoader,e.EventTarget.mixin(e.ImageLoader.prototype),e.ImageLoader.prototype.load=function(){this.texture.baseTexture.hasLoaded?this.onLoaded():this.texture.baseTexture.on("loaded",this.onLoaded.bind(this))},e.ImageLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},e.ImageLoader.prototype.loadFramedSpriteSheet=function(t,i,r){this.frames=[];for(var s=Math.floor(this.texture.width/t),n=Math.floor(this.texture.height/i),a=0,o=0;n>o;o++)for(var h=0;s>h;h++,a++){var l=new e.Texture(this.texture.baseTexture,{x:h*t,y:o*i,width:t,height:i});this.frames.push(l),r&&(e.TextureCache[r+"-"+a]=l)}this.load()},e.BitmapFontLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null},e.BitmapFontLoader.prototype.constructor=e.BitmapFontLoader,e.EventTarget.mixin(e.BitmapFontLoader.prototype),e.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new e.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onXMLLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},e.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var t=this.ajaxRequest.responseXML;if(!t||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser){var i=new DOMParser;t=i.parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=this.ajaxRequest.responseText,t=r}var s=this.baseUrl+t.getElementsByTagName("page")[0].getAttribute("file"),n=new e.ImageLoader(s,this.crossorigin);this.texture=n.texture.baseTexture;var a={},o=t.getElementsByTagName("info")[0],h=t.getElementsByTagName("common")[0];a.font=o.getAttribute("face"),a.size=parseInt(o.getAttribute("size"),10),a.lineHeight=parseInt(h.getAttribute("lineHeight"),10),a.chars={};for(var l=t.getElementsByTagName("char"),u=0;u<l.length;u++){var c=parseInt(l[u].getAttribute("id"),10),d=new e.Rectangle(parseInt(l[u].getAttribute("x"),10),parseInt(l[u].getAttribute("y"),10),parseInt(l[u].getAttribute("width"),10),parseInt(l[u].getAttribute("height"),10));a.chars[c]={xOffset:parseInt(l[u].getAttribute("xoffset"),10),yOffset:parseInt(l[u].getAttribute("yoffset"),10),xAdvance:parseInt(l[u].getAttribute("xadvance"),10),kerning:{},texture:e.TextureCache[c]=new e.Texture(this.texture,d)}}var p=t.getElementsByTagName("kerning");for(u=0;u<p.length;u++){var f=parseInt(p[u].getAttribute("first"),10),m=parseInt(p[u].getAttribute("second"),10),g=parseInt(p[u].getAttribute("amount"),10);a.chars[m].kerning[f]=g}e.BitmapText.fonts[a.font]=a,n.addEventListener("loaded",this.onLoaded.bind(this)),n.load()}},e.BitmapFontLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},e.SpineLoader=function(t,e){this.url=t,this.crossorigin=e,this.loaded=!1},e.SpineLoader.prototype.constructor=e.SpineLoader,e.EventTarget.mixin(e.SpineLoader.prototype),e.SpineLoader.prototype.load=function(){var t=this,i=new e.JsonLoader(this.url,this.crossorigin);i.on("loaded",function(e){t.json=e.data.content.json,t.onLoaded()}),i.load()},e.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.emit("loaded",{content:this})},e.AbstractFilter=function(t,e){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=e||{},this.fragmentSrc=t||[]},e.AbstractFilter.prototype.constructor=e.AbstractFilter,e.AbstractFilter.prototype.syncUniforms=function(){for(var t=0,e=this.shaders.length;e>t;t++)this.shaders[t].dirty=!0},e.AlphaMaskFilter=function(t){e.AbstractFilter.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:t},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mask.value.x=t.width,this.uniforms.mask.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]},e.AlphaMaskFilter.prototype=Object.create(e.AbstractFilter.prototype),e.AlphaMaskFilter.prototype.constructor=e.AlphaMaskFilter,e.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(e.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}}),e.ColorMatrixFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},e.ColorMatrixFilter.prototype=Object.create(e.AbstractFilter.prototype),e.ColorMatrixFilter.prototype.constructor=e.ColorMatrixFilter,Object.defineProperty(e.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=t}}),e.GrayFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},e.GrayFilter.prototype=Object.create(e.AbstractFilter.prototype),e.GrayFilter.prototype.constructor=e.GrayFilter,Object.defineProperty(e.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t
}}),e.DisplacementFilter=function(t){e.AbstractFilter.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:t},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=t.width,this.uniforms.mapDimensions.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]},e.DisplacementFilter.prototype=Object.create(e.AbstractFilter.prototype),e.DisplacementFilter.prototype.constructor=e.DisplacementFilter,e.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(e.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(t){this.uniforms.displacementMap.value=t}}),Object.defineProperty(e.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}}),Object.defineProperty(e.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}),e.PixelateFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new e.Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},e.PixelateFilter.prototype=Object.create(e.AbstractFilter.prototype),e.PixelateFilter.prototype.constructor=e.PixelateFilter,Object.defineProperty(e.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.dirty=!0,this.uniforms.pixelSize.value=t}}),e.BlurXFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]},e.BlurXFilter.prototype=Object.create(e.AbstractFilter.prototype),e.BlurXFilter.prototype.constructor=e.BlurXFilter,Object.defineProperty(e.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.dirty=!0,this.uniforms.blur.value=1/7e3*t}}),e.BlurYFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},e.BlurYFilter.prototype=Object.create(e.AbstractFilter.prototype),e.BlurYFilter.prototype.constructor=e.BlurYFilter,Object.defineProperty(e.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),e.BlurFilter=function(){this.blurXFilter=new e.BlurXFilter,this.blurYFilter=new e.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},e.BlurFilter.prototype=Object.create(e.AbstractFilter.prototype),e.BlurFilter.prototype.constructor=e.BlurFilter,Object.defineProperty(e.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}}),Object.defineProperty(e.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}}),Object.defineProperty(e.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}),e.InvertFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]},e.InvertFilter.prototype=Object.create(e.AbstractFilter.prototype),e.InvertFilter.prototype.constructor=e.InvertFilter,Object.defineProperty(e.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}),e.SepiaFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},e.SepiaFilter.prototype=Object.create(e.AbstractFilter.prototype),e.SepiaFilter.prototype.constructor=e.SepiaFilter,Object.defineProperty(e.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}),e.TwistFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},e.TwistFilter.prototype=Object.create(e.AbstractFilter.prototype),e.TwistFilter.prototype.constructor=e.TwistFilter,Object.defineProperty(e.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.dirty=!0,this.uniforms.offset.value=t}}),Object.defineProperty(e.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(t){this.dirty=!0,this.uniforms.radius.value=t}}),Object.defineProperty(e.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),e.ColorStepFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},e.ColorStepFilter.prototype=Object.create(e.AbstractFilter.prototype),e.ColorStepFilter.prototype.constructor=e.ColorStepFilter,Object.defineProperty(e.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}),e.DotScreenFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},e.DotScreenFilter.prototype=Object.create(e.AbstractFilter.prototype),e.DotScreenFilter.prototype.constructor=e.DotScreenFilter,Object.defineProperty(e.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.dirty=!0,this.uniforms.scale.value=t}}),Object.defineProperty(e.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),e.CrossHatchFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},e.CrossHatchFilter.prototype=Object.create(e.AbstractFilter.prototype),e.CrossHatchFilter.prototype.constructor=e.CrossHatchFilter,Object.defineProperty(e.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),e.RGBSplitFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]},e.RGBSplitFilter.prototype=Object.create(e.AbstractFilter.prototype),e.RGBSplitFilter.prototype.constructor=e.RGBSplitFilter,Object.defineProperty(e.RGBSplitFilter.prototype,"red",{get:function(){return this.uniforms.red.value},set:function(t){this.uniforms.red.value=t}}),Object.defineProperty(e.RGBSplitFilter.prototype,"green",{get:function(){return this.uniforms.green.value},set:function(t){this.uniforms.green.value=t}}),Object.defineProperty(e.RGBSplitFilter.prototype,"blue",{get:function(){return this.uniforms.blue.value},set:function(t){this.uniforms.blue.value=t}}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.PIXI=e):"undefined"!=typeof define&&define.amd?define(e):t.PIXI=e}).call(this),function(t,e){"object"==typeof exports&&exports?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Mustache={})}(this,function(t){function e(t){return"function"==typeof t}function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function r(t,e){return f.call(t,e)}function s(t){return!r(m,t)}function n(t){return String(t).replace(/[&<>"'\/]/g,function(t){return g[t]})}function a(e,r){function n(){if(b&&!S)for(;g.length;)delete m[g.pop()];else g=[];b=!1,S=!1}function a(t){if("string"==typeof t&&(t=t.split(_,2)),!p(t)||2!==t.length)throw new Error("Invalid tags: "+t);u=new RegExp(i(t[0])+"\\s*"),c=new RegExp("\\s*"+i(t[1])),d=new RegExp("\\s*"+i("}"+t[1]))}if(!e)return[];var u,c,d,f=[],m=[],g=[],b=!1,S=!1;a(r||t.tags);for(var T,E,C,P,M,A,R=new l(e);!R.eos();){if(T=R.pos,C=R.scanUntil(u))for(var I=0,L=C.length;L>I;++I)P=C.charAt(I),s(P)?g.push(m.length):S=!0,m.push(["text",P,T,T+1]),T+=1,"\n"===P&&n();if(!R.scan(u))break;if(b=!0,E=R.scan(w)||"name",R.scan(v),"="===E?(C=R.scanUntil(y),R.scan(y),R.scanUntil(c)):"{"===E?(C=R.scanUntil(d),R.scan(x),R.scanUntil(c),E="&"):C=R.scanUntil(c),!R.scan(c))throw new Error("Unclosed tag at "+R.pos);if(M=[E,C,T,R.pos],m.push(M),"#"===E||"^"===E)f.push(M);else if("/"===E){if(A=f.pop(),!A)throw new Error('Unopened section "'+C+'" at '+T);if(A[1]!==C)throw new Error('Unclosed section "'+A[1]+'" at '+T)}else"name"===E||"{"===E||"&"===E?S=!0:"="===E&&a(C)}if(A=f.pop())throw new Error('Unclosed section "'+A[1]+'" at '+R.pos);return h(o(m))}function o(t){for(var e,i,r=[],s=0,n=t.length;n>s;++s)e=t[s],e&&("text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(r.push(e),i=e));return r}function h(t){for(var e,i,r=[],s=r,n=[],a=0,o=t.length;o>a;++a)switch(e=t[a],e[0]){case"#":case"^":s.push(e),n.push(e),s=e[4]=[];break;case"/":i=n.pop(),i[5]=e[2],s=n.length>0?n[n.length-1][4]:r;break;default:s.push(e)}return r}function l(t){this.string=t,this.tail=t,this.pos=0}function u(t,e){this.view=null==t?{}:t,this.cache={".":this.view},this.parent=e}function c(){this.cache={}}var d=Object.prototype.toString,p=Array.isArray||function(t){return"[object Array]"===d.call(t)},f=RegExp.prototype.test,m=/\S/,g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},v=/\s*/,_=/\s+/,y=/\s*=/,x=/\s*\}/,w=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var i=e[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},l.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=e.length,e},u.prototype.push=function(t){return new u(t,this)},u.prototype.lookup=function(t){var i,r=this.cache;if(t in r)i=r[t];else{for(var s,n,a=this;a;){if(t.indexOf(".")>0)for(i=a.view,s=t.split("."),n=0;null!=i&&n<s.length;)i=i[s[n++]];else"object"==typeof a.view&&(i=a.view[t]);if(null!=i)break;a=a.parent}r[t]=i}return e(i)&&(i=i.call(this.view)),i},c.prototype.clearCache=function(){this.cache={}},c.prototype.parse=function(t,e){var i=this.cache,r=i[t];return null==r&&(r=i[t]=a(t,e)),r},c.prototype.render=function(t,e,i){var r=this.parse(t),s=e instanceof u?e:new u(e);return this.renderTokens(r,s,i,t)},c.prototype.renderTokens=function(i,r,s,n){function a(t){return u.render(t,r,s)}for(var o,h,l="",u=this,c=0,d=i.length;d>c;++c)switch(o=i[c],o[0]){case"#":if(h=r.lookup(o[1]),!h)continue;if(p(h))for(var f=0,m=h.length;m>f;++f)l+=this.renderTokens(o[4],r.push(h[f]),s,n);else if("object"==typeof h||"string"==typeof h)l+=this.renderTokens(o[4],r.push(h),s,n);else if(e(h)){if("string"!=typeof n)throw new Error("Cannot use higher-order sections without the original template");h=h.call(r.view,n.slice(o[3],o[5]),a),null!=h&&(l+=h)}else l+=this.renderTokens(o[4],r,s,n);break;case"^":h=r.lookup(o[1]),(!h||p(h)&&0===h.length)&&(l+=this.renderTokens(o[4],r,s,n));break;case">":if(!s)continue;h=e(s)?s(o[1]):s[o[1]],null!=h&&(l+=this.renderTokens(this.parse(h),r,s,h));break;case"&":h=r.lookup(o[1]),null!=h&&(l+=h);break;case"name":h=r.lookup(o[1]),null!=h&&(l+=t.escape(h));break;case"text":l+=o[1]}return l},t.name="mustache.js",t.version="1.0.0",t.tags=["{{","}}"];var b=new c;t.clearCache=function(){return b.clearCache()},t.parse=function(t,e){return b.parse(t,e)},t.render=function(t,e,i){return b.render(t,e,i)},t.to_html=function(i,r,s,n){var a=t.render(i,r,s);return e(n)?void n(a):a},t.escape=n,t.Scanner=l,t.Context=u,t.Writer=c}),function(t){function e(t){PIXI.DisplayObjectContainer.call(this);var e,i=this,r=function(){var t=PIXI.Texture.fromImage(BUBBLE_TEXTURE),r=new ss.PixiSpriteParticleFactory(t),s=new ss.UniformSpawnTimer(3),n=new ss.BoxSpawnShape(new ss.Rectangle(0,0,ss.SiteManager.windowWidth(),ss.SiteManager.windowHeight()),0,0,0,0);e=new ss.PixiParticleEmitter,e.setupFromObjects(100,2,4,r,s,n,[new ss.InterpolatePropertyUpdater("alpha",1,0,Interpolation.linear),new ss.InterpolatePropertyUpdater("y",1e3,0,Interpolation.linear)],i),i.addChild(e)};return i.activate=function(){e.startEmit()},i.fade=function(){e.stopEmit()},r(t)}e.prototype=new PIXI.DisplayObjectContainer,e.constructor=e,t.BubbleSplashEffect=e}(ss),function(t){function e(t){function e(){return i={},r._listenerMap=i,r}var i,r=t||this;return r.indexOfListener=function(t,e,i){for(var r=0;r<i.length;r++)if(t===i[r].listener&&e===i[r].context)return r;return-1},r.addEventListener=function(t,e,s){if(!r.hasEventListener(t.toUpperCase(),e,s))try{var n=i[t.toUpperCase()];n.push({listener:e,context:s})}catch(a){i[t.toUpperCase()]=[{listener:e,context:s}]}},r.removeEventListener=function(t,e,s){var n=i[t.toUpperCase()];if(n){var a=r.indexOfListener(e,s,n);a>-1&&n.splice(a,1)}},r.hasEventListener=function(t,e,s){var n=i[t.toUpperCase()];return n&&r.indexOfListener(e,s,n)>-1?!0:!1},r.dispatchEvent=function(t,e){var s=i[String(t).toUpperCase()];if(s){t.target instanceof Array?t.target.push(r):t.target=[r];for(var n=0;n<s.length;n++)"string"==typeof t?s[n].listener.apply(s[n].context,[r,e]):s[n].listener.apply(s[n].context,[t])}},r.release=function(){for(var t in i)delete i[t]},e()}window.AbstractEventDispatcher=e,t.AbstractEventDispatcher=e}(ss),function(t){t.CommandState={},t.CommandState.EXECUTED="CommandState.EXECUTED",t.CommandState.CANCEL="CommandState.CANCEL",t.CommandState.IDLE="CommandState.IDLE"}(ss),function(t){function e(e){var i,r,s,n=t.AbstractEventDispatcher.call(this),a=function(e){return i=e,r=t.CommandState.IDLE,s=!1,n},o=function(){r!=t.CommandState.EXECUTED&&(r=t.CommandState.EXECUTED,n.dispatchEvent(new BaseEvent("EXECUTE")),n.release())},h=function(){r!=t.CommandState.CANCEL&&(r=t.CommandState.CANCEL),n.dispatchEvent(new BaseEvent("CANCEL")),n.release()};return n.async=function(t){return isEmpty(t)?s:s=t},n.id=function(t){return isEmpty(t)?i:i=t},n.state=function(t){return isEmpty(t)?r:r=t},n.execute=function(){o()},n.cancel=function(){h()},n.reset=function(){r=t.CommandState.IDLE},n.toString=function(){return"ICommand:"+i},a(e)}e.prototype=new t.AbstractEventDispatcher,e.prototype.constructor=e,t.AbstractCommand=e,window.AbstractCommand=e}(ss),function(t){function e(t,i){var r,s,n=this,a=function(t,e){return s=t.slice(),r=isEmpty(e)?-1:e,n},o=function(){return Math.round(Math.random())-.5};return n.length=function(){return s.length},n.shuffle=function(){return s=s.sort(o),n},n.reverse=function(){return s=reverse(),r>0&&(r=s.length-1-r),n},n.reset=function(){return r=-1,n},n.clone=function(){return new e(s.slice(0))},n.hasNext=function(){return r+1<s.length},n.next=function(){return s[++r]},n.peek=function(t){return isEmpty(t)&&(t=0),s[Math.max(0,Math.min(r+t,s.length-1))]},n.hasPrevious=function(){return r>0},n.previous=function(){return s[--r]},n.toArray=function(){return s.slice(0)},n.release=function(){r=void 0,s=void 0,n=void 0,a=void 0,o=void 0;for(var t in n)delete n[t]},a(t,i)}t.Iterator=e,window.Iterator=e}(ss),CommandQueue.init=function(element){function evalDataString(dataString){var fixedDataString=dataString,isJSONRegExp=/\s*{.*?}\s*/i;if(isJSONRegExp.test(dataString)){var regExpFix=/\({.*?}\)/i;regExpFix.test(dataString)||(fixedDataString="("+dataString+")")}return eval(fixedDataString)}function queueCommandSet(htmlCommandNode,commandSet){nodeName=htmlCommandNode.nodeName.toLowerCase();var iCommand;switch(nodeName){case"apply":var callback=eval($(htmlCommandNode).attr("callback")),params=eval($(htmlCommandNode).attr("params"));iCommand=commandSet.apply(callback,params);break;case"ajax":var url=$(htmlCommandNode).attr("url"),settings=evalDataString($(htmlCommandNode).attr("settings"));iCommand=commandSet.ajax(url,settings);break;case"css":var selector=$(htmlCommandNode).attr("selector"),propeties=evalDataString($(htmlCommandNode).attr("properties")),parent=eval($(htmlCommandNode).attr("parent"));iCommand=commandSet.css(selector,propeties,parent);break;case"lock":var delay=$(htmlCommandNode).attr("delay");iCommand=commandSet.lock(delay);break;case"dispatchevent":var target=evalDataString($(htmlCommandNode).attr("target")),event=$(htmlCommandNode).attr("event"),data=evalDataString($(htmlCommandNode).attr("data"));iCommand=commandSet.dispatchEvent(target,event,data);break;case"listener":var target=evalDataString($(htmlCommandNode).attr("target")),event=$(htmlCommandNode).attr("event"),data=evalDataString($(htmlCommandNode).attr("data"));iCommand=commandSet.listener(target,event,data);break;case"assign":var target=evalDataString($(htmlCommandNode).attr("target")),propery=$(htmlCommandNode).attr("property"),value=evalDataString($(htmlCommandNode).attr("value"));iCommand=commandSet.assign(target,event,data);break;case"debug":var target=evalDataString($(htmlCommandNode).attr("target")),event=$(htmlCommandNode).attr("event"),data=evalDataString($(htmlCommandNode).attr("data"));iCommand=commandSet.listener(target,event,data)}}$("commandQueue",element).each(function(t,e){var i=$(e).parent();try{var r="false"==$(e).attr("autostart").toLowerCase()?!1:!0}catch(s){r=!0}var n=new CommandQueue(null,r);i.commandQueue=n,$("commandSet",this).each(function(t,e){var i=new CommandSet;$("*",e).each(function(t,e){queueCommandSet(e,i)}),n.queue(i)})})}(function(t){function e(i){var r=this,s=[];r.length=function(){return s.length},r.getIterator=function(){return new Iterator(s)},r.unshift=function(t){s.unshift(t)},r.push=function(t){s.push(t)},r.apply=function(t,e,i){var r=new ApplyCommand(t,e,i);return s.push(r),r},r.css=function(t,e){var i=new CSSCommand(t,e);return s.push(i),i},r.ajax=function(t,e){var i=new AjaxCommand(t,e);return s.push(i),i},r.tweenTo=function(t,e,i){var r=new TweenToCommand(t,e,i);return s.push(r),r},r.easeTo=function(t,e,i){var r=new EaseToCommand(t,e,i);return s.push(r),r},r.lock=function(e){var i=new t.LockCommand(e);return s.push(i),i},r.dispatchEvent=function(t,e,i){return r.apply(t.dispatchEvent,[e,i],t)},r.listener=function(e,i,r,n){var a=new t.ListenerCommand(e,i,r,n);return s.push(a),a},r.thread=function(){var t=new ThreadCommand(e);return s.push(listenerCommand),t},r.debug=function(t){r.apply(console.log,[t])},r.circuit=function(e,i){var r=new t.CircuitCommand(e,i);return s.push(r),r},r.queue=function(t){return t===!0&&console.log(s),new CommandQueue(r,!0)},r.release=function(){for(var t=0;t<s.length;t++)s[t].cancel();s=null},r.toString=function(){return"CommandSet"}}t.CommandSet=e}(ss)),function(t){function e(t,e,i,r){function s(t,e,i,r){return a=t,o=e,h=i,l=r,c}function n(t,e){h&&h.apply(c._context,[t,e]),u.execute()}var a,o,h,l,u={},c=AbstractCommand.call(this,"ListenerCommand");return u.execute=c.execute,c.execute=function(){"CommandState.IDLE"==c.state()&&(c.state("CommandState.EXECUTING"),a.addEventListener(o,n))},u.release=c.release,c.release=function(){a.removeEventListener(o,n),u.release()},s(t,e,i,r)}t.ListenerCommand=e}(ss),function(t){function e(t){function e(t){return r=t,a}function i(){n.execute()}var r,s,n={},a=AbstractCommand.call(this,"LockCommand");return n.release=a.release,a.release=function(){s&&clearTimeout(s),n.release()},a.unlock=function(){n.execute()},n.execute=a.execute,a.execute=function(){"CommandState.IDLE"==a.state()&&(a.state("CommandState.EXECUTING"),r&&(s=setTimeout(function(){i()},r)))},n.cancel=a.cancel,a.cancel=function(){s&&clearTimeout(s),n.cancel()},e(t)}e.prototype=new t.AbstractCommand,e.prototype.constructor=e,t.LockCommand=e}(ss),(window._gsQueue||(window._gsQueue=[])).push(function(){"use strict";window._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var r=[].slice,s=function(t,e,r){i.call(this,t,e,r),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=s.prototype.render},n=1e-10,a=i._internals.isSelector,o=i._internals.isArray,h=s.prototype=i.to({},.1,{}),l=[];s.version="1.11.2",h.constructor=s,h.kill()._gc=!1,s.killTweensOf=s.killDelayedCallsTo=i.killTweensOf,s.getTweensOf=i.getTweensOf,s.ticker=i.ticker,h.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},h.updateTo=function(t,e){var r,s=this.ratio;e&&this.timeline&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(r in t)this.vars[r]=t[r];if(this._initted)if(e)this._initted=!1;else if(this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var n=this._time;this.render(0,!0,!1),this._initted=!1,this.render(n,!0,!1)}else if(this._time>0){this._initted=!1,this._init();for(var a,o=1/(1-s),h=this._firstPT;h;)a=h.s+h.c,h.c*=o,h.s=a-h.c,h=h._next}return this},h.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var r,s,a,o,h,u,c,d,p=this._dirty?this.totalDuration():this._totalDuration,f=this._time,m=this._totalTime,g=this._cycle,v=this._duration;if(t>=p?(this._totalTime=p,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=v,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(r=!0,s="onComplete"),0===v&&(d=this._rawPrevTime,(0===t||0>d||d===n)&&d!==t&&(i=!0,d>n&&(s="onReverseComplete")),this._rawPrevTime=d=!e||t?t:n)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===v&&this._rawPrevTime>n)&&(s="onReverseComplete",r=this._reversed),0>t?(this._active=!1,0===v&&(this._rawPrevTime>=0&&(i=!0),this._rawPrevTime=d=!e||t?t:n)):this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(o=v+this._repeatDelay,this._cycle=this._totalTime/o>>0,0!==this._cycle&&this._cycle===this._totalTime/o&&this._cycle--,this._time=this._totalTime-this._cycle*o,this._yoyo&&0!==(1&this._cycle)&&(this._time=v-this._time),this._time>v?this._time=v:0>this._time&&(this._time=0)),this._easeType?(h=this._time/v,u=this._easeType,c=this._easePower,(1===u||3===u&&h>=.5)&&(h=1-h),3===u&&(h*=2),1===c?h*=h:2===c?h*=h*h:3===c?h*=h*h*h:4===c&&(h*=h*h*h*h),this.ratio=1===u?1-h:2===u?h:.5>this._time/v?h/2:1-h/2):this.ratio=this._ease.getRatio(this._time/v)),f===this._time&&!i&&g===this._cycle)return void(m!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||l)));if(!this._initted){if(this._init(),!this._initted||this._gc)return;this._time&&!r?this.ratio=this._ease.getRatio(this._time/v):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==f&&t>=0&&(this._active=!0),0===m&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):s||(s="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===v)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||l))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||l)),this._cycle!==g&&(e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||l)),s&&(this._gc||(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[s]&&this.vars[s].apply(this.vars[s+"Scope"]||this,this.vars[s+"Params"]||l),0===v&&this._rawPrevTime===n&&d!==n&&(this._rawPrevTime=0)))},s.to=function(t,e,i){return new s(t,e,i)},s.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new s(t,e,i)},s.fromTo=function(t,e,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new s(t,e,r)},s.staggerTo=s.allTo=function(t,e,n,h,u,c,d){h=h||0;var p,f,m,g,v=n.delay||0,_=[],y=function(){n.onComplete&&n.onComplete.apply(n.onCompleteScope||this,arguments),u.apply(d||this,c||l)
};for(o(t)||("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=r.call(t,0))),p=t.length,m=0;p>m;m++){f={};for(g in n)f[g]=n[g];f.delay=v,m===p-1&&u&&(f.onComplete=y),_[m]=new s(t[m],e,f),v+=h}return _},s.staggerFrom=s.allFrom=function(t,e,i,r,n,a,o){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,s.staggerTo(t,e,i,r,n,a,o)},s.staggerFromTo=s.allFromTo=function(t,e,i,r,n,a,o,h){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,s.staggerTo(t,e,r,n,a,o,h)},s.delayedCall=function(t,e,i,r,n){return new s(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:r,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:r,immediateRender:!1,useFrames:n,overwrite:0})},s.set=function(t,e){return new s(t,0,e)},s.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var u=function(t,e){for(var r=[],s=0,n=t._first;n;)n instanceof i?r[s++]=n:(e&&(r[s++]=n),r=r.concat(u(n,e)),s=r.length),n=n._next;return r},c=s.getAllTweens=function(e){return u(t._rootTimeline,e).concat(u(t._rootFramesTimeline,e))};s.killAll=function(t,i,r,s){null==i&&(i=!0),null==r&&(r=!0);var n,a,o,h=c(0!=s),l=h.length,u=i&&r&&s;for(o=0;l>o;o++)a=h[o],(u||a instanceof e||(n=a.target===a.vars.onComplete)&&r||i&&!n)&&(t?a.totalTime(a.totalDuration()):a._enabled(!1,!1))},s.killChildTweensOf=function(t,e){if(null!=t){var n,h,l,u,c,d=i._tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=r(t,0)),o(t))for(u=t.length;--u>-1;)s.killChildTweensOf(t[u],e);else{n=[];for(l in d)for(h=d[l].target.parentNode;h;)h===t&&(n=n.concat(d[l].tweens)),h=h.parentNode;for(c=n.length,u=0;c>u;u++)e&&n[u].totalTime(n[u].totalDuration()),n[u]._enabled(!1,!1)}}};var d=function(t,i,r,s){i=i!==!1,r=r!==!1,s=s!==!1;for(var n,a,o=c(s),h=i&&r&&s,l=o.length;--l>-1;)a=o[l],(h||a instanceof e||(n=a.target===a.vars.onComplete)&&r||i&&!n)&&a.paused(t)};return s.pauseAll=function(t,e,i){d(!0,t,e,i)},s.resumeAll=function(t,e,i){d(!1,t,e,i)},s.globalTimeScale=function(e){var r=t._rootTimeline,s=i.ticker.time;return arguments.length?(e=e||n,r._startTime=s-(s-r._startTime)*r._timeScale/e,r=t._rootFramesTimeline,s=i.ticker.frame,r._startTime=s-(s-r._startTime)*r._timeScale/e,r._timeScale=t._rootTimeline._timeScale=e,e):r._timeScale},h.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},h.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},h.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},h.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},h.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},h.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},h.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},h.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},s},!0),window._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var r=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,r,s=this.vars;for(r in s)i=s[r],a(i)&&-1!==i.join("").indexOf("{self}")&&(s[r]=this._swapSelfInParams(i));a(s.tweens)&&this.add(s.tweens,0,s.align,s.stagger)},s=1e-10,n=i._internals.isSelector,a=i._internals.isArray,o=[],h=function(t){var e,i={};for(e in t)i[e]=t[e];return i},l=function(t,e,i,r){t._timeline.pause(t._startTime),e&&e.apply(r||t._timeline,i||o)},u=o.slice,c=r.prototype=new e;return r.version="1.11.0",c.constructor=r,c.kill()._gc=!1,c.to=function(t,e,r,s){return e?this.add(new i(t,e,r),s):this.set(t,r,s)},c.from=function(t,e,r,s){return this.add(i.from(t,e,r),s)},c.fromTo=function(t,e,r,s,n){return e?this.add(i.fromTo(t,e,r,s),n):this.set(t,s,n)},c.staggerTo=function(t,e,s,a,o,l,c,d){var p,f=new r({onComplete:l,onCompleteParams:c,onCompleteScope:d});for("string"==typeof t&&(t=i.selector(t)||t),n(t)&&(t=u.call(t,0)),a=a||0,p=0;t.length>p;p++)s.startAt&&(s.startAt=h(s.startAt)),f.to(t[p],e,h(s),p*a);return this.add(f,o)},c.staggerFrom=function(t,e,i,r,s,n,a,o){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,r,s,n,a,o)},c.staggerFromTo=function(t,e,i,r,s,n,a,o,h){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,r,s,n,a,o,h)},c.call=function(t,e,r,s){return this.add(i.delayedCall(0,t,e,r),s)},c.set=function(t,e,r){return r=this._parseTimeOrLabel(r,0,!0),null==e.immediateRender&&(e.immediateRender=r===this._time&&!this._paused),this.add(new i(t,0,e),r)},r.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var s,n,a=new r(t),o=a._timeline;for(null==e&&(e=!0),o._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=o._time,s=o._first;s;)n=s._next,e&&s instanceof i&&s.target===s.vars.onComplete||a.add(s,s._startTime-s._delay),s=n;return o.add(a,0),a},c.add=function(s,n,o,h){var l,u,c,d,p,f;if("number"!=typeof n&&(n=this._parseTimeOrLabel(n,0,!0,s)),!(s instanceof t)){if(s instanceof Array||s&&s.push&&a(s)){for(o=o||"normal",h=h||0,l=n,u=s.length,c=0;u>c;c++)a(d=s[c])&&(d=new r({tweens:d})),this.add(d,l),"string"!=typeof d&&"function"!=typeof d&&("sequence"===o?l=d._startTime+d.totalDuration()/d._timeScale:"start"===o&&(d._startTime-=d.delay())),l+=h;return this._uncache(!0)}if("string"==typeof s)return this.addLabel(s,n);if("function"!=typeof s)throw"Cannot add "+s+" into the timeline; it is not a tween, timeline, function, or string.";s=i.delayedCall(0,s)}if(e.prototype.add.call(this,s,n),this._gc&&!this._paused&&this._duration<this.duration())for(p=this,f=p.rawTime()>s._startTime;p._gc&&p._timeline;)p._timeline.smoothChildTiming&&f?p.totalTime(p._totalTime,!0):p._enabled(!0,!1),p=p._timeline;return this},c.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array||e&&e.push&&a(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},c._remove=function(t,i){e.prototype._remove.call(this,t,i);var r=this._last;return r?this._time>r._startTime+r._totalDuration/r._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=0,this},c.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},c.insert=c.insertMultiple=function(t,e,i,r){return this.add(t,e||0,i,r)},c.appendMultiple=function(t,e,i,r){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,r)},c.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},c.addPause=function(t,e,i,r){return this.call(l,["{self}",e,i,r],this,t)},c.removeLabel=function(t){return delete this._labels[t],this},c.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},c._parseTimeOrLabel=function(e,i,r,s){var n;if(s instanceof t&&s.timeline===this)this.remove(s);else if(s&&(s instanceof Array||s.push&&a(s)))for(n=s.length;--n>-1;)s[n]instanceof t&&s[n].timeline===this&&this.remove(s[n]);if("string"==typeof i)return this._parseTimeOrLabel(i,r&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,r);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(n=e.indexOf("="),-1===n)return null==this._labels[e]?r?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(n-1)+"1",10)*Number(e.substr(n+1)),e=n>1?this._parseTimeOrLabel(e.substr(0,n-1),0,r):this.duration()}return Number(e)+i},c.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},c.stop=function(){return this.paused(!0)},c.gotoAndPlay=function(t,e){return this.play(t,e)},c.gotoAndStop=function(t,e){return this.pause(t,e)},c.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,n,a,h,l,u=this._dirty?this.totalDuration():this._totalDuration,c=this._time,d=this._startTime,p=this._timeScale,f=this._paused;if(t>=u?(this._totalTime=this._time=u,this._reversed||this._hasPausedChild()||(n=!0,h="onComplete",0===this._duration&&(0===t||0>this._rawPrevTime||this._rawPrevTime===s)&&this._rawPrevTime!==t&&this._first&&(l=!0,this._rawPrevTime>s&&(h="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t?t:s,t=u+1e-6):1e-7>t?(this._totalTime=this._time=0,(0!==c||0===this._duration&&(this._rawPrevTime>s||0>t&&this._rawPrevTime>=0))&&(h="onReverseComplete",n=this._reversed),0>t?(this._active=!1,0===this._duration&&this._rawPrevTime>=0&&this._first&&(l=!0),this._rawPrevTime=t):(this._rawPrevTime=this._duration||!e||t?t:s,t=0,this._initted||(l=!0))):this._totalTime=this._time=this._rawPrevTime=t,this._time!==c&&this._first||i||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==c&&t>0&&(this._active=!0),0===c&&this.vars.onStart&&0!==this._time&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||o)),this._time>=c)for(r=this._first;r&&(a=r._next,!this._paused||f);)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=a;else for(r=this._last;r&&(a=r._prev,!this._paused||f);)(r._active||c>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=a;this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||o)),h&&(this._gc||(d===this._startTime||p!==this._timeScale)&&(0===this._time||u>=this.totalDuration())&&(n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[h]&&this.vars[h].apply(this.vars[h+"Scope"]||this,this.vars[h+"Params"]||o)))}},c._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof r&&t._hasPausedChild())return!0;t=t._next}return!1},c.getChildren=function(t,e,r,s){s=s||-9999999999;for(var n=[],a=this._first,o=0;a;)s>a._startTime||(a instanceof i?e!==!1&&(n[o++]=a):(r!==!1&&(n[o++]=a),t!==!1&&(n=n.concat(a.getChildren(!0,e,r)),o=n.length))),a=a._next;return n},c.getTweensOf=function(t,e){for(var r=i.getTweensOf(t),s=r.length,n=[],a=0;--s>-1;)(r[s].timeline===this||e&&this._contains(r[s]))&&(n[a++]=r[s]);return n},c._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},c.shiftChildren=function(t,e,i){i=i||0;for(var r,s=this._first,n=this._labels;s;)s._startTime>=i&&(s._startTime+=t),s=s._next;if(e)for(r in n)n[r]>=i&&(n[r]+=t);return this._uncache(!0)},c._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),r=i.length,s=!1;--r>-1;)i[r]._kill(t,e)&&(s=!0);return s},c.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},c.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return this},c._enabled=function(t,i){if(t===this._gc)for(var r=this._first;r;)r._enabled(t,!0),r=r._next;return e.prototype._enabled.call(this,t,i)},c.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},c.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,r=0,s=this._last,n=999999999999;s;)e=s._prev,s._dirty&&s.totalDuration(),s._startTime>n&&this._sortChildren&&!s._paused?this.add(s,s._startTime-s._delay):n=s._startTime,0>s._startTime&&!s._paused&&(r-=s._startTime,this._timeline.smoothChildTiming&&(this._startTime+=s._startTime/this._timeScale),this.shiftChildren(-s._startTime,!1,-9999999999),n=0),i=s._startTime+s._totalDuration/s._timeScale,i>r&&(r=i),s=e;this._duration=this._totalDuration=r,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},c.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},c.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},r},!0),window._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var r=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},s=1e-10,n=[],a=new i(null,null,1,0),o=r.prototype=new t;return o.constructor=r,o.kill()._gc=!1,r.version="1.11.0",o.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},o.addCallback=function(t,i,r,s){return this.add(e.delayedCall(0,t,r,s),i)},o.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),r=i.length,s=this._parseTimeOrLabel(e);--r>-1;)i[r]._startTime===s&&i[r]._enabled(!1,!1);return this},o.tweenTo=function(t,i){i=i||{};var r,s,o={ease:a,overwrite:2,useFrames:this.usesFrames(),immediateRender:!1};for(r in i)o[r]=i[r];return o.time=this._parseTimeOrLabel(t),s=new e(this,Math.abs(Number(o.time)-this._time)/this._timeScale||.001,o),o.onStart=function(){s.target.paused(!0),s.vars.time!==s.target.time()&&s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||s,i.onStartParams||n)},s},o.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],onCompleteScope:this},i.immediateRender=i.immediateRender!==!1;var r=this.tweenTo(e,i);return r.duration(Math.abs(r.vars.time-t)/this._timeScale||.001)},o.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,a,o,h,l,u,c=this._dirty?this.totalDuration():this._totalDuration,d=this._duration,p=this._time,f=this._totalTime,m=this._startTime,g=this._timeScale,v=this._rawPrevTime,_=this._paused,y=this._cycle;if(t>=c?(this._locked||(this._totalTime=c,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(a=!0,h="onComplete",0===this._duration&&(0===t||0>v||v===s)&&v!==t&&this._first&&(l=!0,v>s&&(h="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t?t:s,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=d,t=d+1e-6)):1e-7>t?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==p||0===d&&(v>s||0>t&&v>=0)&&!this._locked)&&(h="onReverseComplete",a=this._reversed),0>t?(this._active=!1,0===d&&v>=0&&this._first&&(l=!0),this._rawPrevTime=t):(this._rawPrevTime=d||!e||t?t:s,t=0,this._initted||(l=!0))):(0===d&&0>v&&(l=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(u=d+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!==(1&this._cycle)&&(this._time=d-this._time),this._time>d?(this._time=d,t=d+1e-6):0>this._time?this._time=t=0:t=this._time))),this._cycle!==y&&!this._locked){var x=this._yoyo&&0!==(1&y),w=x===(this._yoyo&&0!==(1&this._cycle)),b=this._totalTime,S=this._cycle,T=this._rawPrevTime,E=this._time;if(this._totalTime=y*d,y>this._cycle?x=!x:this._totalTime+=d,this._time=p,this._rawPrevTime=0===d?v-1e-5:v,this._cycle=y,this._locked=!0,p=x?0:d,this.render(p,e,0===d),e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||n),w&&(p=x?d+1e-6:-1e-6,this.render(p,!0,!1)),this._locked=!1,this._paused&&!_)return;this._time=E,this._totalTime=b,this._cycle=S,this._rawPrevTime=T}if(!(this._time!==p&&this._first||i||l))return void(f!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||n)));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==f&&t>0&&(this._active=!0),0===f&&this.vars.onStart&&0!==this._totalTime&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||n)),this._time>=p)for(r=this._first;r&&(o=r._next,!this._paused||_);)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=o;else for(r=this._last;r&&(o=r._prev,!this._paused||_);)(r._active||p>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=o;this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||n)),h&&(this._locked||this._gc||(m===this._startTime||g!==this._timeScale)&&(0===this._time||c>=this.totalDuration())&&(a&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[h]&&this.vars[h].apply(this.vars[h+"Scope"]||this,this.vars[h+"Params"]||n)))},o.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var r,s,n=[],a=this.getChildren(t,e,i),o=0,h=a.length;for(r=0;h>r;r++)s=a[r],s.isActive()&&(n[o++]=s);return n},o.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),r=i.length;for(e=0;r>e;e++)if(i[e].time>t)return i[e].name;return null},o.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(t>e[i].time)return e[i].name;return null},o.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},o.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},o.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},o.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},o.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},o.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},o.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},o.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},o.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},r},!0),function(){var t=180/Math.PI,e=[],i=[],r=[],s={},n=function(t,e,i,r){this.a=t,this.b=e,this.c=i,this.d=r,this.da=r-t,this.ca=i-t,this.ba=e-t},a=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",o=function(t,e,i,r){var s={a:t},n={},a={},o={c:r},h=(t+e)/2,l=(e+i)/2,u=(i+r)/2,c=(h+l)/2,d=(l+u)/2,p=(d-c)/8;return s.b=h+(t-h)/4,n.b=c+p,s.c=n.a=(s.b+n.b)/2,n.c=a.a=(c+d)/2,a.b=d-p,o.b=u+(r-u)/4,a.c=o.a=(a.b+o.b)/2,[s,n,a,o]},h=function(t,s,n,a,h){var l,u,c,d,p,f,m,g,v,_,y,x,w,b=t.length-1,S=0,T=t[0].a;for(l=0;b>l;l++)p=t[S],u=p.a,c=p.d,d=t[S+1].d,h?(y=e[l],x=i[l],w=.25*(x+y)*s/(a?.5:r[l]||.5),f=c-(c-u)*(a?.5*s:0!==y?w/y:0),m=c+(d-c)*(a?.5*s:0!==x?w/x:0),g=c-(f+((m-f)*(3*y/(y+x)+.5)/4||0))):(f=c-.5*(c-u)*s,m=c+.5*(d-c)*s,g=c-(f+m)/2),f+=g,m+=g,p.c=v=f,p.b=0!==l?T:T=p.a+.6*(p.c-p.a),p.da=c-u,p.ca=v-u,p.ba=T-u,n?(_=o(u,T,v,c),t.splice(S,1,_[0],_[1],_[2],_[3]),S+=4):S++,T=m;p=t[S],p.b=T,p.c=T+.4*(p.d-T),p.da=p.d-p.a,p.ca=p.c-p.a,p.ba=T-p.a,n&&(_=o(p.a,T,p.c,p.d),t.splice(S,1,_[0],_[1],_[2],_[3]))},l=function(t,r,s,a){var o,h,l,u,c,d,p=[];if(a)for(t=[a].concat(t),h=t.length;--h>-1;)"string"==typeof(d=t[h][r])&&"="===d.charAt(1)&&(t[h][r]=a[r]+Number(d.charAt(0)+d.substr(2)));if(o=t.length-2,0>o)return p[0]=new n(t[0][r],0,0,t[-1>o?0:1][r]),p;for(h=0;o>h;h++)l=t[h][r],u=t[h+1][r],p[h]=new n(l,0,0,u),s&&(c=t[h+2][r],e[h]=(e[h]||0)+(u-l)*(u-l),i[h]=(i[h]||0)+(c-u)*(c-u));return p[h]=new n(t[h][r],0,0,t[h+1][r]),p},u=function(t,n,o,u,c,d){var p,f,m,g,v,_,y,x,w={},b=[],S=d||t[0];c="string"==typeof c?","+c+",":a,null==n&&(n=1);for(f in t[0])b.push(f);if(t.length>1){for(x=t[t.length-1],y=!0,p=b.length;--p>-1;)if(f=b[p],Math.abs(S[f]-x[f])>.05){y=!1;break}y&&(t=t.concat(),d&&t.unshift(d),t.push(t[1]),d=t[t.length-3])}for(e.length=i.length=r.length=0,p=b.length;--p>-1;)f=b[p],s[f]=-1!==c.indexOf(","+f+","),w[f]=l(t,f,s[f],d);for(p=e.length;--p>-1;)e[p]=Math.sqrt(e[p]),i[p]=Math.sqrt(i[p]);if(!u){for(p=b.length;--p>-1;)if(s[f])for(m=w[b[p]],_=m.length-1,g=0;_>g;g++)v=m[g+1].da/i[g]+m[g].da/e[g],r[g]=(r[g]||0)+v*v;for(p=r.length;--p>-1;)r[p]=Math.sqrt(r[p])}for(p=b.length,g=o?4:1;--p>-1;)f=b[p],m=w[f],h(m,n,o,u,s[f]),y&&(m.splice(0,g),m.splice(m.length-g,g));return w},c=function(t,e,i){e=e||"soft";var r,s,a,o,h,l,u,c,d,p,f,m={},g="cubic"===e?3:2,v="soft"===e,_=[];if(v&&i&&(t=[i].concat(t)),null==t||g+1>t.length)throw"invalid Bezier data";for(d in t[0])_.push(d);for(l=_.length;--l>-1;){for(d=_[l],m[d]=h=[],p=0,c=t.length,u=0;c>u;u++)r=null==i?t[u][d]:"string"==typeof(f=t[u][d])&&"="===f.charAt(1)?i[d]+Number(f.charAt(0)+f.substr(2)):Number(f),v&&u>1&&c-1>u&&(h[p++]=(r+h[p-2])/2),h[p++]=r;for(c=p-g+1,p=0,u=0;c>u;u+=g)r=h[u],s=h[u+1],a=h[u+2],o=2===g?0:h[u+3],h[p++]=f=3===g?new n(r,s,a,o):new n(r,(2*s+r)/3,(2*s+a)/3,a);h.length=p}return m},d=function(t,e,i){for(var r,s,n,a,o,h,l,u,c,d,p,f=1/i,m=t.length;--m>-1;)for(d=t[m],n=d.a,a=d.d-n,o=d.c-n,h=d.b-n,r=s=0,u=1;i>=u;u++)l=f*u,c=1-l,r=s-(s=(l*l*a+3*c*(l*o+c*h))*l),p=m*i+u-1,e[p]=(e[p]||0)+r*r},p=function(t,e){e=e>>0||6;var i,r,s,n,a=[],o=[],h=0,l=0,u=e-1,c=[],p=[];for(i in t)d(t[i],a,e);for(s=a.length,r=0;s>r;r++)h+=Math.sqrt(a[r]),n=r%e,p[n]=h,n===u&&(l+=h,n=r/e>>0,c[n]=p,o[n]=l,h=0,p=[]);return{length:l,lengths:o,segments:c}},f=window._gsDefine.plugin({propName:"bezier",priority:-1,API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var r,s,n,a,o,h=e.values||[],l={},d=h[0],f=e.autoRotate||i.vars.orientToBezier;this._autoRotate=f?f instanceof Array?f:[["x","y","rotation",f===!0?0:Number(f)||0]]:null;for(r in d)this._props.push(r);for(n=this._props.length;--n>-1;)r=this._props[n],this._overwriteProps.push(r),s=this._func[r]="function"==typeof t[r],l[r]=s?t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(t[r]),o||l[r]!==h[0][r]&&(o=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?u(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,o):c(h,e.type,l),this._segCount=this._beziers[r].length,this._timeRes){var m=p(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(f=this._autoRotate)for(f[0]instanceof Array||(this._autoRotate=f=[f]),n=f.length;--n>-1;)for(a=0;3>a;a++)r=f[n][a],this._func[r]="function"==typeof t[r]?t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]:!1;return!0},set:function(e){var i,r,s,n,a,o,h,l,u,c,d=this._segCount,p=this._func,f=this._target;if(this._timeRes){if(u=this._lengths,c=this._curSeg,e*=this._length,s=this._li,e>this._l2&&d-1>s){for(l=d-1;l>s&&e>=(this._l2=u[++s]););this._l1=u[s-1],this._li=s,this._curSeg=c=this._segments[s],this._s2=c[this._s1=this._si=0]}else if(this._l1>e&&s>0){for(;s>0&&(this._l1=u[--s])>=e;);0===s&&this._l1>e?this._l1=0:s++,this._l2=u[s],this._li=s,this._curSeg=c=this._segments[s],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(i=s,e-=this._l1,s=this._si,e>this._s2&&c.length-1>s){for(l=c.length-1;l>s&&e>=(this._s2=c[++s]););this._s1=c[s-1],this._si=s}else if(this._s1>e&&s>0){for(;s>0&&(this._s1=c[--s])>=e;);0===s&&this._s1>e?this._s1=0:s++,this._s2=c[s],this._si=s}o=(s+(e-this._s1)/(this._s2-this._s1))*this._prec}else i=0>e?0:e>=1?d-1:d*e>>0,o=(e-i*(1/d))*d;for(r=1-o,s=this._props.length;--s>-1;)n=this._props[s],a=this._beziers[n][i],h=(o*o*a.da+3*r*(o*a.ca+r*a.ba))*o+a.a,this._round[n]&&(h=h+(h>0?.5:-.5)>>0),p[n]?f[n](h):f[n]=h;if(this._autoRotate){var m,g,v,_,y,x,w,b=this._autoRotate;for(s=b.length;--s>-1;)n=b[s][2],x=b[s][3]||0,w=b[s][4]===!0?1:t,a=this._beziers[b[s][0]],m=this._beziers[b[s][1]],a&&m&&(a=a[i],m=m[i],g=a.a+(a.b-a.a)*o,_=a.b+(a.c-a.b)*o,g+=(_-g)*o,_+=(a.c+(a.d-a.c)*o-_)*o,v=m.a+(m.b-m.a)*o,y=m.b+(m.c-m.b)*o,v+=(y-v)*o,y+=(m.c+(m.d-m.c)*o-y)*o,h=Math.atan2(y-v,_-g)*w+x,p[n]?f[n](h):f[n]=h)}}}),m=f.prototype;f.bezierThrough=u,f.cubicToQuadratic=o,f._autoCSS=!0,f.quadraticToCubic=function(t,e,i){return new n(t,(2*e+t)/3,(2*e+i)/3,i)},f._cssRegister=function(){var t=window._gsDefine.globals.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,r=e._setPluginRatio,s=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,n,a,o,h){e instanceof Array&&(e={values:e}),h=new f;var l,u,c,d=e.values,p=d.length-1,m=[],g={};if(0>p)return o;for(l=0;p>=l;l++)c=i(t,d[l],a,o,h,p!==l),m[l]=c.end;for(u in e)g[u]=e[u];return g.values=m,o=new s(t,"bezier",0,0,c.pt,2),o.data=c,o.plugin=h,o.setRatio=r,0===g.autoRotate&&(g.autoRotate=!0),!g.autoRotate||g.autoRotate instanceof Array||(l=g.autoRotate===!0?0:Number(g.autoRotate),g.autoRotate=null!=c.end.left?[["left","top","rotation",l,!1]]:null!=c.end.x?[["x","y","rotation",l,!1]]:!1),g.autoRotate&&(a._transform||a._enableTransforms(!1),c.autoRotate=a._target._gsTransform),h._onInitTween(c.proxy,g,a._tween),o}})}},m._roundProps=function(t,e){for(var i=this._overwriteProps,r=i.length;--r>-1;)(t[i[r]]||t.bezier||t.bezierThrough)&&(this._round[i[r]]=e)},m._kill=function(t){var e,i,r=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=r.length;--i>-1;)r[i]===e&&r.splice(i,1);return this._super._kill.call(this,t)}}(),window._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,r,s,n,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},o={},h=a.prototype=new t("css");h.constructor=a,a.version="1.11.2",a.API=2,a.defaultTransformPerspective=0,h="px",a.suffixMap={top:h,right:h,bottom:h,left:h,width:h,height:h,fontSize:h,padding:h,margin:h,perspective:h};var l,u,c,d,p,f,m=/(?:\d|\-\d|\.\d|\-\.\d)+/g,g=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,v=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,_=/[^\d\-\.]/g,y=/(?:\d|\-|\+|=|#|\.)*/g,x=/opacity *= *([^)]*)/,w=/opacity:([^;]*)/,b=/alpha\(opacity *=.+?\)/i,S=/^(rgb|hsl)/,T=/([A-Z])/g,E=/-([a-z])/gi,C=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,P=function(t,e){return e.toUpperCase()},M=/(?:Left|Right|Width)/i,A=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,R=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,I=/,(?=[^\)]*(?:\(|$))/gi,L=Math.PI/180,D=180/Math.PI,O={},F=document,B=F.createElement("div"),j=F.createElement("img"),N=a._internals={_specialProps:o},k=navigator.userAgent,U=function(){var t,e=k.indexOf("Android"),i=F.createElement("div");return c=-1!==k.indexOf("Safari")&&-1===k.indexOf("Chrome")&&(-1===e||Number(k.substr(e+8,1))>3),p=c&&6>Number(k.substr(k.indexOf("Version/")+8,1)),d=-1!==k.indexOf("Firefox"),/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(k)&&(f=parseFloat(RegExp.$1)),i.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",t=i.getElementsByTagName("a")[0],t?/^0.55/.test(t.style.opacity):!1}(),X=function(t){return x.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},G=function(t){window.console&&console.log(t)},Y="",W="",z=function(t,e){e=e||B;var i,r,s=e.style;if(void 0!==s[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],r=5;--r>-1&&void 0===s[i[r]+t];);return r>=0?(W=3===r?"ms":i[r],Y="-"+W.toLowerCase()+"-",W+t):null},H=F.defaultView?F.defaultView.getComputedStyle:function(){},V=a.getStyle=function(t,e,i,r,s){var n;return U||"opacity"!==e?(!r&&t.style[e]?n=t.style[e]:(i=i||H(t,null))?(t=i.getPropertyValue(e.replace(T,"-$1").toLowerCase()),n=t||i.length?t:i[e]):t.currentStyle&&(n=t.currentStyle[e]),null==s||n&&"none"!==n&&"auto"!==n&&"auto auto"!==n?n:s):X(t)},q=function(t,e,i,r,s){if("px"===r||!r)return i;if("auto"===r||!i)return 0;var n,a=M.test(e),o=t,h=B.style,l=0>i;return l&&(i=-i),"%"===r&&-1!==e.indexOf("border")?n=i/100*(a?t.clientWidth:t.clientHeight):(h.cssText="border:0 solid red;position:"+V(t,"position")+";line-height:0;","%"!==r&&o.appendChild?h[a?"borderLeftWidth":"borderTopWidth"]=i+r:(o=t.parentNode||F.body,h[a?"width":"height"]=i+r),o.appendChild(B),n=parseFloat(B[a?"offsetWidth":"offsetHeight"]),o.removeChild(B),0!==n||s||(n=q(t,e,i,r,!0))),l?-n:n},Q=function(t,e,i){if("absolute"!==V(t,"position",i))return 0;var r="left"===e?"Left":"Top",s=V(t,"margin"+r,i);return t["offset"+r]-(q(t,e,parseFloat(s),s.replace(y,""))||0)},$=function(t,e){var i,r,s={};if(e=e||H(t,null))if(i=e.length)for(;--i>-1;)s[e[i].replace(E,P)]=e.getPropertyValue(e[i]);else for(i in e)s[i]=e[i];else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0!==s[i]&&(s[i.replace(E,P)]=e[i]);return U||(s.opacity=X(t)),r=Se(t,e,!1),s.rotation=r.rotation,s.skewX=r.skewX,s.scaleX=r.scaleX,s.scaleY=r.scaleY,s.x=r.x,s.y=r.y,be&&(s.z=r.z,s.rotationX=r.rotationX,s.rotationY=r.rotationY,s.scaleZ=r.scaleZ),s.filters&&delete s.filters,s},J=function(t,e,i,r,s){var n,a,o,h={},l=t.style;for(a in i)"cssText"!==a&&"length"!==a&&isNaN(a)&&(e[a]!==(n=i[a])||s&&s[a])&&-1===a.indexOf("Origin")&&("number"==typeof n||"string"==typeof n)&&(h[a]="auto"!==n||"left"!==a&&"top"!==a?""!==n&&"auto"!==n&&"none"!==n||"string"!=typeof e[a]||""===e[a].replace(_,"")?n:0:Q(t,a),void 0!==l[a]&&(o=new ce(l,a,l[a],o)));if(r)for(a in r)"className"!==a&&(h[a]=r[a]);return{difs:h,firstMPT:o}},K={width:["Left","Right"],height:["Top","Bottom"]},Z=["marginLeft","marginRight","marginTop","marginBottom"],te=function(t,e,i){var r=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),s=K[e],n=s.length;for(i=i||H(t,null);--n>-1;)r-=parseFloat(V(t,"padding"+s[n],i,!0))||0,r-=parseFloat(V(t,"border"+s[n]+"Width",i,!0))||0;return r},ee=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var i=t.split(" "),r=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],s=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==s?s="0":"center"===s&&(s="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),e&&(e.oxp=-1!==r.indexOf("%"),e.oyp=-1!==s.indexOf("%"),e.oxr="="===r.charAt(1),e.oyr="="===s.charAt(1),e.ox=parseFloat(r.replace(_,"")),e.oy=parseFloat(s.replace(_,""))),r+" "+s+(i.length>2?" "+i[2]:"")
},ie=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},re=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*Number(t.substr(2))+e:parseFloat(t)},se=function(t,e,i,r){var s,n,a,o,h=1e-6;return null==t?o=e:"number"==typeof t?o=t:(s=360,n=t.split("_"),a=Number(n[0].replace(_,""))*(-1===t.indexOf("rad")?1:D)-("="===t.charAt(1)?0:e),n.length&&(r&&(r[i]=e+a),-1!==t.indexOf("short")&&(a%=s,a!==a%(s/2)&&(a=0>a?a+s:a-s)),-1!==t.indexOf("_cw")&&0>a?a=(a+9999999999*s)%s-(0|a/s)*s:-1!==t.indexOf("ccw")&&a>0&&(a=(a-9999999999*s)%s-(0|a/s)*s)),o=e+a),h>o&&o>-h&&(o=0),o},ne={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ae=function(t,e,i){return t=0>t?t+1:t>1?t-1:t,0|255*(1>6*t?e+6*(i-e)*t:.5>t?i:2>3*t?e+6*(i-e)*(2/3-t):e)+.5},oe=function(t){var e,i,r,s,n,a;return t&&""!==t?"number"==typeof t?[t>>16,255&t>>8,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),ne[t]?ne[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),i=t.charAt(2),r=t.charAt(3),t="#"+e+e+i+i+r+r),t=parseInt(t.substr(1),16),[t>>16,255&t>>8,255&t]):"hsl"===t.substr(0,3)?(t=t.match(m),s=Number(t[0])%360/360,n=Number(t[1])/100,a=Number(t[2])/100,i=.5>=a?a*(n+1):a+n-a*n,e=2*a-i,t.length>3&&(t[3]=Number(t[3])),t[0]=ae(s+1/3,e,i),t[1]=ae(s,e,i),t[2]=ae(s-1/3,e,i),t):(t=t.match(m)||ne.transparent,t[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):ne.black},he="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(h in ne)he+="|"+h+"\\b";he=RegExp(he+")","gi");var le=function(t,e,i,r){if(null==t)return function(t){return t};var s,n=e?(t.match(he)||[""])[0]:"",a=t.split(n).join("").match(v)||[],o=t.substr(0,t.indexOf(a[0])),h=")"===t.charAt(t.length-1)?")":"",l=-1!==t.indexOf(" ")?" ":",",u=a.length,c=u>0?a[0].replace(m,""):"";return u?s=e?function(t){var e,d,p,f;if("number"==typeof t)t+=c;else if(r&&I.test(t)){for(f=t.replace(I,"|").split("|"),p=0;f.length>p;p++)f[p]=s(f[p]);return f.join(",")}if(e=(t.match(he)||[n])[0],d=t.split(e).join("").match(v)||[],p=d.length,u>p--)for(;u>++p;)d[p]=i?d[0|(p-1)/2]:a[p];return o+d.join(l)+l+e+h+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,n,d;if("number"==typeof t)t+=c;else if(r&&I.test(t)){for(n=t.replace(I,"|").split("|"),d=0;n.length>d;d++)n[d]=s(n[d]);return n.join(",")}if(e=t.match(v)||[],d=e.length,u>d--)for(;u>++d;)e[d]=i?e[0|(d-1)/2]:a[d];return o+e.join(l)+h}:function(t){return t}},ue=function(t){return t=t.split(","),function(e,i,r,s,n,a,o){var h,l=(i+"").split(" ");for(o={},h=0;4>h;h++)o[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return s.parse(e,o,n,a)}},ce=(N._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,r,s,n=this.data,a=n.proxy,o=n.firstMPT,h=1e-6;o;)e=a[o.v],o.r?e=e>0?0|e+.5:0|e-.5:h>e&&e>-h&&(e=0),o.t[o.p]=e,o=o._next;if(n.autoRotate&&(n.autoRotate.rotation=a.rotation),1===t)for(o=n.firstMPT;o;){if(i=o.t,i.type){if(1===i.type){for(s=i.xs0+i.s+i.xs1,r=1;i.l>r;r++)s+=i["xn"+r]+i["xs"+(r+1)];i.e=s}}else i.e=i.s+i.xs0;o=o._next}},function(t,e,i,r,s){this.t=t,this.p=e,this.v=i,this.r=s,r&&(r._prev=this,this._next=r)}),de=(N._parseToProxy=function(t,e,i,r,s,n){var a,o,h,l,u,c=r,d={},p={},f=i._transform,m=O;for(i._transform=null,O=e,r=u=i.parse(t,e,r,s),O=m,n&&(i._transform=f,c&&(c._prev=null,c._prev&&(c._prev._next=null)));r&&r!==c;){if(1>=r.type&&(o=r.p,p[o]=r.s+r.c,d[o]=r.s,n||(l=new ce(r,"s",o,l,r.r),r.c=0),1===r.type))for(a=r.l;--a>0;)h="xn"+a,o=r.p+"_"+h,p[o]=r.data[h],d[o]=r[h],n||(l=new ce(r,h,o,l,r.rxp[h]));r=r._next}return{proxy:d,end:p,firstMPT:l,pt:u}},N.CSSPropTween=function(t,e,r,s,a,o,h,l,u,c,d){this.t=t,this.p=e,this.s=r,this.c=s,this.n=h||e,t instanceof de||n.push(this.n),this.r=l,this.type=o||0,u&&(this.pr=u,i=!0),this.b=void 0===c?r:c,this.e=void 0===d?r+s:d,a&&(this._next=a,a._prev=this)}),pe=a.parseComplex=function(t,e,i,r,s,n,a,o,h,u){i=i||n||"",a=new de(t,e,0,0,a,u?2:1,null,!1,o,i,r),r+="";var c,d,p,f,v,_,y,x,w,b,T,E,C=i.split(", ").join(",").split(" "),P=r.split(", ").join(",").split(" "),M=C.length,A=l!==!1;for((-1!==r.indexOf(",")||-1!==i.indexOf(","))&&(C=C.join(" ").replace(I,", ").split(" "),P=P.join(" ").replace(I,", ").split(" "),M=C.length),M!==P.length&&(C=(n||"").split(" "),M=C.length),a.plugin=h,a.setRatio=u,c=0;M>c;c++)if(f=C[c],v=P[c],x=parseFloat(f),x||0===x)a.appendXtra("",x,ie(v,x),v.replace(g,""),A&&-1!==v.indexOf("px"),!0);else if(s&&("#"===f.charAt(0)||ne[f]||S.test(f)))E=","===v.charAt(v.length-1)?"),":")",f=oe(f),v=oe(v),w=f.length+v.length>6,w&&!U&&0===v[3]?(a["xs"+a.l]+=a.l?" transparent":"transparent",a.e=a.e.split(P[c]).join("transparent")):(U||(w=!1),a.appendXtra(w?"rgba(":"rgb(",f[0],v[0]-f[0],",",!0,!0).appendXtra("",f[1],v[1]-f[1],",",!0).appendXtra("",f[2],v[2]-f[2],w?",":E,!0),w&&(f=4>f.length?1:f[3],a.appendXtra("",f,(4>v.length?1:v[3])-f,E,!1)));else if(_=f.match(m)){if(y=v.match(g),!y||y.length!==_.length)return a;for(p=0,d=0;_.length>d;d++)T=_[d],b=f.indexOf(T,p),a.appendXtra(f.substr(p,b-p),Number(T),ie(y[d],T),"",A&&"px"===f.substr(b+T.length,2),0===d),p=b+T.length;a["xs"+a.l]+=f.substr(p)}else a["xs"+a.l]+=a.l?" "+f:f;if(-1!==r.indexOf("=")&&a.data){for(E=a.xs0+a.data.s,c=1;a.l>c;c++)E+=a["xs"+c]+a.data["xn"+c];a.e=E+a["xs"+c]}return a.l||(a.type=-1,a.xs0=a.e),a.xfirst||a},fe=9;for(h=de.prototype,h.l=h.pr=0;--fe>0;)h["xn"+fe]=0,h["xs"+fe]="";h.xs0="",h._next=h._prev=h.xfirst=h.data=h.plugin=h.setRatio=h.rxp=null,h.appendXtra=function(t,e,i,r,s,n){var a=this,o=a.l;return a["xs"+o]+=n&&o?" "+t:t||"",i||0===o||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=r||"",o>0?(a.data["xn"+o]=e+i,a.rxp["xn"+o]=s,a["xn"+o]=e,a.plugin||(a.xfirst=new de(a,"xn"+o,e,i,a.xfirst||a,0,a.n,s,a.pr),a.xfirst.xs0=0),a):(a.data={s:e+i},a.rxp={},a.s=e,a.c=i,a.r=s,a)):(a["xs"+o]+=e+(r||""),a)};var me=function(t,e){e=e||{},this.p=e.prefix?z(t)||t:t,o[t]=o[this.p]=this,this.format=e.formatter||le(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},ge=N._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var r,s,n=t.split(","),a=e.defaultValue;for(i=i||[a],r=0;n.length>r;r++)e.prefix=0===r&&e.prefix,e.defaultValue=i[r]||a,s=new me(n[r],e)},ve=function(t){if(!o[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";ge(t,{parser:function(t,i,r,s,n,a,h){var l=(window.GreenSockGlobals||window).com.greensock.plugins[e];return l?(l._cssRegister(),o[r].parse(t,i,r,s,n,a,h)):(G("Error: "+e+" js file not loaded."),n)}})}};h=me.prototype,h.parseComplex=function(t,e,i,r,s,n){var a,o,h,l,u,c,d=this.keyword;if(this.multi&&(I.test(i)||I.test(e)?(o=e.replace(I,"|").split("|"),h=i.replace(I,"|").split("|")):d&&(o=[e],h=[i])),h){for(l=h.length>o.length?h.length:o.length,a=0;l>a;a++)e=o[a]=o[a]||this.dflt,i=h[a]=h[a]||this.dflt,d&&(u=e.indexOf(d),c=i.indexOf(d),u!==c&&(i=-1===c?h:o,i[a]+=" "+d));e=o.join(", "),i=h.join(", ")}return pe(t,this.p,e,i,this.clrs,this.dflt,r,this.pr,s,n)},h.parse=function(t,e,i,r,n,a){return this.parseComplex(t.style,this.format(V(t,this.p,s,!1,this.dflt)),this.format(e),n,a)},a.registerSpecialProp=function(t,e,i){ge(t,{parser:function(t,r,s,n,a,o){var h=new de(t,s,0,0,a,2,s,!1,i);return h.plugin=o,h.setRatio=e(t,r,n._tween,s),h},priority:i})};var _e="scaleX,scaleY,scaleZ,x,y,z,skewX,rotation,rotationX,rotationY,perspective".split(","),ye=z("transform"),xe=Y+"transform",we=z("transformOrigin"),be=null!==z("perspective"),Se=function(t,e,i,r){if(t._gsTransform&&i&&!r)return t._gsTransform;var s,n,o,h,l,u,c,d,p,f,m,g,v,_=i?t._gsTransform||{skewY:0}:{skewY:0},y=0>_.scaleX,x=2e-5,w=1e5,b=179.99,S=b*L,T=be?parseFloat(V(t,we,e,!1,"0 0 0").split(" ")[2])||_.zOrigin||0:0;for(ye?s=V(t,xe,e,!0):t.currentStyle&&(s=t.currentStyle.filter.match(A),s=s&&4===s.length?[s[0].substr(4),Number(s[2].substr(4)),Number(s[1].substr(4)),s[3].substr(4),_.x||0,_.y||0].join(","):""),n=(s||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],o=n.length;--o>-1;)h=Number(n[o]),n[o]=(l=h-(h|=0))?(0|l*w+(0>l?-.5:.5))/w+h:h;if(16===n.length){var E=n[8],C=n[9],P=n[10],M=n[12],R=n[13],I=n[14];if(_.zOrigin&&(I=-_.zOrigin,M=E*I-n[12],R=C*I-n[13],I=P*I+_.zOrigin-n[14]),!i||r||null==_.rotationX){var O,F,B,j,N,k,U,X=n[0],G=n[1],Y=n[2],W=n[3],z=n[4],H=n[5],q=n[6],Q=n[7],$=n[11],J=Math.atan2(q,P),K=-S>J||J>S;_.rotationX=J*D,J&&(j=Math.cos(-J),N=Math.sin(-J),O=z*j+E*N,F=H*j+C*N,B=q*j+P*N,E=z*-N+E*j,C=H*-N+C*j,P=q*-N+P*j,$=Q*-N+$*j,z=O,H=F,q=B),J=Math.atan2(E,X),_.rotationY=J*D,J&&(k=-S>J||J>S,j=Math.cos(-J),N=Math.sin(-J),O=X*j-E*N,F=G*j-C*N,B=Y*j-P*N,C=G*N+C*j,P=Y*N+P*j,$=W*N+$*j,X=O,G=F,Y=B),J=Math.atan2(G,H),_.rotation=J*D,J&&(U=-S>J||J>S,j=Math.cos(-J),N=Math.sin(-J),X=X*j+z*N,F=G*j+H*N,H=G*-N+H*j,q=Y*-N+q*j,G=F),U&&K?_.rotation=_.rotationX=0:U&&k?_.rotation=_.rotationY=0:k&&K&&(_.rotationY=_.rotationX=0),_.scaleX=(0|Math.sqrt(X*X+G*G)*w+.5)/w,_.scaleY=(0|Math.sqrt(H*H+C*C)*w+.5)/w,_.scaleZ=(0|Math.sqrt(q*q+P*P)*w+.5)/w,_.skewX=0,_.perspective=$?1/(0>$?-$:$):0,_.x=M,_.y=R,_.z=I}}else if(!(be&&!r&&n.length&&_.x===n[4]&&_.y===n[5]&&(_.rotationX||_.rotationY)||void 0!==_.x&&"none"===V(t,"display",e))){var Z=n.length>=6,te=Z?n[0]:1,ee=n[1]||0,ie=n[2]||0,re=Z?n[3]:1;_.x=n[4]||0,_.y=n[5]||0,u=Math.sqrt(te*te+ee*ee),c=Math.sqrt(re*re+ie*ie),d=te||ee?Math.atan2(ee,te)*D:_.rotation||0,p=ie||re?Math.atan2(ie,re)*D+d:_.skewX||0,f=u-Math.abs(_.scaleX||0),m=c-Math.abs(_.scaleY||0),Math.abs(p)>90&&270>Math.abs(p)&&(y?(u*=-1,p+=0>=d?180:-180,d+=0>=d?180:-180):(c*=-1,p+=0>=p?180:-180)),g=(d-_.rotation)%180,v=(p-_.skewX)%180,(void 0===_.skewX||f>x||-x>f||m>x||-x>m||g>-b&&b>g&&!1|g*w||v>-b&&b>v&&!1|v*w)&&(_.scaleX=u,_.scaleY=c,_.rotation=d,_.skewX=p),be&&(_.rotationX=_.rotationY=_.z=0,_.perspective=parseFloat(a.defaultTransformPerspective)||0,_.scaleZ=1)}_.zOrigin=T;for(o in _)x>_[o]&&_[o]>-x&&(_[o]=0);return i&&(t._gsTransform=_),_},Te=function(t){var e,i,r=this.data,s=-r.rotation*L,n=s+r.skewX*L,a=1e5,o=(0|Math.cos(s)*r.scaleX*a)/a,h=(0|Math.sin(s)*r.scaleX*a)/a,l=(0|Math.sin(n)*-r.scaleY*a)/a,u=(0|Math.cos(n)*r.scaleY*a)/a,c=this.t.style,d=this.t.currentStyle;if(d){i=h,h=-l,l=-i,e=d.filter,c.filter="";var p,m,g=this.t.offsetWidth,v=this.t.offsetHeight,_="absolute"!==d.position,w="progid:DXImageTransform.Microsoft.Matrix(M11="+o+", M12="+h+", M21="+l+", M22="+u,b=r.x,S=r.y;if(null!=r.ox&&(p=(r.oxp?.01*g*r.ox:r.ox)-g/2,m=(r.oyp?.01*v*r.oy:r.oy)-v/2,b+=p-(p*o+m*h),S+=m-(p*l+m*u)),_?(p=g/2,m=v/2,w+=", Dx="+(p-(p*o+m*h)+b)+", Dy="+(m-(p*l+m*u)+S)+")"):w+=", sizingMethod='auto expand')",c.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(R,w):w+" "+e,(0===t||1===t)&&1===o&&0===h&&0===l&&1===u&&(_&&-1===w.indexOf("Dx=0, Dy=0")||x.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf("gradient("&&e.indexOf("Alpha"))&&c.removeAttribute("filter")),!_){var T,E,C,P=8>f?1:-1;for(p=r.ieOffsetX||0,m=r.ieOffsetY||0,r.ieOffsetX=Math.round((g-((0>o?-o:o)*g+(0>h?-h:h)*v))/2+b),r.ieOffsetY=Math.round((v-((0>u?-u:u)*v+(0>l?-l:l)*g))/2+S),fe=0;4>fe;fe++)E=Z[fe],T=d[E],i=-1!==T.indexOf("px")?parseFloat(T):q(this.t,E,parseFloat(T),T.replace(y,""))||0,C=i!==r[E]?2>fe?-r.ieOffsetX:-r.ieOffsetY:2>fe?p-r.ieOffsetX:m-r.ieOffsetY,c[E]=(r[E]=Math.round(i-C*(0===fe||2===fe?1:P)))+"px"}}},Ee=function(){var t,e,i,r,s,n,a,o,h,l,u,c,p,f,m,g,v,_,y,x,w,b,S,T=this.data,E=this.t.style,C=T.rotation*L,P=T.scaleX,M=T.scaleY,A=T.scaleZ,R=T.perspective;if(d){var I=1e-4;I>P&&P>-I&&(P=A=2e-5),I>M&&M>-I&&(M=A=2e-5),!R||T.z||T.rotationX||T.rotationY||(R=0)}if(C||T.skewX)_=Math.cos(C),y=Math.sin(C),t=_,s=y,T.skewX&&(C-=T.skewX*L,_=Math.cos(C),y=Math.sin(C)),e=-y,n=_;else{if(!(T.rotationY||T.rotationX||1!==A||R))return void(E[ye]="translate3d("+T.x+"px,"+T.y+"px,"+T.z+"px)"+(1!==P||1!==M?" scale("+P+","+M+")":""));t=n=1,e=s=0}u=1,i=r=a=o=h=l=c=p=f=0,m=R?-1/R:0,g=T.zOrigin,v=1e5,C=T.rotationY*L,C&&(_=Math.cos(C),y=Math.sin(C),h=u*-y,p=m*-y,i=t*y,a=s*y,u*=_,m*=_,t*=_,s*=_),C=T.rotationX*L,C&&(_=Math.cos(C),y=Math.sin(C),x=e*_+i*y,w=n*_+a*y,b=l*_+u*y,S=f*_+m*y,i=e*-y+i*_,a=n*-y+a*_,u=l*-y+u*_,m=f*-y+m*_,e=x,n=w,l=b,f=S),1!==A&&(i*=A,a*=A,u*=A,m*=A),1!==M&&(e*=M,n*=M,l*=M,f*=M),1!==P&&(t*=P,s*=P,h*=P,p*=P),g&&(c-=g,r=i*c,o=a*c,c=u*c+g),r=(x=(r+=T.x)-(r|=0))?(0|x*v+(0>x?-.5:.5))/v+r:r,o=(x=(o+=T.y)-(o|=0))?(0|x*v+(0>x?-.5:.5))/v+o:o,c=(x=(c+=T.z)-(c|=0))?(0|x*v+(0>x?-.5:.5))/v+c:c,E[ye]="matrix3d("+[(0|t*v)/v,(0|s*v)/v,(0|h*v)/v,(0|p*v)/v,(0|e*v)/v,(0|n*v)/v,(0|l*v)/v,(0|f*v)/v,(0|i*v)/v,(0|a*v)/v,(0|u*v)/v,(0|m*v)/v,r,o,c,R?1+-c/R:1].join(",")+")"},Ce=function(){var t,e,i,r,s,n,a,o,h,l=this.data,u=this.t,c=u.style;d&&(t=c.top?"top":c.bottom?"bottom":parseFloat(V(u,"top",null,!1))?"bottom":"top",e=V(u,t,null,!1),i=parseFloat(e)||0,r=e.substr((i+"").length)||"px",l._ffFix=!l._ffFix,c[t]=(l._ffFix?i+.05:i-.05)+r),l.rotation||l.skewX?(s=l.rotation*L,n=s-l.skewX*L,a=1e5,o=l.scaleX*a,h=l.scaleY*a,c[ye]="matrix("+(0|Math.cos(s)*o)/a+","+(0|Math.sin(s)*o)/a+","+(0|Math.sin(n)*-h)/a+","+(0|Math.cos(n)*h)/a+","+l.x+","+l.y+")"):c[ye]="matrix("+l.scaleX+",0,0,"+l.scaleY+","+l.x+","+l.y+")"};ge("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D",{parser:function(t,e,i,r,n,a,o){if(r._transform)return n;var h,l,u,c,d,p,f,m=r._transform=Se(t,s,!0,o.parseTransform),g=t.style,v=1e-6,_=_e.length,y=o,x={};if("string"==typeof y.transform&&ye)u=g.cssText,g[ye]=y.transform,g.display="block",h=Se(t,null,!1),g.cssText=u;else if("object"==typeof y){if(h={scaleX:re(null!=y.scaleX?y.scaleX:y.scale,m.scaleX),scaleY:re(null!=y.scaleY?y.scaleY:y.scale,m.scaleY),scaleZ:re(null!=y.scaleZ?y.scaleZ:y.scale,m.scaleZ),x:re(y.x,m.x),y:re(y.y,m.y),z:re(y.z,m.z),perspective:re(y.transformPerspective,m.perspective)},f=y.directionalRotation,null!=f)if("object"==typeof f)for(u in f)y[u]=f[u];else y.rotation=f;h.rotation=se("rotation"in y?y.rotation:"shortRotation"in y?y.shortRotation+"_short":"rotationZ"in y?y.rotationZ:m.rotation,m.rotation,"rotation",x),be&&(h.rotationX=se("rotationX"in y?y.rotationX:"shortRotationX"in y?y.shortRotationX+"_short":m.rotationX||0,m.rotationX,"rotationX",x),h.rotationY=se("rotationY"in y?y.rotationY:"shortRotationY"in y?y.shortRotationY+"_short":m.rotationY||0,m.rotationY,"rotationY",x)),h.skewX=null==y.skewX?m.skewX:se(y.skewX,m.skewX),h.skewY=null==y.skewY?m.skewY:se(y.skewY,m.skewY),(l=h.skewY-m.skewY)&&(h.skewX+=l,h.rotation+=l)}for(null!=y.force3D&&(m.force3D=y.force3D,p=!0),d=m.force3D||m.z||m.rotationX||m.rotationY||h.z||h.rotationX||h.rotationY||h.perspective,d||null==y.scale||(h.scaleZ=1);--_>-1;)i=_e[_],c=h[i]-m[i],(c>v||-v>c||null!=O[i])&&(p=!0,n=new de(m,i,m[i],c,n),i in x&&(n.e=x[i]),n.xs0=0,n.plugin=a,r._overwriteProps.push(n.n));return c=y.transformOrigin,(c||be&&d&&m.zOrigin)&&(ye?(p=!0,i=we,c=(c||V(t,i,s,!1,"50% 50%"))+"",n=new de(g,i,0,0,n,-1,"transformOrigin"),n.b=g[i],n.plugin=a,be?(u=m.zOrigin,c=c.split(" "),m.zOrigin=(c.length>2&&(0===u||"0px"!==c[2])?parseFloat(c[2]):u)||0,n.xs0=n.e=g[i]=c[0]+" "+(c[1]||"50%")+" 0px",n=new de(m,"zOrigin",0,0,n,-1,n.n),n.b=u,n.xs0=n.e=m.zOrigin):n.xs0=n.e=g[i]=c):ee(c+"",m)),p&&(r._transformType=d||3===this._transformType?3:2),n},prefix:!0}),ge("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),ge("borderRadius",{defaultValue:"0px",parser:function(t,e,i,n,a){e=this.format(e);var o,h,l,u,c,d,p,f,m,g,v,_,y,x,w,b,S=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],T=t.style;for(m=parseFloat(t.offsetWidth),g=parseFloat(t.offsetHeight),o=e.split(" "),h=0;S.length>h;h++)this.p.indexOf("border")&&(S[h]=z(S[h])),c=u=V(t,S[h],s,!1,"0px"),-1!==c.indexOf(" ")&&(u=c.split(" "),c=u[0],u=u[1]),d=l=o[h],p=parseFloat(c),_=c.substr((p+"").length),y="="===d.charAt(1),y?(f=parseInt(d.charAt(0)+"1",10),d=d.substr(2),f*=parseFloat(d),v=d.substr((f+"").length-(0>f?1:0))||""):(f=parseFloat(d),v=d.substr((f+"").length)),""===v&&(v=r[i]||_),v!==_&&(x=q(t,"borderLeft",p,_),w=q(t,"borderTop",p,_),"%"===v?(c=100*(x/m)+"%",u=100*(w/g)+"%"):"em"===v?(b=q(t,"borderLeft",1,"em"),c=x/b+"em",u=w/b+"em"):(c=x+"px",u=w+"px"),y&&(d=parseFloat(c)+f+v,l=parseFloat(u)+f+v)),a=pe(T,S[h],c+" "+u,d+" "+l,!1,"0px",a);return a},prefix:!0,formatter:le("0px 0px 0px 0px",!1,!0)}),ge("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,r,n,a){var o,h,l,u,c,d,p="background-position",m=s||H(t,null),g=this.format((m?f?m.getPropertyValue(p+"-x")+" "+m.getPropertyValue(p+"-y"):m.getPropertyValue(p):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),v=this.format(e);if(-1!==g.indexOf("%")!=(-1!==v.indexOf("%"))&&(d=V(t,"backgroundImage").replace(C,""),d&&"none"!==d)){for(o=g.split(" "),h=v.split(" "),j.setAttribute("src",d),l=2;--l>-1;)g=o[l],u=-1!==g.indexOf("%"),u!==(-1!==h[l].indexOf("%"))&&(c=0===l?t.offsetWidth-j.width:t.offsetHeight-j.height,o[l]=u?parseFloat(g)/100*c+"px":100*(parseFloat(g)/c)+"%");g=o.join(" ")}return this.parseComplex(t.style,g,v,n,a)},formatter:ee}),ge("backgroundSize",{defaultValue:"0 0",formatter:ee}),ge("perspective",{defaultValue:"0px",prefix:!0}),ge("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),ge("transformStyle",{prefix:!0}),ge("backfaceVisibility",{prefix:!0}),ge("userSelect",{prefix:!0}),ge("margin",{parser:ue("marginTop,marginRight,marginBottom,marginLeft")}),ge("padding",{parser:ue("paddingTop,paddingRight,paddingBottom,paddingLeft")}),ge("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,r,n,a){var o,h,l;return 9>f?(h=t.currentStyle,l=8>f?" ":",",o="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(o=this.format(V(t,this.p,s,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,o,e,n,a)}}),ge("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),ge("autoRound,strictUnits",{parser:function(t,e,i,r,s){return s}}),ge("border",{defaultValue:"0px solid #000",parser:function(t,e,i,r,n,a){return this.parseComplex(t.style,this.format(V(t,"borderTopWidth",s,!1,"0px")+" "+V(t,"borderTopStyle",s,!1,"solid")+" "+V(t,"borderTopColor",s,!1,"#000")),this.format(e),n,a)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(he)||["#000"])[0]}}),ge("float,cssFloat,styleFloat",{parser:function(t,e,i,r,s){var n=t.style,a="cssFloat"in n?"cssFloat":"styleFloat";return new de(n,a,0,0,s,-1,i,!1,0,n[a],e)}});var Pe=function(t){var e,i=this.t,r=i.filter||V(this.data,"filter"),s=0|this.s+this.c*t;100===s&&(-1===r.indexOf("atrix(")&&-1===r.indexOf("radient(")&&-1===r.indexOf("oader(")?(i.removeAttribute("filter"),e=!V(this.data,"filter")):(i.filter=r.replace(b,""),e=!0)),e||(this.xn1&&(i.filter=r=r||"alpha(opacity="+s+")"),-1===r.indexOf("opacity")?0===s&&this.xn1||(i.filter=r+" alpha(opacity="+s+")"):i.filter=r.replace(x,"opacity="+s))};ge("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,r,n,a){var o=parseFloat(V(t,"opacity",s,!1,"1")),h=t.style,l="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+o),l&&1===o&&"hidden"===V(t,"visibility",s)&&0!==e&&(o=0),U?n=new de(h,"opacity",o,e-o,n):(n=new de(h,"opacity",100*o,100*(e-o),n),n.xn1=l?1:0,h.zoom=1,n.type=2,n.b="alpha(opacity="+n.s+")",n.e="alpha(opacity="+(n.s+n.c)+")",n.data=t,n.plugin=a,n.setRatio=Pe),l&&(n=new de(h,"visibility",0,0,n,-1,null,!1,0,0!==o?"inherit":"hidden",0===e?"hidden":"inherit"),n.xs0="inherit",r._overwriteProps.push(n.n),r._overwriteProps.push(i)),n}});var Me=function(t,e){e&&(t.removeProperty?t.removeProperty(e.replace(T,"-$1").toLowerCase()):t.removeAttribute(e))},Ae=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.className=0===t?this.b:this.e;for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Me(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.className!==this.e&&(this.t.className=this.e)};ge("className",{parser:function(t,e,r,n,a,o,h){var l,u,c,d,p,f=t.className,m=t.style.cssText;if(a=n._classNamePT=new de(t,r,0,0,a,2),a.setRatio=Ae,a.pr=-11,i=!0,a.b=f,u=$(t,s),c=t._gsClassPT){for(d={},p=c.data;p;)d[p.p]=1,p=p._next;c.setRatio(1)}return t._gsClassPT=a,a.e="="!==e.charAt(1)?e:f.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),n._tween._duration&&(t.className=a.e,l=J(t,u,$(t),h,d),t.className=f,a.data=l.firstMPT,t.style.cssText=m,a=a.xfirst=n.parse(t,l.difs,a,o)),a}});var Re=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,r,s,n=this.t.style,a=o.transform.parse;if("all"===this.e)n.cssText="",s=!0;else for(e=this.e.split(","),r=e.length;--r>-1;)i=e[r],o[i]&&(o[i].parse===a?s=!0:i="transformOrigin"===i?we:o[i].p),Me(n,i);s&&(Me(n,ye),this.t._gsTransform&&delete this.t._gsTransform)}};for(ge("clearProps",{parser:function(t,e,r,s,n){return n=new de(t,r,0,0,n,2),n.setRatio=Re,n.e=e,n.pr=-10,n.data=s._tween,i=!0,n}}),h="bezier,throwProps,physicsProps,physics2D".split(","),fe=h.length;fe--;)ve(h[fe]);h=a.prototype,h._firstPT=null,h._onInitTween=function(t,e,o){if(!t.nodeType)return!1;this._target=t,this._tween=o,this._vars=e,l=e.autoRound,i=!1,r=e.suffixMap||a.suffixMap,s=H(t,""),n=this._overwriteProps;var h,d,f,m,g,v,_,y,x,b=t.style;if(u&&""===b.zIndex&&(h=V(t,"zIndex",s),("auto"===h||""===h)&&(b.zIndex=0)),"string"==typeof e&&(m=b.cssText,h=$(t,s),b.cssText=m+";"+e,h=J(t,h,$(t)).difs,!U&&w.test(e)&&(h.opacity=parseFloat(RegExp.$1)),e=h,b.cssText=m),this._firstPT=d=this.parse(t,e,null),this._transformType){for(x=3===this._transformType,ye?c&&(u=!0,""===b.zIndex&&(_=V(t,"zIndex",s),("auto"===_||""===_)&&(b.zIndex=0)),p&&(b.WebkitBackfaceVisibility=this._vars.WebkitBackfaceVisibility||(x?"visible":"hidden"))):b.zoom=1,f=d;f&&f._next;)f=f._next;y=new de(t,"transform",0,0,null,2),this._linkCSSP(y,null,f),y.setRatio=x&&be?Ee:ye?Ce:Te,y.data=this._transform||Se(t,s,!0),n.pop()}if(i){for(;d;){for(v=d._next,f=m;f&&f.pr>d.pr;)f=f._next;(d._prev=f?f._prev:g)?d._prev._next=d:m=d,(d._next=f)?f._prev=d:g=d,d=v}this._firstPT=m}return!0},h.parse=function(t,e,i,n){var a,h,u,c,d,p,f,m,g,v,_=t.style;for(a in e)p=e[a],h=o[a],h?i=h.parse(t,p,a,this,i,n,e):(d=V(t,a,s)+"",g="string"==typeof p,"color"===a||"fill"===a||"stroke"===a||-1!==a.indexOf("Color")||g&&S.test(p)?(g||(p=oe(p),p=(p.length>3?"rgba(":"rgb(")+p.join(",")+")"),i=pe(_,a,d,p,!0,"transparent",i,0,n)):!g||-1===p.indexOf(" ")&&-1===p.indexOf(",")?(u=parseFloat(d),f=u||0===u?d.substr((u+"").length):"",(""===d||"auto"===d)&&("width"===a||"height"===a?(u=te(t,a,s),f="px"):"left"===a||"top"===a?(u=Q(t,a,s),f="px"):(u="opacity"!==a?0:1,f="")),v=g&&"="===p.charAt(1),v?(c=parseInt(p.charAt(0)+"1",10),p=p.substr(2),c*=parseFloat(p),m=p.replace(y,"")):(c=parseFloat(p),m=g?p.substr((c+"").length)||"":""),""===m&&(m=r[a]||f),p=c||0===c?(v?c+u:c)+m:e[a],f!==m&&""!==m&&(c||0===c)&&(u||0===u)&&(u=q(t,a,u,f),"%"===m?(u/=q(t,a,100,"%")/100,u>100&&(u=100),e.strictUnits!==!0&&(d=u+"%")):"em"===m?u/=q(t,a,1,"em"):(c=q(t,a,c,m),m="px"),v&&(c||0===c)&&(p=c+u+m)),v&&(c+=u),!u&&0!==u||!c&&0!==c?void 0!==_[a]&&(p||"NaN"!=p+""&&null!=p)?(i=new de(_,a,c||u||0,0,i,-1,a,!1,0,d,p),i.xs0="none"!==p||"display"!==a&&-1===a.indexOf("Style")?p:d):G("invalid "+a+" tween value: "+e[a]):(i=new de(_,a,u,c-u,i,0,a,l!==!1&&("px"===m||"zIndex"===a),0,d,p),i.xs0=m)):i=pe(_,a,d,p,!0,null,i,0,n)),n&&i&&!i.plugin&&(i.plugin=n);return i},h.setRatio=function(t){var e,i,r,s=this._firstPT,n=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;s;){if(e=s.c*t+s.s,s.r?e=e>0?0|e+.5:0|e-.5:n>e&&e>-n&&(e=0),s.type)if(1===s.type)if(r=s.l,2===r)s.t[s.p]=s.xs0+e+s.xs1+s.xn1+s.xs2;else if(3===r)s.t[s.p]=s.xs0+e+s.xs1+s.xn1+s.xs2+s.xn2+s.xs3;else if(4===r)s.t[s.p]=s.xs0+e+s.xs1+s.xn1+s.xs2+s.xn2+s.xs3+s.xn3+s.xs4;else if(5===r)s.t[s.p]=s.xs0+e+s.xs1+s.xn1+s.xs2+s.xn2+s.xs3+s.xn3+s.xs4+s.xn4+s.xs5;else{for(i=s.xs0+e+s.xs1,r=1;s.l>r;r++)i+=s["xn"+r]+s["xs"+(r+1)];s.t[s.p]=i}else-1===s.type?s.t[s.p]=s.xs0:s.setRatio&&s.setRatio(t);else s.t[s.p]=e+s.xs0;s=s._next}else for(;s;)2!==s.type?s.t[s.p]=s.b:s.setRatio(t),s=s._next;else for(;s;)2!==s.type?s.t[s.p]=s.e:s.setRatio(t),s=s._next},h._enableTransforms=function(t){this._transformType=t||3===this._transformType?3:2,this._transform=this._transform||Se(this._target,s,!0)},h._linkCSSP=function(t,e,i,r){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,r=!0),i?i._next=t:r||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},h._kill=function(e){var i,r,s,n=e;if(e.autoAlpha||e.alpha){n={};for(r in e)n[r]=e[r];n.opacity=1,n.autoAlpha&&(n.visibility=1)}return e.className&&(i=this._classNamePT)&&(s=i.xfirst,s&&s._prev?this._linkCSSP(s._prev,i._next,s._prev._prev):s===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,s._prev),this._classNamePT=null),t.prototype._kill.call(this,n)};var Ie=function(t,e,i){var r,s,n,a;if(t.slice)for(s=t.length;--s>-1;)Ie(t[s],e,i);else for(r=t.childNodes,s=r.length;--s>-1;)n=r[s],a=n.type,n.style&&(e.push($(n)),i&&i.push(n)),1!==a&&9!==a&&11!==a||!n.childNodes.length||Ie(n,e,i)};return a.cascadeTo=function(t,i,r){var s,n,a,o=e.to(t,i,r),h=[o],l=[],u=[],c=[],d=e._internals.reservedProps;for(t=o._targets||o.target,Ie(t,l,c),o.render(i,!0),Ie(t,u),o.render(0,!0),o._enabled(!0),s=c.length;--s>-1;)if(n=J(c[s],l[s],u[s]),n.firstMPT){n=n.difs;for(a in r)d[a]&&(n[a]=r[a]);h.push(e.to(c[s],i,n))}return h},t.activate([a]),a},!0),function(){var t=window._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=t.prototype;e._onInitAllProps=function(){for(var t,e,i,r=this._tween,s=r.vars.roundProps instanceof Array?r.vars.roundProps:r.vars.roundProps.split(","),n=s.length,a={},o=r._propLookup.roundProps;--n>-1;)a[s[n]]=1;for(n=s.length;--n>-1;)for(t=s[n],e=r._firstPT;e;)i=e._next,e.pg?e.t._roundProps(a,!0):e.n===t&&(this._add(e.t,t,e.s,e.c),i&&(i._prev=e._prev),e._prev?e._prev._next=i:r._firstPT===e&&(r._firstPT=i),e._next=e._prev=null,r._propLookup[t]=o),e=i;return!1},e._add=function(t,e,i,r){this._addTween(t,e,i,i+r,e,!0),this._overwriteProps.push(e)}}(),window._gsDefine.plugin({propName:"attr",API:2,init:function(t,e){var i;if("function"!=typeof t.setAttribute)return!1;this._target=t,this._proxy={};for(i in e)this._addTween(this._proxy,i,parseFloat(t.getAttribute(i)),e[i],i)&&this._overwriteProps.push(i);return!0},set:function(t){this._super.setRatio.call(this,t);for(var e,i=this._overwriteProps,r=i.length;--r>-1;)e=i[r],this._target.setAttribute(e,this._proxy[e]+"")}}),window._gsDefine.plugin({propName:"directionalRotation",API:2,init:function(t,e){"object"!=typeof e&&(e={rotation:e}),this.finals={};var i,r,s,n,a,o,h=e.useRadians===!0?2*Math.PI:360,l=1e-6;for(i in e)"useRadians"!==i&&(o=(e[i]+"").split("_"),r=o[0],s=parseFloat("function"!=typeof t[i]?t[i]:t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]()),n=this.finals[i]="string"==typeof r&&"="===r.charAt(1)?s+parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)):Number(r)||0,a=n-s,o.length&&(r=o.join("_"),-1!==r.indexOf("short")&&(a%=h,a!==a%(h/2)&&(a=0>a?a+h:a-h)),-1!==r.indexOf("_cw")&&0>a?a=(a+9999999999*h)%h-(0|a/h)*h:-1!==r.indexOf("ccw")&&a>0&&(a=(a-9999999999*h)%h-(0|a/h)*h)),(a>l||-l>a)&&(this._addTween(t,i,s,s+a,i),this._overwriteProps.push(i)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,window._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,r,s=window.GreenSockGlobals||window,n=s.com.greensock,a=2*Math.PI,o=Math.PI/2,h=n._class,l=function(e,i){var r=h("easing."+e,function(){},!0),s=r.prototype=new t;return s.constructor=r,s.getRatio=i,r},u=t.register||function(){},c=function(t,e,i,r){var s=h("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new r},!0);return u(s,t),s},d=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},p=function(e,i){var r=h("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),s=r.prototype=new t;return s.constructor=r,s.getRatio=i,s.config=function(t){return new r(t)},r},f=c("Back",p("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),p("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),p("BackInOut",function(t){return 1>(t*=2)?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),m=h("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),g=m.prototype=new t;return g.constructor=m,g.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),g.config=m.config=function(t,e,i){return new m(t,e,i)},e=h("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),g=e.prototype=new t,g.constructor=e,g.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},g.config=e.config=function(t){return new e(t)},i=h("easing.RoughEase",function(e){e=e||{};for(var i,r,s,n,a,o,h=e.taper||"none",l=[],u=0,c=0|(e.points||20),p=c,f=e.randomize!==!1,m=e.clamp===!0,g=e.template instanceof t?e.template:null,v="number"==typeof e.strength?.4*e.strength:.4;--p>-1;)i=f?Math.random():1/c*p,r=g?g.getRatio(i):i,"none"===h?s=v:"out"===h?(n=1-i,s=n*n*v):"in"===h?s=i*i*v:.5>i?(n=2*i,s=.5*n*n*v):(n=2*(1-i),s=.5*n*n*v),f?r+=Math.random()*s-.5*s:p%2?r+=.5*s:r-=.5*s,m&&(r>1?r=1:0>r&&(r=0)),l[u++]={x:i,y:r};for(l.sort(function(t,e){return t.x-e.x}),o=new d(1,1,null),p=c;--p>-1;)a=l[p],o=new d(a.x,a.y,o);this._prev=new d(0,0,0!==o.t?o:o.next)},!0),g=i.prototype=new t,g.constructor=i,g.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},g.config=function(t){return new i(t)},i.ease=new i,c("Bounce",l("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),l("BounceIn",function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),l("BounceInOut",function(t){var e=.5>t;return t=e?1-2*t:2*t-1,t=1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),c("Circ",l("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),l("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),l("CircInOut",function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),r=function(e,i,r){var s=h("easing."+e,function(t,e){this._p1=t||1,this._p2=e||r,this._p3=this._p2/a*(Math.asin(1/this._p1)||0)},!0),n=s.prototype=new t;return n.constructor=s,n.getRatio=i,n.config=function(t,e){return new s(t,e)},s},c("Elastic",r("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*a/this._p2)+1
},.3),r("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*a/this._p2))},.3),r("ElasticInOut",function(t){return 1>(t*=2)?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*a/this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*a/this._p2)+1},.45)),c("Expo",l("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),l("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),l("ExpoInOut",function(t){return 1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),c("Sine",l("SineOut",function(t){return Math.sin(t*o)}),l("SineIn",function(t){return-Math.cos(t*o)+1}),l("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),h("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),u(s.SlowMo,"SlowMo","ease,"),u(i,"RoughEase","ease,"),u(e,"SteppedEase","ease,"),f},!0)}),function(t){"use strict";var e=t.GreenSockGlobals||t;if(!e.TweenLite){var i,r,s,n,a,o=function(t){var i,r=t.split("."),s=e;for(i=0;r.length>i;i++)s[r[i]]=s=s[r[i]]||{};return s},h=o("com.greensock"),l=1e-10,u=[].slice,c=function(){},d=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e}}(),p={},f=function(i,r,s,n){this.sc=p[i]?p[i].sc:[],p[i]=this,this.gsClass=null,this.func=s;var a=[];this.check=function(h){for(var l,u,c,d,m=r.length,g=m;--m>-1;)(l=p[r[m]]||new f(r[m],[])).gsClass?(a[m]=l.gsClass,g--):h&&l.sc.push(this);if(0===g&&s)for(u=("com.greensock."+i).split("."),c=u.pop(),d=o(u.join("."))[c]=this.gsClass=s.apply(s,a),n&&(e[c]=d,"function"==typeof define&&define.amd?define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+i.split(".").join("/"),[],function(){return d}):"undefined"!=typeof module&&module.exports&&(module.exports=d)),m=0;this.sc.length>m;m++)this.sc[m].check()},this.check(!0)},m=t._gsDefine=function(t,e,i,r){return new f(t,e,i,r)},g=h._class=function(t,e,i){return e=e||function(){},m(t,[],function(){return e},i),e};m.globals=e;var v=[0,0,1,1],_=[],y=g("easing.Ease",function(t,e,i,r){this._func=t,this._type=i||0,this._power=r||0,this._params=e?v.concat(e):v},!0),x=y.map={},w=y.register=function(t,e,i,r){for(var s,n,a,o,l=e.split(","),u=l.length,c=(i||"easeIn,easeOut,easeInOut").split(",");--u>-1;)for(n=l[u],s=r?g("easing."+n,null,!0):h.easing[n]||{},a=c.length;--a>-1;)o=c[a],x[n+"."+o]=x[o+n]=s[o]=t.getRatio?t:t[o]||new t};for(s=y.prototype,s._calcEnd=!1,s.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,r=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===i?r*=r:2===i?r*=r*r:3===i?r*=r*r*r:4===i&&(r*=r*r*r*r),1===e?1-r:2===e?r:.5>t?r/2:1-r/2},i=["Linear","Quad","Cubic","Quart","Quint,Strong"],r=i.length;--r>-1;)s=i[r]+",Power"+r,w(new y(null,null,1,r),s,"easeOut",!0),w(new y(null,null,2,r),s,"easeIn"+(0===r?",easeNone":"")),w(new y(null,null,3,r),s,"easeInOut");x.linear=h.easing.Linear.easeIn,x.swing=h.easing.Quad.easeInOut;var b=g("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});s=b.prototype,s.addEventListener=function(t,e,i,r,s){s=s||0;var o,h,l=this._listeners[t],u=0;for(null==l&&(this._listeners[t]=l=[]),h=l.length;--h>-1;)o=l[h],o.c===e&&o.s===i?l.splice(h,1):0===u&&s>o.pr&&(u=h+1);l.splice(u,0,{c:e,s:i,up:r,pr:s}),this!==n||a||n.wake()},s.removeEventListener=function(t,e){var i,r=this._listeners[t];if(r)for(i=r.length;--i>-1;)if(r[i].c===e)return void r.splice(i,1)},s.dispatchEvent=function(t){var e,i,r,s=this._listeners[t];if(s)for(e=s.length,i=this._eventTarget;--e>-1;)r=s[e],r.up?r.c.call(r.s||i,{type:t,target:i}):r.c.call(r.s||i)};var S=t.requestAnimationFrame,T=t.cancelAnimationFrame,E=Date.now||function(){return(new Date).getTime()},C=E();for(i=["ms","moz","webkit","o"],r=i.length;--r>-1&&!S;)S=t[i[r]+"RequestAnimationFrame"],T=t[i[r]+"CancelAnimationFrame"]||t[i[r]+"CancelRequestAnimationFrame"];g("Ticker",function(t,e){var i,r,s,o,h,l=this,u=E(),d=e!==!1&&S,p=function(t){C=E(),l.time=(C-u)/1e3;var e,n=l.time-h;(!i||n>0||t===!0)&&(l.frame++,h+=n+(n>=o?.004:o-n),e=!0),t!==!0&&(s=r(p)),e&&l.dispatchEvent("tick")};b.call(l),l.time=l.frame=0,l.tick=function(){p(!0)},l.sleep=function(){null!=s&&(d&&T?T(s):clearTimeout(s),r=c,s=null,l===n&&(a=!1))},l.wake=function(){null!==s&&l.sleep(),r=0===i?c:d&&S?S:function(t){return setTimeout(t,0|1e3*(h-l.time)+1)},l===n&&(a=!0),p(2)},l.fps=function(t){return arguments.length?(i=t,o=1/(i||60),h=this.time+o,void l.wake()):i},l.useRAF=function(t){return arguments.length?(l.sleep(),d=t,void l.fps(i)):d},l.fps(t),setTimeout(function(){d&&(!s||5>l.frame)&&l.useRAF(!1)},1500)}),s=h.Ticker.prototype=new h.events.EventDispatcher,s.constructor=h.Ticker;var P=g("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,U){a||n.wake();var i=this.vars.useFrames?k:U;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});n=P.ticker=new h.Ticker,s=P.prototype,s._dirty=s._gc=s._initted=s._paused=!1,s._totalTime=s._time=0,s._rawPrevTime=-1,s._next=s._last=s._onUpdate=s._timeline=s.timeline=null,s._paused=!1;var M=function(){a&&E()-C>2e3&&n.wake(),setTimeout(M,2e3)};M(),s.play=function(t,e){return arguments.length&&this.seek(t,e),this.reversed(!1).paused(!1)},s.pause=function(t,e){return arguments.length&&this.seek(t,e),this.paused(!0)},s.resume=function(t,e){return arguments.length&&this.seek(t,e),this.paused(!1)},s.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},s.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},s.reverse=function(t,e){return arguments.length&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},s.render=function(){},s.invalidate=function(){return this},s.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=i&&i+this.totalDuration()/this._timeScale>t},s._enabled=function(t,e){return a||n.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},s._kill=function(){return this._enabled(!1,!1)},s.kill=function(t,e){return this._kill(t,e),this},s._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},s._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},s.eventCallback=function(t,e,i,r){if("on"===(t||"").substr(0,2)){var s=this.vars;if(1===arguments.length)return s[t];null==e?delete s[t]:(s[t]=e,s[t+"Params"]=d(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,s[t+"Scope"]=r),"onUpdate"===t&&(this._onUpdate=e)}return this},s.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},s.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},s.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},s.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},s.totalTime=function(t,e,i){if(a||n.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,s=this._timeline;if(t>r&&!i&&(t=r),this._startTime=(this._paused?this._pauseTime:s._time)-(this._reversed?r-t:t)/this._timeScale,s._dirty||this._uncache(!1),s._timeline)for(;s._timeline;)s._timeline._time!==(s._startTime+s._totalTime)/s._timeScale&&s.totalTime(s._totalTime,!0),s=s._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&this.render(t,e,!1)}return this},s.progress=s.totalProgress=function(t,e){return arguments.length?this.totalTime(this.duration()*t,e):this._time/this.duration()},s.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},s.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||l,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},s.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._totalTime,!0)),this):this._reversed},s.paused=function(t){if(!arguments.length)return this._paused;if(t!=this._paused&&this._timeline){a||t||n.wake();var e=this._timeline,i=e.rawTime(),r=i-this._pauseTime;!t&&e.smoothChildTiming&&(this._startTime+=r,this._uncache(!1)),this._pauseTime=t?i:null,this._paused=t,this._active=this.isActive(),!t&&0!==r&&this._initted&&this.duration()&&this.render(e.smoothChildTiming?this._totalTime:(i-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!t&&this._enabled(!0,!1),this};var A=g("core.SimpleTimeline",function(t){P.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});s=A.prototype=new P,s.constructor=A,s.kill()._gc=!1,s._first=s._last=null,s._sortChildren=!1,s.add=s.insert=function(t,e){var i,r;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),i=this._last,this._sortChildren)for(r=t._startTime;i&&i._startTime>r;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=i,this._timeline&&this._uncache(!0),this},s._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t.timeline=null,t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),this._timeline&&this._uncache(!0)),this},s.render=function(t,e,i){var r,s=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;s;)r=s._next,(s._active||t>=s._startTime&&!s._paused)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=r},s.rawTime=function(){return a||n.wake(),this._totalTime};var R=g("TweenLite",function(e,i,r){if(P.call(this,i,r),this.render=R.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:R.selector(e)||e;var s,n,a,o=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?N[R.defaultOverwrite]:"number"==typeof h?h>>0:N[h],(o||e instanceof Array||e.push&&d(e))&&"number"!=typeof e[0])for(this._targets=a=u.call(e,0),this._propLookup=[],this._siblings=[],s=0;a.length>s;s++)n=a[s],n?"string"!=typeof n?n.length&&n!==t&&n[0]&&(n[0]===t||n[0].nodeType&&n[0].style&&!n.nodeType)?(a.splice(s--,1),this._targets=a=a.concat(u.call(n,0))):(this._siblings[s]=X(n,this,!1),1===h&&this._siblings[s].length>1&&G(n,this,null,1,this._siblings[s])):(n=a[s--]=R.selector(n),"string"==typeof n&&a.splice(s+1,1)):a.splice(s--,1);else this._propLookup={},this._siblings=X(e,this,!1),1===h&&this._siblings.length>1&&G(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&this.vars.immediateRender!==!1)&&this.render(-this._delay,!1,!0)},!0),I=function(e){return e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},L=function(t,e){var i,r={};for(i in t)j[i]||i in e&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!O[i]||O[i]&&O[i]._autoCSS)||(r[i]=t[i],delete t[i]);t.css=r};s=R.prototype=new P,s.constructor=R,s.kill()._gc=!1,s.ratio=0,s._firstPT=s._targets=s._overwrittenProps=s._startAt=null,s._notifyPluginsOfEnabled=!1,R.version="1.11.2",R.defaultEase=s._ease=new y(null,null,1,1),R.defaultOverwrite="auto",R.ticker=n,R.autoSleep=!0,R.selector=t.$||t.jQuery||function(e){return t.$?(R.selector=t.$,t.$(e)):t.document?t.document.getElementById("#"===e.charAt(0)?e.substr(1):e):e};var D=R._internals={isArray:d,isSelector:I},O=R._plugins={},F=R._tweenLookup={},B=0,j=D.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1},N={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},k=P._rootFramesTimeline=new A,U=P._rootTimeline=new A;U._startTime=n.time,k._startTime=n.frame,U._active=k._active=!0,P._updateRoot=function(){if(U.render((n.time-U._startTime)*U._timeScale,!1,!1),k.render((n.frame-k._startTime)*k._timeScale,!1,!1),!(n.frame%120)){var t,e,i;for(i in F){for(e=F[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete F[i]}if(i=U._first,(!i||i._paused)&&R.autoSleep&&!k._first&&1===n._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||n.sleep()}}},n.addEventListener("tick",P._updateRoot);var X=function(t,e,i){var r,s,n=t._gsTweenID;if(F[n||(t._gsTweenID=n="t"+B++)]||(F[n]={target:t,tweens:[]}),e&&(r=F[n].tweens,r[s=r.length]=e,i))for(;--s>-1;)r[s]===e&&r.splice(s,1);return F[n].tweens},G=function(t,e,i,r,s){var n,a,o,h;if(1===r||r>=4){for(h=s.length,n=0;h>n;n++)if((o=s[n])!==e)o._gc||o._enabled(!1,!1)&&(a=!0);else if(5===r)break;return a}var u,c=e._startTime+l,d=[],p=0,f=0===e._duration;for(n=s.length;--n>-1;)(o=s[n])===e||o._gc||o._paused||(o._timeline!==e._timeline?(u=u||Y(e,0,f),0===Y(o,u,f)&&(d[p++]=o)):c>=o._startTime&&o._startTime+o.totalDuration()/o._timeScale+l>c&&((f||!o._initted)&&2e-10>=c-o._startTime||(d[p++]=o)));for(n=p;--n>-1;)o=d[n],2===r&&o._kill(i,t)&&(a=!0),(2!==r||!o._firstPT&&o._initted)&&o._enabled(!1,!1)&&(a=!0);return a},Y=function(t,e,i){for(var r=t._timeline,s=r._timeScale,n=t._startTime;r._timeline;){if(n+=r._startTime,s*=r._timeScale,r._paused)return-100;r=r._timeline}return n/=s,n>e?n-e:i&&n===e||!t._initted&&2*l>n-e?l:(n+=t.totalDuration()/t._timeScale/s)>e+l?0:n-e-l};s._init=function(){var t,e,i,r,s=this.vars,n=this._overwrittenProps,a=this._duration,o=s.immediateRender,h=s.ease;if(s.startAt){if(this._startAt&&this._startAt.render(-1,!0),s.startAt.overwrite=0,s.startAt.immediateRender=!0,this._startAt=R.to(this.target,0,s.startAt),o)if(this._time>0)this._startAt=null;else if(0!==a)return}else if(s.runBackwards&&0!==a)if(this._startAt)this._startAt.render(-1,!0),this._startAt=null;else{i={};for(r in s)j[r]&&"autoCSS"!==r||(i[r]=s[r]);if(i.overwrite=0,i.data="isFromStart",this._startAt=R.to(this.target,0,i),s.immediateRender){if(0===this._time)return}else this._startAt.render(-1,!0)}if(this._ease=h?h instanceof y?s.easeParams instanceof Array?h.config.apply(h,s.easeParams):h:"function"==typeof h?new y(h,s.easeParams):x[h]||R.defaultEase:R.defaultEase,this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],n?n[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,n);if(e&&R._onPluginEvent("_onInitAllProps",this),n&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=s.onUpdate,this._initted=!0},s._initProps=function(e,i,r,s){var n,a,o,h,l,u;if(null==e)return!1;this.vars.css||e.style&&e!==t&&e.nodeType&&O.css&&this.vars.autoCSS!==!1&&L(this.vars,e);for(n in this.vars){if(u=this.vars[n],j[n])u&&(u instanceof Array||u.push&&d(u))&&-1!==u.join("").indexOf("{self}")&&(this.vars[n]=u=this._swapSelfInParams(u,this));else if(O[n]&&(h=new O[n])._onInitTween(e,this.vars[n],this)){for(this._firstPT=l={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:!0,n:n,pg:!0,pr:h._priority},a=h._overwriteProps.length;--a>-1;)i[h._overwriteProps[a]]=this._firstPT;(h._priority||h._onInitAllProps)&&(o=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=i[n]=l={_next:this._firstPT,t:e,p:n,f:"function"==typeof e[n],n:n,pg:!1,pr:0},l.s=l.f?e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(e[n]),l.c="string"==typeof u&&"="===u.charAt(1)?parseInt(u.charAt(0)+"1",10)*Number(u.substr(2)):Number(u)-l.s||0;l&&l._next&&(l._next._prev=l)}return s&&this._kill(s,e)?this._initProps(e,i,r,s):this._overwrite>1&&this._firstPT&&r.length>1&&G(e,this,i,this._overwrite,r)?(this._kill(i,e),this._initProps(e,i,r,s)):o},s.render=function(t,e,i){var r,s,n,a,o=this._time,h=this._duration;if(t>=h)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(r=!0,s="onComplete"),0===h&&(a=this._rawPrevTime,(0===t||0>a||a===l)&&a!==t&&(i=!0,a>l&&(s="onReverseComplete")),this._rawPrevTime=a=!e||t?t:l);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==o||0===h&&this._rawPrevTime>l)&&(s="onReverseComplete",r=this._reversed),0>t?(this._active=!1,0===h&&(this._rawPrevTime>=0&&(i=!0),this._rawPrevTime=a=!e||t?t:l)):this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var u=t/h,c=this._easeType,d=this._easePower;(1===c||3===c&&u>=.5)&&(u=1-u),3===c&&(u*=2),1===d?u*=u:2===d?u*=u*u:3===d?u*=u*u*u:4===d&&(u*=u*u*u*u),this.ratio=1===c?1-u:2===c?u:.5>t/h?u/2:1-u/2}else this.ratio=this._ease.getRatio(t/h);if(this._time!==o||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;this._time&&!r?this.ratio=this._ease.getRatio(this._time/h):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==o&&t>=0&&(this._active=!0),0===o&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):s||(s="_dummyGS")),this.vars.onStart&&(0!==this._time||0===h)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||_))),n=this._firstPT;n;)n.f?n.t[n.p](n.c*this.ratio+n.s):n.t[n.p]=n.c*this.ratio+n.s,n=n._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||i&&0===this._time&&0===o||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||_)),s&&(this._gc||(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[s]&&this.vars[s].apply(this.vars[s+"Scope"]||this,this.vars[s+"Params"]||_),0===h&&this._rawPrevTime===l&&a!==l&&(this._rawPrevTime=0)))}},s._kill=function(t,e){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:R.selector(e)||e;var i,r,s,n,a,o,h,l;if((d(e)||I(e))&&"number"!=typeof e[0])for(i=e.length;--i>-1;)this._kill(t,e[i])&&(o=!0);else{if(this._targets){for(i=this._targets.length;--i>-1;)if(e===this._targets[i]){a=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[i]=t?this._overwrittenProps[i]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){h=t||a,l=t!==r&&"all"!==r&&t!==a&&("object"!=typeof t||!t._tempKill);for(s in h)(n=a[s])&&(n.pg&&n.t._kill(h)&&(o=!0),n.pg&&0!==n.t._overwriteProps.length||(n._prev?n._prev._next=n._next:n===this._firstPT&&(this._firstPT=n._next),n._next&&(n._next._prev=n._prev),n._next=n._prev=null),delete a[s]),l&&(r[s]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return o},s.invalidate=function(){return this._notifyPluginsOfEnabled&&R._onPluginEvent("_onDisable",this),this._firstPT=null,this._overwrittenProps=null,this._onUpdate=null,this._startAt=null,this._initted=this._active=this._notifyPluginsOfEnabled=!1,this._propLookup=this._targets?{}:[],this},s._enabled=function(t,e){if(a||n.wake(),t&&this._gc){var i,r=this._targets;if(r)for(i=r.length;--i>-1;)this._siblings[i]=X(r[i],this,!0);else this._siblings=X(this.target,this,!0)}return P.prototype._enabled.call(this,t,e),this._notifyPluginsOfEnabled&&this._firstPT?R._onPluginEvent(t?"_onEnable":"_onDisable",this):!1},R.to=function(t,e,i){return new R(t,e,i)},R.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new R(t,e,i)},R.fromTo=function(t,e,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new R(t,e,r)},R.delayedCall=function(t,e,i,r,s){return new R(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:r,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:r,immediateRender:!1,useFrames:s,overwrite:0})},R.set=function(t,e){return new R(t,0,e)},R.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:R.selector(t)||t;var i,r,s,n;if((d(t)||I(t))&&"number"!=typeof t[0]){for(i=t.length,r=[];--i>-1;)r=r.concat(R.getTweensOf(t[i],e));for(i=r.length;--i>-1;)for(n=r[i],s=i;--s>-1;)n===r[s]&&r.splice(i,1)}else for(r=X(t).concat(),i=r.length;--i>-1;)(r[i]._gc||e&&!r[i].isActive())&&r.splice(i,1);return r},R.killTweensOf=R.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var r=R.getTweensOf(t,e),s=r.length;--s>-1;)r[s]._kill(i,t)};var W=g("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=W.prototype},!0);if(s=W.prototype,W.version="1.10.1",W.API=2,s._firstPT=null,s._addTween=function(t,e,i,r,s,n){var a,o;return null!=r&&(a="number"==typeof r||"="!==r.charAt(1)?Number(r)-i:parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)))?(this._firstPT=o={_next:this._firstPT,t:t,p:e,s:i,c:a,f:"function"==typeof t[e],n:s||e,r:n},o._next&&(o._next._prev=o),o):void 0},s.setRatio=function(t){for(var e,i=this._firstPT,r=1e-6;i;)e=i.c*t+i.s,i.r?e=0|e+(e>0?.5:-.5):r>e&&e>-r&&(e=0),i.f?i.t[i.p](e):i.t[i.p]=e,i=i._next},s._kill=function(t){var e,i=this._overwriteProps,r=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;r;)null!=t[r.n]&&(r._next&&(r._next._prev=r._prev),r._prev?(r._prev._next=r._next,r._prev=null):this._firstPT===r&&(this._firstPT=r._next)),r=r._next;return!1},s._roundProps=function(t,e){for(var i=this._firstPT;i;)(t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&(i.r=e),i=i._next},R._onPluginEvent=function(t,e){var i,r,s,n,a,o=e._firstPT;if("_onInitAllProps"===t){for(;o;){for(a=o._next,r=s;r&&r.pr>o.pr;)r=r._next;(o._prev=r?r._prev:n)?o._prev._next=o:s=o,(o._next=r)?r._prev=o:n=o,o=a}o=e._firstPT=s}for(;o;)o.pg&&"function"==typeof o.t[t]&&o.t[t]()&&(i=!0),o=o._next;return i},W.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===W.API&&(O[(new t[e])._propName]=t[e]);return!0},m.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,r=t.priority||0,s=t.overwriteProps,n={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},a=g("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){W.call(this,i,r),this._overwriteProps=s||[]},t.global===!0),o=a.prototype=new W(i);o.constructor=a,a.API=t.API;for(e in n)"function"==typeof t[e]&&(o[n[e]]=t[e]);return a.version=t.version,W.activate([a]),a},i=t._gsQueue){for(r=0;i.length>r;r++)i[r]();for(s in p)p[s].func||t.console.log("GSAP encountered missing dependency: com.greensock."+s)}a=!1}}(window),function(t){function e(i,r){function s(t,e){return a=e,o=isEmpty(t)?[]:t,h.showChildren=o,h}var n,a,o,h=t.AbstractEventDispatcher(this);return h.parent=function(t){return isEmpty(t)?n:n=t},h.children=function(e){return 1!=e?new t.Iterator(o):o.slice()},h.siblings=function(){return t.TreeNode.getSiblings(h)},h.isRoot=function(){return isUndefined(n)},h.hasChildren=function(){return o.length>0},h.hasSiblings=function(){return n?n.numChildren()>1:!1},h.numChildren=function(){return o.length},h.numSiblings=function(){return n?n.numChildren():0},h.depth=function(){for(var e=0,i=0;i<o.length;i++){var r=o[i];e+=r instanceof t.TreeNode?r.depth():1}return e},h.contains=function(e){for(var i=0;o>i;i++){var r=o[i];if(r instanceof t.TreeNode){if(r.contains(e))return!0}else if(r==e)return!0}return!1},h.clear=function(){for(;o.length;){var e=o.shift();e instanceof t.TreeNode&&e.clear()}},h.addChildren=function(t){o=o.concat(t)},h.addChild=function(t){t instanceof e&&t.parent(h),o.push(t)},h.removeChild=function(t){for(var e=0;e<o.length();e++)if(t==o[e])return void o.splice(e,1);throw t+" does not exist as an child"},s(i,r)}e.getSiblings=function(e){var i=e.parent();if(isEmpty(i))return new t.Iterator([]);var r=i.children(!0);return r=r.splice(r.indexOf(e),1),new t.Iterator(r)},t.TreeNode=e}(ss),function(t){function e(){this.hashes=[]}e.prototype={constructor:e,put:function(t,e){this.hashes.push({key:t,value:e})},get:function(t){for(var e=0;e<this.hashes.length;e++)if(this.hashes[e].key==t)return this.hashes[e].value}},t.Dictionary=e}(ss),function(t){"use strict";function e(i){var r={},s=t.AbstractCommand.call(this);t.TreeNode.call(this);var n,a,o=function(e){if(n=new t.Dictionary,a=[],!isEmpty(e))for(var i=0;i<e.length;i++)s.addChild(e[i]);return s},h=function(){s.dispatchEvent(new BaseEvent("CHANGE"))};return s.prependModifier=function(t){if(isEmpty(a)&&(a=[]),t instanceof String)switch(String(t).toUpperCase()){case"NOT":case"!":a.push(e.NOT);break;default:throw new Error("AbstractCircuitNode::prependModifier ( ... ) - Unknown Modifier added "+t)}},r.clear=s.clear,s.clear=function(){for(var e=s.children();e.hasNext();){var i=e.next();i.removeEventListener("CHANGE",h),i.removeEventListener("EXECUTE",h),i.removeEventListener("REVERSE",h),i.removeEventListener("CANCEL",h)}n=new t.Dictionary,a=[],r.clear()},r.addChild=s.addChild,s.addChild=function(i){if(!(i instanceof e||i instanceof t.AbstractCommand))throw"Parameter must be an CircuitNode or Command : "+i;a?(n.put(i,a),a=null):(i.addEventListener("CHANGE",h),i.addEventListener("EXECUTE",h),i.addEventListener("REVERSE",h),i.addEventListener("CANCEL",h)),r.addChild(i)},s.value=function(){throw"AbstractCircuitNode::value () must be overriden in subclasses"},s.removeChild=function(){throw"please remember to implement AbstractCircuitNode::removeChild"},s.processValue=function(i){var r;if(i instanceof e)r=i.value();else{if(!(i instanceof t.AbstractCommand))throw new Error("AbstractCircuitNode::getValue () - parameter must be an ICircuitNode or ICommand");switch(i.state()){case t.CommandState.EXECUTED:case t.CommandState.REVERSED:case t.CommandState.CANCELLED:r=!0;break;default:r=!1}}var s=n.get(i);return s&&s.indexOf(e.NOT)>-1?!r:r},o(i)}e.prototype=new t.AbstractCommand,e.prototype.constructor=e,e.OR="CircuitNode.OR",e.AND="CircuitNode.AND",e.NOT="CircuitNode.NOT",e.XOR="CircuitNode.XOR",e.PUSH="CircuitNode.PUSH",e.POP="CircuitNode.POP",t.AbstractCircuitNode=e}(ss),function(t){function e(e,i){var r,s,n={},a=t.AbstractCircuitNode.call(this),o=function(t,e){if(console.log("CircuitCommand",e),e instanceof Array){s={};for(var i=0;i<e.length;i++)iCommand=e[i],s[iCommand.id()]=iCommand}else s=e;var n=t.replace("!","NOT"),o=n.split(/\s+/);return r=h(o),a},h=function(e){for(var i,r=[];e.length;){switch(i=e.shift()){case"(":r.push(h(e));break;case")":return r.shift();case"AND":r.unshift(new t.ANDNode);break;case"OR":r.unshift(new t.ORNode);break;case"XOR":r.unshift(new t.XORNode);break;case"!":case"NOT":r.push("NOT");continue;default:if(!(s[i]instanceof t.AbstractCommand))throw"No ICommand was attached to ID : "+i;r.push(s[i])}l(r)}return r.shift()},l=function(e){if(e[0]instanceof t.AbstractCircuitNode){for(var i=e.shift();e.length;){for(var r=e.shift();u(r);)i.prependModifier(r),r=e.shift();i.addChild(r)}e.unshift(i)}},u=function(t){switch(t){case"NOT":case"!":return!0}return!1},c=function(){r.value()&&(n.execute(),a.clear())};return n.execute=a.execute,a.execute=function(){r.value()?(n.execute(),a.clear()):r.addEventListener("CHANGE",c)},a.value=function(){},o(e,i)}e.prototype=new t.AbstractCircuitNode,e.prototype.constructor=e,t.CircuitCommand=e}(ss),function(t){function e(e){function i(){return r}var r=t.AbstractCircuitNode.call(this,e);return r.value=function(){var t=r.children();if(t.hasNext()){for(var e=r.processValue(t.next());t.hasNext();)e|=r.processValue(t.next());return e}return!1},i(e)}e.prototype=new t.AbstractCircuitNode,e.prototype.constructor=e,t.ORNode=e}(ss),function(t){function e(e){function i(){return r}var r=t.AbstractCircuitNode.call(this,e);return r.value=function(){var t=r.children();if(t.hasNext()){for(var e=r.processValue(t.next());t.hasNext();)e&=r.processValue(t.next());return e}return!1},i(e)}e.prototype=new t.AbstractCircuitNode,e.prototype.constructor=e,t.ANDNode=e}(ss),function(t){function e(e){function i(){return r}var r=t.AbstractCircuitNode.call(this,e);return r.value=function(){var t=r.children();if(t.hasNext()){for(var e=r.processValue(t.next());t.hasNext();)e^=r.processValue(t.next());return e}return!1},i(e)}e.prototype=new t.AbstractCircuitNode,e.prototype.constructor=e,t.XORNode=e}(ss),function(t){function e(e,i,r){function s(){var e=new t.CommandSet;e.tweenTo(c,l.speed+.5*Math.random(),{rotation:l.min,ease:Sine.easeInOut}),e.tweenTo(c,l.speed+.5*Math.random(),{rotation:l.max,ease:Sine.easeInOut}),e.apply(function(){s()}),u.queue(e)}var n,a,o,h,l,u,c,d=this,p=function(e,i,r){c=r;var d=setDefault(e.drag.x,e.drag),p=setDefault(e.drag.y,e.drag);if(n={x:r.x,y:r.y},a={x:2*Math.random()*Math.PI*d,y:2*Math.random()*Math.PI*p},o={x:setDefault(e.speed&&e.speed.x,Math.random()*d),y:Math.random()*p},h={x:setDefault(e.distance&&e.distance.x,.1),y:setDefault(e.distance&&e.distance.y,.1)},!isEmpty(e.rotation)){l={min:setDefault(e.rotation&&.0174532925*e.rotation.min,-0.2617993875),max:setDefault(e.rotation&&.0174532925*e.rotation.max,.2617993875),speed:setDefault(e.rotation&&e.rotation.speed,1.75)};var f=new t.CommandSet;f.tweenTo(c,l.speed+.125*Math.random(),{rotation:l.min,ease:Sine.easeInOut}),f.tweenTo(c,l.speed+.5*Math.random(),{rotation:l.max,ease:Sine.easeInOut}),f.apply(function(){s()}),u=f.queue()}};return d.resize=function(t){n.x=t.x,n.y=t.y},d.update=function(t,e,i){a.x+=o.x*i,a.y+=o.y*i,t.x=n.x+Math.cos(a.x)*t.width*h.x,t.y=n.y+Math.sin(a.y)*t.height*h.y},p(e,i,r)}t.FloatSpriteEffect=e}(ss),ss.BaseParticleUpdater=function(){"use strict";var t=this;t.initParticles=function(){},t.updateParticles=function(){}},ss.BubbleParticleInitializer=function(t,e,i,r){"use strict";ss.BaseParticleUpdater.call(this);var s=this;this.name="BubbleParticleInitializer",this.exposedVariables=["minScale","maxScale","minSpeed","maxSpeed"],this.minScale=t,this.maxScale=e,this.minSpeed=i,this.maxSpeed=r,s.initParticles=function(e,s,n){for(var a,o,h,l,u=this.maxScale-this.minScale,c=s;n>=c;c++){if(a=this.minScale+Math.random()*u,e[c].scale.x=a,e[c].scale.y=a,o=Math.sqrt(e[c].velX*e[c].velX+e[c].velY*e[c].velY),0==o)return;h=i+(r-i)*((a-t)/u),l=h/o,e[c].velX=e[c].velX*l,e[c].velY=e[c].velY*l}}},ss.BubbleParticleInitializer.prototype=new ss.BaseParticleUpdater,ss.BubbleParticleInitializer.prototype.constructor=ss.BubbleParticleInitializer,ss.RandomPropertyRateChangeUpdater=function(t,e,i,r){"use strict";ss.BaseParticleUpdater.call(this);var s=this;
this.name="RandomPropertyRateChangeUpdater",this.exposedVariables=["propertyName","minChangeRate","maxChangeRate","subProperty"],this.propName=t,this.subPropName=isEmpty(r)?void 0:r,this.minChange=e,this.maxChange=i,s.initParticles=function(t,e,i){for(var r,s=e;i>=s;s++)r=this.minChange+Math.random()*(this.maxChange-this.minChange),t[s].rprcu_rate=r},s.updateParticles=function(t,e){var i;if(void 0===this.subPropName)for(i=0;i<t.length;i++)t[i][this.propName]+=e*t[i].rprcu_rate;else for(i=0;i<t.length;i++)t[i][this.propName][this.subPropName]+=e*t[i].rprcu_rate}},ss.RandomPropertyRateChangeUpdater.prototype=new ss.BaseParticleUpdater,ss.RandomPropertyRateChangeUpdater.prototype.constructor=ss.RandomPropertyRateChangeUpdater,function(t){"use strict";function e(e,i,r){var s,n,a,o,h,l,u=this,c=function(e,i,r){!hasWebGL(),n=e,a=setDefault(e.emissionCutoff,0),o=setDefault(e.rate,.5),h=setDefault(e.scale,.3);var u=setDefault(e.radius,0),c=ss.SiteManager.windowWidth()/1920,d=setDefault(e.minLife,5),p=setDefault(e.maxLife,10),f=setDefault(e.minAngle,262),m=setDefault(e.maxAngle,277),g=setDefault(e.minSpeed,.01),v=setDefault(e.maxSpeed,.01),_=setDefault(e.startAlpha,1),y=setDefault(e.endAlpha,0),x=setDefault(e.maxParticles,50),w=PIXI.Texture.fromImage(BUBBLE_TEXTURE),b=new t.PixiSpriteParticleFactory(w),S=new t.UniformSpawnTimer(o);l=new t.BubbleParticleInitializer(.2*h*c,1.2*h*c,20*c,80*c);var T=new t.RadialSpawnShape(new Vector2(0,0),u,g,v,f,m);s=new t.PixiParticleEmitter,s.setupFromObjects(x,d,p,b,S,T,[l,new t.InterpolatePropertyUpdater("alpha",_,y,Interpolation.inverseSquared),new t.CycleInterpolatePropertyUpdater("velX",-5,24,Interpolation.linear,.8,.2),new t.RandomPropertyRateChangeUpdater("x",-10,30),new t.ForceUpdater(0,-20)],r.parent),s.x=r.x,s.y=r.y,r.parent.addChild(s),s.startEmit()};return u.resize=function(t){try{var e=ss.SiteManager.windowWidth()/1920;s.x=t.x+t.width*n.position.x,s.y=t.y+t.height*n.position.y,l.minScale=.2*h*e,l.maxScale=1.2*h*e,l.minSpeed=20*e,l.maxSpeed=80*e,s.removeAllParticles()}catch(i){console.log(i)}},u.blur=function(){s.pause()},u.focus=function(){console.log("focus bubbles"),s.resume()},u.update=function(t){var e=Math.abs(ss.ScrollManager.targetPosition()/ss.SiteManager.windowHeight());s.x=t.x+t.width*n.position.x,s.y=t.y+t.height*n.position.y,e>=a?s.setIsEmitting(!0):(s.setIsEmitting(!1),s.removeAllParticles())},c(e,i,r)}t.BubblesSpriteEffect=e}(ss),function(t){"use strict";function e(t,e,i){if(this.x=t,this.y=e,isEmpty(i))this.distance=0;else{var r=t-i.x,s=e-i.y;this.distance=Math.sqrt(r*r+s*s)}}function i(t,i){var r,s,n,a,o=this,h=function(t,e){e=e||{},r=t.slice(),s=setDefault(e.grandularity,7),a=0,n=[];var i=new Iterator(r);for(i.next();i.hasNext();)l(i.next(),i);i.release();for(var h=0;h<n.length;h++)a+=n[h].distance;return o},l=function(t,i){var r=i.peek(-1);!i.hasNext();for(var a=i.next(),o=0;s>=o;o++){var h=o/s,l=u(r.x,t.x,a.x,h),c=u(r.y,t.y,a.y,h),d=new e(l,c,n[n.length-1]);n.push(d)}},u=function(t,e,i,r){var s=1-r;return s*s*t+2*s*r*e+r*r*i};return window.bezier=function(t,e,i,r){var s=1-r;return s*s*t+2*s*r*e+r*r*i},o.distance=function(){return a},o.evaluate=function(t){for(var e=0,i=0;i<n.length&&(e+=n[i].distance,!(e>=t));i++);var r=(t-(e-n[i].distance))/n[i].distance;r=isNaN(r)?0:r;var s=1-r,a=n[i],o=n[i-1];return a.y*r+o.y*s},h(t,i)}t.BezierPath=i}(ss),function(t){function e(e,i){t.BaseParticleUpdater.call(this);var r,s,n,a=this,o=function(t,e){r=t,n=e[0].y,s=new ss.BezierPath(e,{})};return a.initParticles=function(t,e,i){for(var s=e;i>=s;s++)t[s][r]=n},a.updateParticles=function(t){for(var e=0;e<t.length;e++)t[e][r]=s.evaluate(t[e].normalizedLife*s.distance())},o(e,i)}e.prototype=new t.BaseParticleUpdater,e.constructor=e,t.BezierPathUpdater=e}(ss),function(t){"use strict";function e(e,i,r){var s,n,a,o,h,l,u,c,d,p=this,f=function(t,e,i){return hasWebGL()?(a=i,l=setDefault(t.sizeMultiplier,1),h=setDefault(t.forceMultiplier,1),n=PIXI.Texture.fromImage(DIRT_TEXTURE),n.baseTexture.hasLoaded?(s=!0,m(n)):(n.baseTexture.once("loaded",function(){m(n)}),n.baseTexture.once("error",function(){console.log("load error")})),p):(p.resize=function(){},p.update=function(){},p.blur=function(){},void(p.focus=function(){}))},m=function(e){var i=new t.PixiSpriteParticleFactory(e),r=ss.SiteManager.windowWidth()/1920,s=new ss.UniformSpawnTimer(40*r),n=2*Math.random()*Math.PI*2;o=new ss.BoxSpawnShape(new ss.Rectangle(0,0,ss.SiteManager.windowWidth(),1.3*ss.SiteManager.windowHeight()),0,0,n,n),u=new ss.PixiParticleEmitter,c=new ss.InterpolatePropertyUpdater("scale",.02*l*r,.1*l*r,Interpolation.squared,"x"),d=new ss.InterpolatePropertyUpdater("scale",.02*l*r,.1*l*r,Interpolation.squared,"y"),u.setupFromObjects(100,5,10,i,s,o,[new ss.BezierPathUpdater("alpha",[{x:0,y:0},{x:.5,y:.75},{x:1,y:0}]),c,d,new t.CycleInterpolatePropertyUpdater("velY",-10*h,10*h,Interpolation.smoothStep,2,0),new ss.ForceUpdater(10*h,0)],a),u.x=0,u.y=.2*-ss.SiteManager.windowHeight(),a.addChild(u),u.startEmit()};return p.resize=function(){try{{2*Math.random()*Math.PI*2}o.resetSpawnRect(new ss.Rectangle(0,0,ss.SiteManager.windowWidth(),1.3*ss.SiteManager.windowHeight())),u.y=.2*-ss.SiteManager.windowHeight();var t=ss.SiteManager.windowWidth()/1920;_spawnTimer.setSpawnRate(40*t),c.start=.02*l*t,c.end=.1*l*t,d.start=.02*l*t,d.end=.1*l*t,u.removeAllParticles()}catch(e){}},p.blur=function(){u.pause()},p.focus=function(){u.resume()},f(e,i,r)}t.DirtSpriteEffect=e}(ss),function(t){"use strict";function e(e,i,r){var s,n,a,o,h,l,u,c,d=this,p=function(t,e,i){return hasWebGL()?(a=i,n=PIXI.Texture.fromImage(DIRT_TEXTURE),n.baseTexture.hasLoaded?(s=!0,f(n)):(n.baseTexture.once("loaded",function(){f(n)}),n.baseTexture.once("error",function(){console.log("load error")})),d):(d.resize=function(){},d.update=function(){},d.blur=function(){},void(d.focus=function(){}))},f=function(e){var i=ss.SiteManager.windowWidth()/1920,r=new t.PixiSpriteParticleFactory(e);h=new ss.UniformSpawnTimer(50*i);var s=2*Math.random()*Math.PI*2;o=new ss.BoxSpawnShapeWithDistribution(new ss.Rectangle(0,0,ss.SiteManager.windowWidth(),.4*ss.SiteManager.windowHeight()),0,0,s,s,Interpolation.one,Interpolation.inverseSquared,!0,!0),l=new ss.PixiParticleEmitter,u=new ss.InterpolatePropertyUpdater("scale",.02*i,.1*i,Interpolation.squared,"x"),c=new ss.InterpolatePropertyUpdater("scale",.02*i,.1*i,Interpolation.squared,"y"),l.setupFromObjects(250,3,5,r,h,o,[new ss.BezierPathUpdater("alpha",[{x:0,y:0},{x:.05,y:1},{x:1,y:0}]),u,c,new ss.ForceUpdater(10,0)],a),l.x=0,l.y=.75*ss.SiteManager.windowHeight(),a.addChild(l),l.startEmit()};return d.blur=function(){l.pause()},d.focus=function(){l.resume()},d.resize=function(){try{{2*Math.random()*Math.PI*2}o.resetSpawnRect(new ss.Rectangle(0,0,ss.SiteManager.windowWidth(),.4*ss.SiteManager.windowHeight())),l.y=.75*ss.SiteManager.windowHeight();var t=ss.SiteManager.windowWidth()/1920;h.setSpawnRate(50*t),u.start=.02*t,u.end=.1*t,c.start=.02*t,c.end=.1*t,l.removeAllParticles()}catch(e){}},p(e,i,r)}t.TopDirtSpriteEffect=e}(ss),function(t){function e(e,i,r){var s=this,n=function(t,e,i){return hasWebGL()?(_sprite=i,lightBeamTexture=PIXI.Texture.fromImage(LIGHT_BEAM_TEXTURE),console.log(lightBeamTexture),void(lightBeamTexture.baseTexture.hasLoaded?(_ready=!0,h(lightBeamTexture)):(lightBeamTexture.baseTexture.once("loaded",function(){h(lightBeamTexture)}),lightBeamTexture.baseTexture.once("error",function(){console.log("load error")})))):(s.resize=function(){},s.update=function(){},s.blur=function(){},void(s.focus=function(){}))};s.blur=function(){a&&a.pause()},s.focus=function(){a.resume()};var a,o,h=function(e){var i=new t.PixiSpriteParticleFactory(e,new PIXI.Point(.5,0)),r=ss.SiteManager.windowWidth()/1080;o=new ss.UniformSpawnTimer(5*r);var s=.15*Math.PI,n=.2*Math.PI;_spawnShape=new ss.BoxSpawnShape(new ss.Rectangle(0,0,2*ss.SiteManager.windowWidth(),.01*ss.SiteManager.windowHeight()),0,0,s,n),a=new ss.PixiParticleEmitter,a.setupFromObjects(100,1,5,i,o,_spawnShape,[new ss.BezierPathUpdater("alpha",[{x:0,y:0},{x:.25,y:1.5},{x:1,y:0}]),new ss.InterpolatePropertyUpdater("scale",.75,2.5,Interpolation.linear,"y")],_sprite),a.x=0,a.y=.35*-ss.SiteManager.windowHeight(),_sprite.addChild(a),a.startEmit()};return s.resize=function(){try{_spawnShape.resetSpawnRect(new ss.Rectangle(0,0,2*ss.SiteManager.windowWidth(),.01*ss.SiteManager.windowHeight())),a.y=.35*-ss.SiteManager.windowHeight();var t=ss.SiteManager.windowWidth()/1080;o.setSpawnRate(5*t)}catch(e){}},n(e,i,r)}t.LightBeamSpriteEffect=e}(ss);var Interpolation=Interpolation||new function(){"use strict";this.linear=function(t){return t},this.smoothStep=function(t){return t*t*(3-2*t)},this.smoothStepX2=function(t){return t=t*t*(3-2*t),t*t*(3-2*t)},this.smoothStepX3=function(t){return t=t*t*(3-2*t),t=t*t*(3-2*t),t*t*(3-2*t)},this.squared=function(t){return t*t},this.inverseSquared=function(t){return 1-(1-t)*(1-t)},this.sin=function(t){return.5-.5*Math.cos(-t*Math.PI)},this.one=function(){return 1},this.zero=function(){return 0},this.easeBounceSmall=function(t){var e,i,r,s,n,a,o,h;return e=.6,i=.85,r=.05,s=.02,e>t?(n=t*(1/e),a=n*n):i>t?(n=(t-e)*(1/(i-e)),o=Math.abs(Math.cos((2*n-1)*Math.PI/2)),h=o*r,1-h):(n=(t-i)*(1/(1-i)),o=Math.abs(Math.cos((2*n-1)*Math.PI/2)),h=o*s,1-h)},this.evaluate=function(t,e,i,r){return i>1?i=1:0>i&&(i=0),t+(e-t)*r(i)}};!function(t){"use strict";function e(t,e,i){var r,s,n,a,o,h=this,l=0,u=3,c=function(t,e,i){return o=t.position,s=t.sink_point_set,r=i,n=.3,a=!0,"false"==t.ease&&(a=!1),h};return h.update=function(t,e,i){l=(l+i*u)%(2*Math.PI);for(var n=Math.abs(ss.ScrollManager.targetPosition()/ss.SiteManager.windowHeight()),h=s[0],c=1;c<s.length&&!(n<s[c].scroll);c++)h=s[c];c=Math.min(c,s.length-1),2==c?h=s[1]:1==c&&(h=s[0]);var d=s[c].scroll-h.scroll,p=n-h.scroll,f=p/d;a&&(f=Interpolation.smoothStep(f));var m=f*s[c].position.x+(1-f)*h.position.x,g=f*s[c].position.y+(1-f)*h.position.y,v=f*s[c].rotation+(1-f)*h.rotation,_=f*s[c].sinBobMult+(1-f)*h.sinBobMult,y=f*s[c].sinRotateMult+(1-f)*h.sinRotateMult,x=Math.sin(l)*_,w=t.parent,b=(w.normalizedY(),"absolute"==o?w.normalizedY()*ss.SiteManager.windowHeight():0);r.y=-b-ss.ScrollManager.targetPosition()+ss.SiteManager.windowHeight()*g+x,r.x=ss.SiteManager.windowWidth()*m,r.rotation=v+Math.sin(l)*y},h.resize=function(){},c(t,e,i)}t.SinkingSpriteEffect=e}(ss),function(t){function e(e,i,r){var s,n,a,o,h=this,l=function(){o=new CommandQueue,o.start(),s=setInterval(u,250)},u=function(e){e||o.cancel();var i=.95+.08*Math.random(),s=.65+.25*Math.random(),n=new t.CommandSet;n.tweenTo(r.scale,s,{x:i,y:i}),n.apply(u),o.queue(n)};return h.resize=function(t){n=t.width,a=t.height,u(!0)},h.update=function(){},l(e,i,r)}t.FlickerSpriteEffect=e}(ss),function(t){function e(t,e,i){var r,s,n,a,o,h=this,l=function(t,e,i){o=[],a=0,r=i.parent,s=r.getChildIndex(i),n=t.swapList,o.push({sprite:i.getSprite(),parent:r,child_index:s,offset:0});for(var l=0;l<n.length;l++){console.log(n[l].object);var u=ss.SiteManager.globalObject(n[l].object),c=n[l].offset,d=u,p=d.parent.getChildIndex(d);o.push({sprite:d,parent:d.parent,child_index:p,offset:c})}return h},u=function(t,e,i){console.log("WE SWAPPPPINNN!!"),o[e].parent.addChildAt(i,o[e].child_index)};return h.update=function(t){for(var e=Math.abs(ss.ScrollManager.targetPosition()/ss.SiteManager.windowHeight()),i=n[0],r=0;r<n.length&&!(e<n[r].scroll);r++)i=n[r];r!=a&&(u(a,r,t),a=r)},h.resize=function(){},l(t,e,i)}t.SwapSpriteEffect=e}(ss),function(t){function e(t,e,i){var r,s,n=this,a=[],o=function(t,e,i){console.log("starting sprite fade effect on: "+e),r=t.fade_points;var n=PIXI.Texture.fromImage(r[0].image);s=i.getSprite(),a.push(s);for(var o=1;o<r.length;o++){var h=new PIXI.Sprite(PIXI.Texture.fromImage(r[o].image));s.addChild(h),h.alpha=0,h.x=r[o].x,h.y=r[o].y,a.push(h)}s.setTexture(n)};return n.resize=function(){},n.update=function(){for(var t=Math.abs(ss.ScrollManager.targetPosition()/ss.SiteManager.windowHeight()),e=1;e<a.length;e++)a[e].alpha=0;for(var e=1;e<r.length&&!(t<r[e].scroll);e++);e=Math.min(e,r.length-1);var i=Math.max(0,e-1);2==e?i=1:1==e&&(i=0);var s=r[i],n=r[e].scroll-s.scroll,o=t-s.scroll,h=o/n;h=Math.min(1,h),0==e?a[e].alpha=1:(a[i].alpha=1,a[e].alpha=h);for(var l="",e=0;e<a.length;e++)l+=a[e].alpha+", "},o(t,e,i)}t.SpriteFadeEffect=e}(ss);var LAYER_READY="sprite_ready",TEXTURE_READY="texture_ready",SCENE_READY="scene_ready",SITE_READY="scene_ready",SNAKE_POINTS=30,SNAKE_SCALE_X=1.25;(ss.SystemInfo.isMobile()||!hasWebGL())&&(SNAKE_POINTS=2,SNAKE_SCALE_X=2.5);var SKY_TEXTURE="img/scenes/global/Sky_Gradiant.jpg",WATER_TEXTURE="img/scenes/global/bg-water.jpg",BUBBLE_TEXTURE="img/scenes/global/bubble-particle-large.png",DIRT_TEXTURE="img/scenes/global/particle1.png",LIGHT_BEAM_TEXTURE="img/scenes/home/Sun_beam.png",QUICK_MENU_NODE="img/scenes/global/quick-menu-item.png",QUICK_MENU_MASK="img/scenes/global/quick-menu-mask.png",QUICK_MENU_SEPERATOR="img/global/menu_seperator.png",QUICK_MENU_SPACING=85,QUICK_MENU_BOAT="img/global/quick-menu-boat.png",QUICK_MENU_BOAT_ARROW="img/global/boat-arrow.png",DISPLACEMENT_MAP_TEXTURE="img/scenes/bottom/displacement-map.png";window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();var canvasID="backgroundCanvas",canvas=document.getElementById(canvasID),gl,glExperimental=!1;ScrollManager.prototype=new AbstractObject,ScrollManager.constructor=ScrollManager,function(t){"use strict";function e(t){PIXI.DisplayObjectContainer.call(this),PIXI.EventTarget.call(this);var e,i,r,s,n,a,o=this,h=function(t){r=0,e=[],i=[],s=document.createElement("canvas"),s.width=200,s.height=500;for(var h=3,u=0;u<t.length-1;u++)for(var c=0;h>c;c++)0==c?l(u*(h-1),t[u],!0):2==c||l(u*(h-1)+c,{},!0);console.log(u),l(2*u,t[u],!1);var d=PIXI.Texture.fromImage(QUICK_MENU_BOAT),p=new PIXI.Sprite(d);p.x=35,p.y=10,p.anchor.y=.5,o.addChild(p);var f=PIXI.Texture.fromImage(QUICK_MENU_BOAT_ARROW);n=new PIXI.Sprite(f),n.anchor.x=.5,n.anchor.y=.5,n.x=54,n.y=-27,n.interactive=!0,n.buttonMode=!0,n.click=function(){ss.SiteManager.previousPage()},o.addChild(n),a=new PIXI.Sprite(f),a.anchor.x=.5,a.anchor.y=.5,a.x=54,a.y=52,a.rotation=Math.PI,a.interactive=!0,a.buttonMode=!0,a.click=function(){ss.SiteManager.nextPage()},o.addChild(a)},l=function(t,r,s){var n=new ss.MenuItem(r,e.length/2);if(n.y=QUICK_MENU_SPACING*t,e.push(n),o.addChild(n),s){var a=PIXI.Texture.fromImage(QUICK_MENU_SEPERATOR),h=new PIXI.Sprite(a);h.y=30+QUICK_MENU_SPACING*t,h.x=10,i.push(h),o.addChild(h)}};return o.update=function(){var t=ss.ScrollManager.targetPosition()/ss.ScrollManager.maxScroll();.05>t?(n.alpha=Math.max(0,n.alpha-.3*n.alpha),a.alpha=Math.min(1,a.alpha+.1*(1-a.alpha))):t>.95?(n.alpha=Math.min(1,n.alpha+.1*(1-n.alpha)),a.alpha=Math.max(0,a.alpha-.3*a.alpha)):(n.alpha=Math.min(1,n.alpha+.1*(1-n.alpha)),a.alpha=Math.min(1,a.alpha+.1*(1-a.alpha))),r=-t*QUICK_MENU_SPACING*(e.length-1);for(var s=0;s<e.length;s++){var o=e[s];o.y=r+QUICK_MENU_SPACING*s;var h=1-Math.min(1,Math.abs(QUICK_MENU_SPACING*s+r)/(3*QUICK_MENU_SPACING));o.isMouseOver()||(o.alpha=h),o.update()}for(var s=0;s<i.length;s++){var l=i[s];l.y=r+30+QUICK_MENU_SPACING*s;var h=1-Math.min(1,Math.abs(QUICK_MENU_SPACING*s+r+30)/(3*QUICK_MENU_SPACING));l.alpha=h}},h(t)}e.prototype=new PIXI.DisplayObjectContainer,e.constructor=e,t.QuickMenu=e}(ss),function(){function t(t,e){"use strict";function i(t,e){console.log("MenuItem",t),console.log("MenuItem",e),n=e,s=!1;var i=PIXI.Texture.fromImage(QUICK_MENU_NODE),o=new PIXI.Sprite(i);if(a.addChild(o),!isEmpty(t.details)){var h=t.details.name;r=new PIXI.Text(h.toUpperCase(),{font:"12px din_alternatebold",fill:"white"}),r.x=30,r.y=5,a.addChild(r)}a.interactive=!0,a.buttonMode=!0,a.defaultCursor="pointer",a.mouseover=function(){s=!0,TweenMax.to(a,.75,{alpha:1})},a.mouseout=function(){s=!1},a.click=function(){ss.SiteManager.setPage(n)}}PIXI.DisplayObjectContainer.call(this),PIXI.EventTarget.call(this);var r,s,n,a=this;return a.isMouseOver=function(){return s},a.update=function(){r&&a.alpha>.8?s||(r.alpha=Math.max(0,r.alpha-.3*r.alpha)):isEmpty(r)||(r.alpha=Math.min(1,r.alpha+.3*(1-r.alpha)))},i(t,e)}t.prototype=new PIXI.DisplayObjectContainer,t.constructor=t,ss.MenuItem=t}(ss),SiteManager.prototype=new AbstractObject,SiteManager.constructor=SiteManager,function(t){"use strict";function e(t){function e(t){return a=t,o=!1,h=[],isEmpty(t)||i.load(t),i}var i=this;PIXI.DisplayObjectContainer.call(i),PIXI.EventTarget.call(i);var r,s,n,a,o,h,l=function(t,e,r,s){i.x=Math.round(r*t/100),i.y=Math.round(s*e/100)},u=function(t,e,r,n){var a=s.width/s.height;if("auto"==e){var o=r*t/100;i.width=o,i.height=o/a}else if("auto"==t){var h=n*e/100;i.height=h,i.width=h*a}else i.width=r*t/100,i.height=n*e/100},c=function(t){for(var e=0;e<t.length;e++){var r=t[e],s=r.type.toLowerCase().replace(/ /g,"-");switch(s){case"float":h.push(new ss.FloatSpriteEffect(r,a,i));break;case"bubbles":h.push(new ss.BubblesSpriteEffect(r,a,i));break;case"sinking":h.push(new ss.SinkingSpriteEffect(r,a,i));break;case"flicker":h.push(new ss.FlickerSpriteEffect(r,a,i));break;case"fade":h.push(new ss.SpriteFadeEffect(r,a,i));break;case"swap":h.push(new ss.SwapSpriteEffect(r,a,i))}}},d=function(t){for(var e=0;e<t.length;e++){var i=t[e];if("//displacement"==i.type){var r=new PIXI.DisplacementFilter(s);n.filters=[r]}}},p=function(){c(a.effects),isEmpty(t.filters)||d(t.filters)};return i.getSprite=function(){return n},i.getTexture=function(){return s},i.load=function(t){a=t,r=t.details.name.toLowerCase().replace(/ /g,"-"),i.debugName=r,s=PIXI.Texture.fromImage(t.details.src),n=new PIXI.Sprite(s),n.anchor.x=setDefault(t.anchor&&t.anchor.x,.5),n.anchor.y=setDefault(t.anchor&&t.anchor.y,.5),n.rotation=setDefault(t.rotation,0),i.addChild(n),s.baseTexture.hasLoaded?(o=!0,ss.SiteManager.registerTextureLoad(),i.emit({type:TEXTURE_READY,content:i})):(s.baseTexture.on("loaded",function(){o=!0,ss.SiteManager.registerTextureLoad(),i.emit({type:TEXTURE_READY,content:i})}),s.baseTexture.on("error",function(){console.log("load error")})),"true"==String(t.details.global)&&ss.SiteManager.globalObject(r,i),ss.SiteManager.addEventListener("INIT_RESIZE",function(){p(),console.log("EFFECTS START")})},i.ready=function(){return o},i.resize=function(t,e){u(a.size.w,a.size.h,t,e),l(a.position.x,a.position.y,t,e);for(var r=0;r<h.length;r++)h[r].resize(i,t,e)},i.focus=function(){for(var t=0;t<h.length;t++){var e=h[t];isEmpty(e.focus)||h[t].focus()}},i.blur=function(){"img/scenes/home/boat.png"==a.details.src&&(console.log("We're on a boat."),console.log("Effects: "+h.length));for(var t=0;t<h.length;t++){var e=h[t];isEmpty(e.blur)||h[t].blur()}},i.update=function(t,e){u(a.size.w,a.size.h,$(window).width(),$(window).height());for(var r=0;r<h.length;r++)isEmpty(h[r].update)||h[r].update(i,t,e)},i.name=function(){return r},i._on_=i.on,i.on=function(t,e){i._on_(t,e),t==TEXTURE_READY&&o&&e.call({type:TEXTURE_READY,content:i})},e(t)}e.prototype=new PIXI.DisplayObjectContainer,e.constructor=e,t.TextureSprite=e}(ss),function(t){"use strict";function e(e,i){PIXI.DisplayObjectContainer.call(this),PIXI.EventTarget.call(this);var r,s,n,a,o,h,l=this,u=function(t,e){return s=!1,h=!1,a=e,isEmpty(t)||l.load(t),l},c=function(){for(var t=[],e=0;e<l.children.length;e++){var i=l.children[e],a={};a.scene_name=r,a.my_name=i.name(),a.is_ready=i.ready(),t.push(a)}for(var e=0;e<l.children.length&&l.children.length==n;e++){var i=l.children[e];if(i.ready&&!i.ready())return}s=!0,l.emit(SCENE_READY,l),o&&0==h&&(h=!0,ss.SiteManager.initialSceneReady(l),$(window).resize())};return l.ready=function(){return s},l.name=function(){return r},l.load=function(e){n=e.layers.length,r=e.details.name.toLowerCase().replace(/ /g,"-"),o="true"==String(e.details.initial_scene).toLowerCase()?!0:!1;for(var i=e.layers,h=0;n>h;h++){var u=i[h],d=new t.LayerSprite(u);d.normalizedY(a),l.addChild(d),d.on(LAYER_READY,c)}0==n&&(s=!0,l.emit(SCENE_READY,l))},l.resize=function(t,e){for(var i=0;i<l.children.length;i++){var r=l.children[i];isEmpty(r.resize)||r.resize(t,e)}},l.blur=function(){for(var t=0;t<l.children.length;t++){var e=l.children[t];isEmpty(e.blur)||e.blur()}},l.focus=function(){for(var t=0;t<l.children.length;t++){var e=l.children[t];isEmpty(e.focus)||e.focus()}},l.update=function(t,e){for(var i=0;i<l.children.length;i++){var r=l.children[i];isEmpty(r.update)||r.update(t,e)}},l._on_=l.on,l.on=function(t,e){l._on_(t,e),t==SCENE_READY&&s&&e.apply(void 0,[SCENE_READY,l])},u(e,i)}e.prototype=new PIXI.DisplayObjectContainer,e.constructor=e,t.SceneSprite=e}(ss),ss.SystemInfo=new Object,ss.SystemInfo.isIOS=void 0,ss.SystemInfo.isIPhone=void 0,ss.SystemInfo.isIPod=void 0,ss.SystemInfo.isIPad=void 0,ss.SystemInfo.isNexus=void 0,ss.SystemInfo.isNabi=void 0,ss.SystemInfo.isIE=void 0,ss.SystemInfo.isSafari=void 0,ss.SystemInfo.isChrome=void 0,ss.SystemInfo.isMaxthon=void 0,ss.SystemInfo.isFirefox=void 0,ss.SystemInfo.isSilk=void 0,ss.SystemInfo.isMobile=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/Mobile/i)||navigator.userAgent.match(/Silk/i)||navigator.userAgent.match(/NABI/i)?!0:!1},ss.SystemInfo.getIOSVersion=function(){if(!ss.SystemInfo.isIOS)return-1;var t=window.navigator.userAgent,e=t.indexOf("OS ");return e>=0?parseInt(t.substring(e+3,e+4)):(console.warn("SystemInfo.getIOSVersion: Couldn't detect IOS version!"),0)},ss.SystemInfo.getIEVersion=function(){if(!ss.SystemInfo.isIE)return-1;var t=window.navigator.userAgent,e=t.indexOf("MSIE "),i=t.indexOf("Trident/");if(e>=0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(i>=0){var r=t.indexOf("rv");return parseInt(t.substring(r+3,t.indexOf(".",r)),10)}return console.warn("SystemInfo.getIEVersion: Couldn't detect IE version!"),0},ss.SystemInfo.getSafariVersion=function(){var t,e;return ss.SystemInfo.isSafari?(t=parseInt(window.navigator.userAgent.indexOf("Version/")),e=t+8,0>t?(console.warn("SystemInfo: Unable to detect Safari version!"),0):parseInt(window.navigator.userAgent.substring(e,e+1))):-1},ss.SystemInfo._init=function(){"use strict";var t=window.navigator.userAgent;this.isIOS=!1,this.isIPhone=!1,this.isIPod=!1,this.isIPad=!1,this.isNexus=!1,this.isIE=!1,this.isSafari=!1,this.isChrome=!1,this.isFirefox=!1,this.isMaxthon=!1,this.isSilk=!1,t.match(/iPhone/i)?this.isIPhone=!0:t.match(/iPad/i)?this.isIPad=!0:t.match(/iPod/i)&&(this.isIPod=!0),(this.isIPhone||this.isIPad||this.isIPod)&&(this.isIOS=!0),t.match(/Nexus/i)&&(this.isNexus=!0),t.indexOf("MSIE ")>=0||t.indexOf("Trident")>=0?this.isIE=!0:t.match(/Silk/i)?this.isSilk=!0:t.match(/NABI/i)?this.isMaxthon=!0:t.match(/Chrome/i)?this.isChrome=!0:t.match(/Firefox/i)?this.isFirefox=!0:t.match(/Safari/i)?this.isSafari=!0:console.warn("SystemInfo: Couldn't detect browser type!")},ss.SystemInfo._init(),function(){"use strict";function t(t){PIXI.DisplayObjectContainer.call(this),PIXI.EventTarget.call(this);var e,i,r,s,n,a,o,h,l,u=this,c=function(t){n=!1,l=0,i=[];for(var e=0;SNAKE_POINTS>e;e++){{length}i.push(new PIXI.Point(100*e,0))}return isEmpty(t)||u.load(t),u},d=function(t,e,i,r){u.x=Math.round(i*t/100-u.width*o.x),u.y=Math.round(r*e/100-u.height*o.y)},p=function(t,e,i,s){var n=r.width/r.height;"auto"==e?(r.width=i*t/100,r.height=u.width/n):"auto"==t?(r.height=s*e/100,r.width=u.height*n):(r.width=i*t/100,r.height=s*e/100)};return u.load=function(t){e=t,l=setDefault(t.details.waveOffset,0),o={x:setDefault(t.anchor&&t.anchor.x,.5),y:setDefault(t.anchor&&t.anchor.y,.5)},a=t.details.name.toLowerCase().replace(/ /g,"-"),r=PIXI.Texture.fromImage(t.details.src),s=new PIXI.Rope(r,i),u.addChild(s),s.scale.x=SNAKE_SCALE_X,r.baseTexture.hasLoaded?(n=!0,u.emit({type:TEXTURE_READY,content:u})):(r.baseTexture.on("loaded",function(){n=!0,h=r.baseTexture.height,TweenMax.to(u,.5,{delay:1,alpha:1}),u.emit({type:TEXTURE_READY,content:u})}),r.baseTexture.on("error",function(){console.log("load error"),console.log("load error")}))},u.ready=function(){return n},u.name=function(){return a},u._on_=u.on,u.on=function(t,e){u._on_(t,e),t==TEXTURE_READY&&n&&e.call({type:TEXTURE_READY,content:u})},u.resize=function(t,i){p(e.size.w,e.size.h,t,i),d(e.position.x,e.position.y,t,i)},u.update=function(t){var e=Math.max(1300,ss.SiteManager.windowWidth()),r=e/i.length;l+=.0025*t;for(var s=0;s<i.length;s++)i[s].y=6*Math.sin(l+.75*s),i[s].x=s*r},c(t)}t.prototype=new PIXI.DisplayObjectContainer,t.constructor=t,ss.SnakeSprite=t}(ss);var MathConst=MathConst||new function(){};MathConst.DEG_TO_RAD=Math.PI/180,MathConst.RAD_TO_DEG=180/Math.PI,MathConst.TWO_PI=2*Math.PI,MathConst.HALF_PI=Math.PI/2,MathConst.TAU=MathConst.TWO_PI,ss.Vector2=function(t,e){"use strict";this.x=t,this.y=e},ss.Vector2.prototype.constructor=ss.Vector2,ss.Vector2.prototype.magnitude=function(){"use strict";return Math.sqrt(this.sqrMagnitude())},ss.Vector2.prototype.sqrMagnitude=function(){"use strict";return this.x*this.x+this.y*this.y},ss.Vector2.prototype.normalize=function(){"use strict";return 0===this.magnitude()?this:(this.setAll(this.x/this.magnitude(),this.y/this.magnitude()),this)},ss.Vector2.prototype.normalized=function(){"use strict";if(0===this.magnitude())return this;var t=new ss.Vector2(this.x/this.magnitude(),this.y/this.magnitude());return t},ss.Vector2.prototype.setAll=function(t,e){"use strict";this.x=t,this.y=e},ss.Vector2.prototype.dot=function(t){"use strict";return this.x*t.x+this.y*t.y},ss.Vector2.prototype.add=function(t){"use strict";return new ss.Vector2(this.x+t.x,this.y+t.y)},ss.Vector2.prototype.addSelf=function(t){"use strict";return this.x=this.x+t.x,this.y=this.y+t.y,this},ss.Vector2.prototype.addOut=function(t,e){"use strict";e.x=this.x+t.x,e.y=this.y+t.y},ss.Vector2.prototype.angleBetween=function(t,e){"use strict";if(0===this.x&&0===this.y||0===t.x&&0===t.y)throw"Tried to get angle between a zero vector and another vector.";return e?Math.acos(this.dot(t)/this.magnitude()*t.magnitude())*MathConst.RAD_TO_DEG:Math.acos(this.dot(t)/this.magnitude()*t.magnitude())},ss.Vector2.prototype.angleBetween2=function(t,e){"use strict";if(0===this.x&&0===this.y||0===t.x&&0===t.y)throw"Tried to get angle between a zero vector and another vector.";return e?(this.angleRad()-t.angleRad())*MathConst.RAD_TO_DEG:this.angleRad()-t.angleRad()},ss.Vector2.prototype.subtract=function(t){"use strict";return new ss.Vector2(this.x-t.x,this.y-t.y)},ss.Vector2.prototype.subtractSelf=function(t){"use strict";return this.x=this.x-t.x,this.y=this.y-t.y,this},ss.Vector2.prototype.subtractOut=function(t,e){"use strict";e.x=this.x-t.x,e.y=this.y-t.y},ss.Vector2.prototype.mult=function(t){"use strict";return new ss.Vector2(this.x*t,this.y*t)},ss.Vector2.prototype.multSelf=function(t){"use strict";this.x=this.x*t,this.y=this.y*t},ss.Vector2.prototype.multOut=function(t,e){"use strict";e.x=this.x*t,e.y=this.y*t},ss.Vector2.prototype.scale=function(t){"use strict";return this.mult(t)},ss.Vector2.prototype.scaleSelf=function(t){"use strict";return this.multSelf(t)},ss.Vector2.prototype.scaleOut=function(t,e){"use strict";return this.multOut(t,e)},ss.Vector2.prototype.distance=function(t){"use strict";return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},ss.Vector2.prototype.distanceSquared=function(t){"use strict";return Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)},ss.Vector2.prototype.negative=function(){"use strict";return new ss.Vector2(-this.x,-this.y)},ss.Vector2.prototype.negativeSelf=function(){"use strict";return this.x=-this.x,this.y=-this.y,this},ss.Vector2.prototype.negativeOut=function(t){"use strict";t.x=-this.x,t.y=-this.y},ss.Vector2.prototype.angleRad=function(){"use strict";return Math.atan2(this.y,this.x)},ss.Vector2.prototype.angleDeg=function(){"use strict";return this.angleRad()*MathConst.RAD_TO_DEG},ss.Vector2.prototype.shift=function(t,e){"use strict";return this.x+=t,this.y+=e,this},ss.Vector2.prototype.rotate=function(t){"use strict";return t*=MathConst.DEG_TO_RAD,new ss.Vector2(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t))},ss.Vector2.prototype.rotateSelf=function(t){"use strict";return t*=MathConst.DEG_TO_RAD,this.setAll(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t)),this},ss.Vector2.prototype.rotateOut=function(t,e){"use strict";t*=MathConst.DEG_TO_RAD,e.setAll(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t))},ss.Vector2.prototype.equals=function(t,e){"use strict";return e?Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e:t.x===this.x&&t.y===this.y},ss.Vector2.prototype.copyOut=function(t){"use strict";t.x=this.x,t.y=this.y},ss.Vector2.prototype.clone=function(){"use strict";return new ss.Vector2(this.x,this.y)},ss.Vector2.prototype.toString=function(){"use strict";return"(x="+this.x+", y="+this.y+")"};var Vector2=ss.Vector2,MathUtils=MathUtils||new function(){};MathUtils.getSignNonZero=function(t){"use strict";return 0>t?-1:1},MathUtils.getSign=function(t){"use strict";return 0===t?0:t>0?1:-1},MathUtils.clamp=function(t,e,i){"use strict";return e>t?e:t>i?i:t},MathUtils.clamp01=function(t){return MathUtils.clamp(t,0,1)},MathUtils.lerp=function(t,e,i){"use strict";var r=new Vector2(0,0);return e.subtractOut(t,r),r.multSelf(i),t.addOut(r,r),r},MathUtils.lerpOut=function(t,e,i,r){"use strict";e.subtractOut(t,r),r.multSelf(i),t.addOut(r,r)},MathUtils.randomRange=function(t,e){"use strict";return Math.random()*(e-t)+t},MathUtils.weightedRandomInt=function(t,e,i){"use strict";return isEmpty(i)&&(i=(e+t)/2),(e+t)/2>i?Math.floor(MathUtils.randomRange(t+((e+t)/2-i),e)):i>(e+t)/2?Math.floor(MathUtils.randomRange(t,e-(i-(e+t)/2))):void 0},MathUtils.getRandomNumberWithDistribution=function(t,e){for(var i=Math.random(),r=Math.random();r>t(i);)i=Math.random(),r=Math.random();return e?1-i:i},Line2D.prototype.constructor=Line2D,Line2D.prototype.getTangent=function(){"use strict";var t=this.p2.subtract(this.p1);if(0===t.magnitude())throw"Trying to get a vector in the direction of a zero length line segment.";return t.normalize(),t},Line2D.prototype.getTangentOut=function(t){"use strict";if(this.p2.subtractOut(this.p1,t),0===t.magnitude())throw"Trying to get a vector in the direction of a zero length line segment.";t.normalize()},Line2D.prototype.getNormal=function(){"use strict";var t=this.getTangent(),e=t.x;return t.x=t.y,t.y=-e,t},Line2D.prototype.getNormalOut=function(t){"use strict";this.getTangentOut(t);var e=t.x;t.x=t.y,t.y=-e},Line2D.prototype.getMidpoint=function(){"use strict";var t=this.p1.add(this.p2);return t.multSelf(.5),t},Line2D.prototype.getMidpointOut=function(t){"use strict";this.p1.addOut(this.p2,t),t.multSelf(.5)},Line2D.prototype.getSlope=function(){"use strict";return 0===Math.abs(this.p2.x-this.p1.x)?0/0:(this.p2.y-this.p1.y)/(this.p2.x-this.p1.x)},Line2D.prototype.withinLineBounds=function(t){"use strict";return t.x<Math.min(this.p1.x,this.p2.x)||t.x>Math.max(this.p1.x,this.p2.x)?!1:t.y<Math.min(this.p1.y,this.p2.y)||t.y>Math.max(this.p1.y,this.p2.y)?!1:!0},Line2D.prototype.shift=function(t,e){"use strict";return this.p1.shift(t,e),this.p2.shift(t,e),this},Line2D.prototype.tryGetIntersection=function(t){"use strict";var e,i,r,s,n,a,o,h;return e=this.p2.y-this.p1.y,i=this.p1.x-this.p2.x,r=e*this.p1.x+i*this.p1.y,s=t.p2.y-t.p1.y,n=t.p1.x-t.p2.x,a=s*t.p1.x+n*t.p1.y,o=e*n-s*i,0===o?e!==s||i!==n||r!==a?!1:!1:(h=new Vector2((n*r-i*a)/o,(e*a-s*r)/o),this.withinLineBounds(h)&&t.withinLineBounds(h)?h:!1)},Line2D.prototype.getClosestPointOnLine=function(t,e){"use strict";var i=this.p2.subtract(this.p1);return this.p1.equals(this.p2)?new Vector2(this.p1.x,this.p1.y):(i.multSelf(e?MathUtils.clamp(((t.x-this.p1.x)*(this.p2.x-this.p1.x)+(t.y-this.p1.y)*(this.p2.y-this.p1.y))/((this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y)),0,1):((t.x-this.p1.x)*(this.p2.x-this.p1.x)+(t.y-this.p1.y)*(this.p2.y-this.p1.y))/((this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y))),this.p1.addOut(i,i),i)
},Line2D.prototype.getClosestPointOnLineOut=function(t,e,i){"use strict";return this.p2.subtractOut(this.p1,i),this.p1.equals(this.p2)?(i.x=this.p1.x,i.y=this.p1.y,i):(i.multSelf(e?MathUtils.clamp(((t.x-this.p1.x)*(this.p2.x-this.p1.x)+(t.y-this.p1.y)*(this.p2.y-this.p1.y))/((this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y)),0,1):((t.x-this.p1.x)*(this.p2.x-this.p1.x)+(t.y-this.p1.y)*(this.p2.y-this.p1.y))/((this.p2.x-this.p1.x)*(this.p2.x-this.p1.x)+(this.p2.y-this.p1.y)*(this.p2.y-this.p1.y))),this.p1.addOut(i,i),i)},Line2D.prototype.rotate=function(t,e){"use strict";return e&&(this.p1.shift(-e.x,-e.y),this.p2.shift(-e.x,-e.y)),this.p1.rotateSelf(t),this.p2.rotateSelf(t),e&&(this.p1.shift(e.x,e.y),this.p2.shift(e.x,e.y)),this},Line2D.prototype.clone=function(){"use strict";return new Line2D(this.p1.clone(),this.p2.clone())},Line2D.prototype.toString=function(){"use strict";return this.p1.toString()+" - "+this.p2.toString()},Line2D.prototype.setAll=function(t,e,i,r){"use strict";this.p1.x=t,this.p1.y=e,this.p2.x=i,this.p2.y=r},Line2D.prototype.equals=function(t,e){"use strict";return this.p1.equals(t.p1,e)&&this.p2.equals(t.p2,e)},Line2D.prototype.getAngle=function(){"use strict";return Math.atan2(this.p2.y-this.p1.y,this.p2.x-this.p1.x)},Polygon.prototype.constructor=Polygon,Polygon.prototype.getCenter=function(){"use strict";var t;for(t=new Vector2(0,0),this._i=0;this._i<this.points.length;this._i++)t.addSelf(this.points[this._i]);return t.multSelf(1/this.points.length),t},Polygon.prototype.getCenterOut=function(t){"use strict";for(t.x=0,t.y=0,this._i=0;this._i<this.points.length;this._i++)t.addSelf(this.points[this._i]);return t.multSelf(1/this.points.length),t},Polygon.prototype.sortPointsClockwise=function(){"use strict";function t(t,i){var r,s;return r=Math.atan2(e.y-t.y,e.x-t.x),s=Math.atan2(e.y-i.y,e.x-i.x),s-r}var e=this.getCenter();this.points.sort(t)},Polygon.prototype.drawToGraphics=function(t,e){"use strict";e.clear(),e.beginFill(t),e.moveTo(this.points[0].x,this.points[0].y);for(var i=0;i<this.points.length;i++)e.lineTo(this.points[i].x,this.points[i].y);e.lineTo(this.points[0].x,this.points[0].y),e.endFill()};var GeomUtils=GeomUtils||new function(){};GeomUtils.getLineCircleIntersection=function(t,e,i){"use strict";var r,s,n,a,o;i&&t.shift(-i.x,-i.y),r=t.p2.x-t.p1.x,s=t.p2.y-t.p1.y,n=Math.sqrt(r*r+s*s),a=t.p1.x*t.p2.y-t.p2.x*t.p1.y,o=e*e*n*n-a*a;var h,l,u,c=[];if(0>o)return c;h=MathUtils.getSignNonZero(s)*r*Math.sqrt(o),l=Math.abs(s)*Math.sqrt(o),u=new Vector2(0,0),u.x=(a*s+h)/(n*n),u.y=(-a*r+l)/(n*n),i&&(u.x+=i.x,u.y+=i.y),c.push(u);var d=1e-5;return Math.abs(o)<=d?c:(u=new Vector2(0,0),u.x=(a*s-h)/(n*n),u.y=(-a*r-l)/(n*n),i&&(u.x+=i.x,u.y+=i.y),c.push(u),c)},ss.Rectangle=function(t,e,i,r){"use strict";this.x=t,this.y=e,this.width=i,this.height=r},ss.Rectangle.prototype.constructor=ss.Rectangle,ss.Rectangle.prototype.getMaxX=function(){"use strict";return Math.max(this.x,this.x+this.width)},ss.Rectangle.prototype.getMaxY=function(){"use strict";return Math.max(this.y,this.y+this.height)},ss.Rectangle.prototype.getMinX=function(){"use strict";return Math.min(this.x,this.x+this.width)},ss.Rectangle.prototype.getMinY=function(){"use strict";return Math.min(this.y,this.y+this.height)},ss.Rectangle.prototype.getWidth=function(){"use strict";return this.width},ss.Rectangle.prototype.getHeight=function(){"use strict";return this.height},ss.Rectangle.prototype.hitTest=function(t){"use strict";return this.getMinX()>t.x?!1:this.getMaxX()<t.x?!1:this.getMinY()>t.y?!1:this.getMaxY()<t.y?!1:!0},ss.Rectangle.prototype.isIntersectingRectangle=function(t){"use strict";var e=!1,i=!1;return this.getMinX()<=t.getMaxX()&&this.getMaxX()>=t.getMinX()&&(e=!0),this.getMinX()<=t.getMaxX()&&this.getMaxX()>=t.getMaxX()&&(e=!0),t.getMinX()<=this.getMinX()&&t.getMaxX()>=this.getMinX()&&(e=!0),t.getMinX()<=this.getMaxX()&&t.getMaxX()>=this.getMaxX()&&(e=!0),this.getMinY()<=t.getMinY()&&this.getMaxY()>=t.getMinY()&&(i=!0),this.getMinY()<=t.getMaxY()&&this.getMaxY()>=t.getMaxY()&&(i=!0),t.getMinY()<=this.getMinY()&&t.getMaxY()>=this.getMinY()&&(i=!0),t.getMinY()<=this.getMaxY()&&t.getMaxY()>=this.getMaxY()&&(i=!0),e&&i},ss.Rectangle.prototype.debugDraw=function(t,e,i){"use strict";isEmpty(t)||(isEmpty(e)&&(e="#FFFFFF"),isEmpty(i)&&(i="rgba(255,255,255,0.25)"),t.graphics.clear(),t.graphics.setStrokeStyle(1),t.graphics.beginStroke(e),t.graphics.beginFill(i),t.graphics.moveTo(this.x,this.y),t.graphics.lineTo(this.x+this.width,this.y),t.graphics.lineTo(this.x+this.width,this.y+this.height),t.graphics.lineTo(this.x,this.y+this.height),t.graphics.lineTo(this.x,this.y))},ss.AbstractParticle=AbstractParticle,ss.AbstractParticleEmitter=AbstractParticleEmitter,ss.AbstractSpawnTimer=function(){"use strict";this.resetSpawning=function(){},this.getSpawnNumber=function(){return 0},this.isComplete=function(){return!1}},ss.BurstSpawnTimer=function(t,e){"use strict";ss.AbstractSpawnTimer.call(this),this.name="BurstSpawnTimer",this.exposedVariables=["totalParticles","maxPerFrame"],this.totalParticles=t;var i=t;this.maxPerFrame=isUndefined(e)?Number.MAX_VALUE:e,this.resetSpawning=function(){i=this.totalParticles},this.getSpawnNumber=function(){if(0>=i)return 0;var t=Math.min(this.maxPerFrame,i);return i-=t,t},this.isComplete=function(){return 0>=i}};var BurstSpawnTimer=ss.BurstSpawnTimer;ss.UniformSpawnTimer=function(t){"use strict";function e(t){return i.setSpawnRate(t),i}ss.AbstractSpawnTimer.call(this);var i=this;this.name="UniformSpawnTimer",this.exposedVariables=["spawnRate"],this.spawnRate=0;var r=0,s=0,n=this.spawnRate;return i.setSpawnRate=function(t){if(0>=t)throw"ERROR: UniformSpawnTimer.setSpawnRate: Invalid spawn rate: "+t;this.spawnRate=t,r=1/this.spawnRate,n=this.spawnRate},i.getSpawnNumber=function(t){n!=this.spawnRate&&i.setSpawnRate(this.spawnRate);var e=0;return s+=t,s>=r&&(e=Math.floor(s/r),s-=e*r),e},e(t)};var UniformSpawnTimer=ss.UniformSpawnTimer;ss.AbstractSpawnShape=function(){"use strict";this.originX=0,this.originY=0,this.setSpawnPosition=function(){}},ss.LineSpawnShape=function(t,e,i,r,s,n,a){"use strict";ss.AbstractSpawnShape.call(this),this.name="LineSpawnShape",this.exposedVariables=["minSpeed","maxSpeed","x1","y1","x2","y2"],this.minSpeed=isUndefined(s)?0:s,this.maxSpeed=isUndefined(n)?0:n,this.x1=t,this.y1=e,this.x2=i,this.y2=r;var o=isDefined(a)?a:!1;this.setSpawnPosition=function(t){var e,i,r=Math.random(),s=this.minSpeed+Math.random()*(this.maxSpeed-this.minSpeed);t.x=this.x1+r*(this.x2-this.x1),t.y=this.y1+r*(this.y2-this.y1),e=new Vector2(this.y2-this.y1,-(this.x2-this.x1)),i=e.magnitude(),e.x*=s/i,e.y*=s/i,o&&1==Math.floor(2*Math.random())&&(e.x*=-1,e.y*=-1),t.velX=e.x,t.velY=e.y},this.updateSpawnLine=function(t,e,i,r){this.x1=t,this.y1=e,this.x2=i,this.y2=r}},ss.LineSpawnShape.prototype=new ss.AbstractSpawnShape,ss.LineSpawnShape.prototype.constructor=ss.LineSpawnShape;var LineSpawnShape=ss.LineSpawnShape;ss.RadialSpawnShape=function(t,e,i,r,s,n){"use strict";ss.AbstractSpawnShape.call(this),this.name="RadialSpawnShape",this.exposedVariables=["radius","minSpeed","maxSpeed","minAngleRad","maxAngleRad","center"],this.center=t,this.radius=isUndefined(e)?0:e,this.minSpeed=isUndefined(i)?0:i,this.maxSpeed=isUndefined(r)?0:r,this.minAngleRad=isUndefined(s)?0:s*MathConst.DEG_TO_RAD,this.maxAngleRad=isUndefined(n)?MathConst.TWO_PI:n*MathConst.DEG_TO_RAD,this.setSpawnPosition=function(t){var e=Math.random()*this.radius,i=this.minAngleRad+Math.random()*(this.maxAngleRad-this.minAngleRad),r=this.minSpeed+Math.random()*(this.maxSpeed-this.minSpeed);t.x=this.center.x+Math.cos(i)*e,t.y=this.center.y+Math.sin(i)*e,t.velX=r*Math.cos(i),t.velY=r*Math.sin(i)}},ss.RadialSpawnShape.prototype=new ss.AbstractSpawnShape,ss.RadialSpawnShape.prototype.constructor=ss.RadialSpawnShape;var RadialSpawnShape=ss.RadialSpawnShape;ss.BoxSpawnShape=function(t,e,i,r,s){"use strict";ss.AbstractSpawnShape.call(this),this.name="BoxSpawnShape",this.exposedVariables=["minSpeed","maxSpeed","x","y","w","h"],this.minSpeed=isUndefined(e)?0:e,this.maxSpeed=isUndefined(i)?0:i,this.minRotate=void 0===r?0:r,this.maxRotate=void 0===s?0:s,this.x=t.x,this.y=t.y,this.w=t.width,this.h=t.height,this.setSpawnPosition=function(t){var e,i=Math.random()*MathConst.TWO_PI,r=this.minSpeed+Math.random()*(this.maxSpeed-this.minSpeed);t.x=this.x+Math.random()*this.w,t.y=this.y+Math.random()*this.h,t.rotation=this.minRotate+Math.random()*(this.maxRotate-this.minRotate),e=new Vector2(r*Math.cos(i),r*Math.sin(i)),t.velX=e.x,t.velY=e.y},this.resetSpawnRect=function(t){this.x=t.x,this.y=t.y,this.w=t.width,this.h=t.height}},ss.BoxSpawnShape.prototype=new ss.AbstractSpawnShape,ss.BoxSpawnShape.prototype.constructor=ss.BoxSpawnShape;var BoxSpawnShape=ss.BoxSpawnShape;ss.BoxSpawnShapeWithDistribution=function(t,e,i,r,s,n,a,o,h){"use strict";ss.AbstractSpawnShape.call(this),this.name="BoxSpawnShapeWithDistribution",this.exposedVariables=["minSpeed","maxSpeed","x","y","w","h","xDistribution","yDistribution"],this.minSpeed=isUndefined(e)?0:e,this.maxSpeed=isUndefined(i)?0:i,this.minRotate=void 0===r?0:r,this.maxRotate=void 0===s?0:s,this.xDistribution=n,this.yDistribution=a,this.flipX=o,this.flipY=h,this.x=t.x,this.y=t.y,this.w=t.width,this.h=t.height,this.setSpawnPosition=function(t){var e,i=Math.random()*MathConst.TWO_PI,r=this.minSpeed+Math.random()*(this.maxSpeed-this.minSpeed);t.x=this.x+MathUtils.getRandomNumberWithDistribution(this.xDistribution,o)*this.w,t.y=this.y+MathUtils.getRandomNumberWithDistribution(this.yDistribution,h)*this.h,t.rotation=this.minRotate+Math.random()*(this.maxRotate-this.minRotate),e=new Vector2(r*Math.cos(i),r*Math.sin(i)),t.velX=e.x,t.velY=e.y},this.resetSpawnRect=function(t){this.x=t.x,this.y=t.y,this.w=t.width,this.h=t.height}},ss.BoxSpawnShapeWithDistribution.prototype=new ss.AbstractSpawnShape,ss.BoxSpawnShapeWithDistribution.prototype.constructor=ss.BoxSpawnShapeWithDistribution;var BoxSpawnShapeWithDistribution=ss.BoxSpawnShapeWithDistribution;ss.DragUpdater=function(t){"use strict";ss.BaseParticleUpdater.call(this);var e=this;this.name="DragUpdater",this.exposedVariables=["dragCoeficcient"],this.dragCoeficcient=-t,e.updateParticles=function(t,e){for(var i,r,s,n,a=0;a<t.length;a++)i=t[a],n=i.velX,r=Math.sqrt(i.velX*i.velX+i.velY*i.velY),s=r/(1-this.dragCoeficcient*e*r),i.velX=i.velX*(s/r),i.velY=i.velY*(s/r)}},ss.DragUpdater.prototype=new ss.BaseParticleUpdater,ss.DragUpdater.prototype.constructor=ss.DragUpdater;var DragUpdater=ss.DragUpdater;ss.ForceUpdater=function(t,e){"use strict";ss.BaseParticleUpdater.call(this);var i=this;this.name="ForceUpdater",this.exposedVariables=["accelX","accelY"],this.accelX=t,this.accelY=e,i.updateParticles=function(t,e){for(var i=0;i<t.length;i++)t[i].velX+=this.accelX*e,t[i].velY+=this.accelY*e}},ss.ForceUpdater.prototype=new ss.BaseParticleUpdater,ss.ForceUpdater.prototype.constructor=ss.ForceUpdater;var ForceUpdater=ss.ForceUpdater;ss.InterpolateColourUpdater=function(t,e,i,r,s,n,a,o,h){"use strict";ss.BaseParticleUpdater.call(this);var l=this;this.name="InterpolateColourUpdater",this.exposedVariables=["r1","g1","b1","a1","r2","g2","b2","a2","func"],this.r1=t,this.g1=e,this.b1=i,this.a1=r,this.r2=s,this.g2=n,this.b2=a,this.a2=o,this.func=h,l.initParticles=function(t,e,i){for(var r=e;i>=r;r++)t[r].filters=[new createjs.ColorFilter(this.r1,this.g1,this.b1,this.a1,0,0,0,0)],t[r].cache(0,0,t[r].getBounds().width,t[r].getBounds().height)},l.updateParticles=function(t){for(var e,i,r=this.r2-this.r1,s=this.g2-this.g1,n=this.b2-this.b1,a=this.a2-this.a1,o=0;o<t.length;o++)e=this.func(t[o].normalizedLife),i=t[o].filters[0],i.redMultiplier=this.r1+e*r,i.greenMultiplier=this.g1+e*s,i.blueMultiplier=this.b1+e*n,i.alphaMultiplier=this.a1+e*a,t[o].updateCache()}},ss.InterpolateColourUpdater.prototype=new ss.BaseParticleUpdater,ss.InterpolateColourUpdater.prototype.constructor=ss.InterpolateColourUpdater;var InterpolateColourUpdater=ss.InterpolateColourUpdater;ss.InterpolatePropertyUpdater=function(t,e,i,r,s){"use strict";ss.BaseParticleUpdater.call(this);var n=this;this.name="InterpolatePropertyUpdater",this.exposedVariables=["propName","start","end","interpolationFunction"],this.propName=t,this.subPropName=isEmpty(s)?void 0:s,this.start=e,this.end=i,this.interpolationFunction=r,n.initParticles=function(t,e,i){var r;if(void 0===this.subPropName)for(r=e;i>=r;r++)t[r][this.propName]=this.start;else for(r=e;i>=r;r++)t[r][this.propName][this.subPropName]=this.start},n.updateParticles=function(t){var e,i=this.end-this.start;if(void 0===this.subPropName)for(e=0;e<t.length;e++)t[e][this.propName]=this.start+this.interpolationFunction(t[e].normalizedLife)*i;else for(e=0;e<t.length;e++)t[e][this.propName][this.subPropName]=this.start+this.interpolationFunction(t[e].normalizedLife)*i}},ss.InterpolateColourUpdater.prototype=new ss.BaseParticleUpdater,ss.InterpolateColourUpdater.prototype.constructor=ss.InterpolateColourUpdater;var InterpolateColourUpdater=ss.InterpolateColourUpdater;ss.ObjectSeekUpdater=function(t,e){"use strict";ss.BaseParticleUpdater.call(this);var i=this;this.name="ObjectSeekUpdater",this.exposedVariables=["accel"];var r=t;this.accel=e,i.updateParticles=function(t,e){for(var i,s,n=new Vector2,a=0;a<t.length;a++)s=t[a],n.x=r.x-s.x,n.y=r.y-s.y,i=n.magnitude(),n.x*=this.accel/i,n.y*=this.accel/i,s.velX+=n.x*e,s.velY+=n.y*e}},ss.ObjectSeekUpdater.prototype=new ss.BaseParticleUpdater,ss.ObjectSeekUpdater.prototype.constructor=ss.ObjectSeekUpdater;var ObjectSeekUpdater=ss.ObjectSeekUpdater;ss.PropertyRateChangeUpdater=function(t,e,i){"use strict";ss.BaseParticleUpdater.call(this);var r=this;this.name="PropertyRateChangeUpdater",this.exposedVariables=["propName","rate"],this.propName=t,this.subPropName=isEmpty(i)?void 0:i,this.rate=e,r.updateParticles=function(t,e){var i;if(void 0===this.subPropName)for(i=0;i<t.length;i++)t[i][this.propName]+=this.rate*e;else for(i=0;i<t.length;i++)t[i][this.propName][this.subPropName]+=this.rate*e}},ss.PropertyRateChangeUpdater.prototype=new ss.BaseParticleUpdater,ss.PropertyRateChangeUpdater.prototype.constructor=ss.PropertyRateChangeUpdater,PropertyRateChangeUpdater=ss.PropertyRateChangeUpdater,ss.RandomInitialRotationUpdater=function(t,e){"use strict";ss.BaseParticleUpdater.call(this);var i=this;this.name="RandomInitialRotationUpdater",i.initParticles=function(i,r,s){var n;for(n=r;s>=n;n++)i[n].rotation=MathUtils.randomRange(t,e)}},ss.RandomInitialRotationUpdater.prototype=new ss.BaseParticleUpdater,ss.RandomInitialRotationUpdater.prototype.constructor=ss.RandomInitialRotationUpdater;var RandomInitialRotationUpdater=ss.RandomInitialRotationUpdater;ss.RandomPropertyInitializer=function(t,e,i,r){"use strict";ss.BaseParticleUpdater.call(this);var s=this;this.name="RandomPropertyInitializer",this.exposedVariables=["property","minValue","maxValue"],this.property=t,this.subPropName=isEmpty(r)?void 0:r,this.minValue=e,this.maxValue=i,s.initParticles=function(t,e,i){var r,s=this.maxValue-this.minValue;if(void 0===this.subPropName)for(r=e;i>=r;r++)t[r][this.property]=this.minValue+Math.random()*s;else for(r=e;i>=r;r++)t[r][this.property][this.subPropName]=this.minValue+Math.random()*s}},ss.RandomPropertyInitializer.prototype=new ss.BaseParticleUpdater,ss.RandomPropertyInitializer.prototype.constructor=ss.RandomPropertyInitializer;var RandomPropertyInitializer=ss.RandomPropertyInitializer;ss.RandomScaleInitializer=function(t,e){"use strict";ss.BaseParticleUpdater.call(this);var i=this;this.name="RandomScaleInitializer",this.exposedVariables=["minScale","maxScale"],this.minScale=t,this.maxScale=e,i.initParticles=function(t,e,i){for(var r,s=this.maxScale-this.minScale,n=e;i>=n;n++)r=this.minScale+Math.random()*s,t[n].scaleX=r,t[n].scaleY=r}},ss.RandomScaleInitializer.prototype=new ss.BaseParticleUpdater,ss.RandomScaleInitializer.prototype.constructor=ss.RandomScaleInitializer;var RandomScaleInitializer=ss.RandomScaleInitializer;ss.RandomRotationUpdater=function(t,e){"use strict";ss.BaseParticleUpdater.call(this);var i=this;this.name="RandomRotationUpdater",this.exposedVariables=["minRotRate","maxRotRate"],this.minRotRate=t,this.maxRotRate=isDefined(e)?e:t,i.initParticles=function(t,e,i){var r,s=this.maxRotRate-this.minRotRate;for(r=e;i>=r;r++)t[r].rotationVel=this.minRotRate+Math.random()*s},i.updateParticles=function(t,e){for(var i=0;i<t.length;i++)t[i].rotation+=t[i].rotationVel*e}},ss.RandomRotationUpdater.prototype=new ss.BaseParticleUpdater,ss.RandomRotationUpdater.prototype.constructor=ss.RandomRotationUpdater;var RandomRotationUpdater=ss.RandomRotationUpdater;ss.CycleInterpolatePropertyUpdater=function(t,e,i,r,s,n,a){"use strict";ss.BaseParticleUpdater.call(this);var o=this;o.name="CycleInterpolatePropertyUpdater",o.exposedVariables=["propName","start","end","interpolationFunction","cycleTime","startOffset","subProperty"],o.propName=t,o.subPropName=isDefined(a)?a:void 0,o.start=e,o.end=i,o.interpolationFunction=r,o.semiCycle=s/2,o.startOffset=isDefined(n)?n:0,o.normalizedStartOffset=n/o.semiCycle,o.range=o.end-o.start,o.initParticles=function(t,e,i){var r;if(void 0===o.subPropName)for(r=e;i>=r;r++)t[r][o.propName]=o.start+o.interpolationFunction(o.normalizedStartOffset)*o.range;else for(r=e;i>=r;r++)t[r][o.propName][o.subPropName]=o.start+o.interpolationFunction(o.normalizedStartOffset)*o.range},o.updateParticles=function(t){var e,i;if(void 0===this.subPropName)for(e=0;e<t.length;e++)i=(o.startOffset+t[e].curLife)%(2*o.semiCycle),i>=o.semiCycle&&(i=o.semiCycle-(i-o.semiCycle)),t[e][o.propName]=o.start+o.interpolationFunction(i/o.semiCycle)*o.range;else for(e=0;e<t.length;e++)i=(o.startOffset+t[e].curLife)%(2*o.semiCycle),i>=o.semiCycle&&(i=o.semiCycle-(i-o.semiCycle)),t[e][o.propName][o.subPropName]=o.start+o.interpolationFunction(i/o.semiCycle)*o.range}},ss.CycleInterpolatePropertyUpdater.prototype=new ss.BaseParticleUpdater,ss.CycleInterpolatePropertyUpdater.prototype.constructor=ss.CycleInterpolatePropertyUpdater;var Loopolation=Loopolation||new function(){"use strict";var t=this;return t.easeSine=function(t){return Math.sin((4*t-2)*(Math.PI/2))},t};ss.PixiParticleEmitter=function(){"use strict";function t(e){return 0===a?(a=e,void(n=window.requestAnimationFrame(t))):(i._handleUpdate((e-a)/1e3),a=e,void(n=window.requestAnimationFrame(t)))}PIXI.DisplayObjectContainer.call(this),ss.AbstractParticleEmitter.call(this);var e,i=this,r=new Object,s=new PIXI.Point(0,0),n=0,a=0;r.setupFromObjects=i.setupFromObjects,i.setupFromObjects=function(t,s,n,a,o,h,l,u){e=u?u:i,r.setupFromObjects(t,s,n,a,o,h,l)},r.setupFromJson=i.setupFromJson,i.setupFromJson=function(t,i){e=i?i:e,r.setupFromJson(t)},i._spawnParticles=function(t){for(var r,n,a=0;t>a;a++)r=i._particleFactory.createParticle(),e.addChild(r),i._spawnShape.setSpawnPosition(r),i._inheritTransform?(s.x=r.x,s.y=r.y,n=e.toLocal(s,i),r.x=n.x,r.y=n.y):(r.x+=i._particleOrigin.x,r.y+=i._particleOrigin.y),i._particles.push(r),r.maxLife=i._minLifetime+Math.random()*(i._maxLifetime-i._minLifetime)},i._enableUpdates=function(){0===n&&(a=0,n=window.requestAnimationFrame(t))},i._disableUpdates=function(){0!==n&&(window.cancelAnimationFrame(n),n=0)},i._removeParticleAt=function(t){var r=i._particles[t];e.removeChild(r),i._particles.splice(t,1)},i._updateParticleOrigin=function(){i._particleOrigin=e.toLocal(new PIXI.Point(0,0),i)}},ss.PixiParticleEmitter.prototype=new PIXI.DisplayObjectContainer,ss.PixiParticleEmitter.prototype.constructor=ss.PixiParticleEmitter,ss.PixiSpriteParticle=function(t,e,i){PIXI.Sprite.call(this,t),ss.AbstractParticle.call(this),this.pivot.x=void 0!==e?e:0,this.pivot.y=void 0!==i?i:0},ss.PixiSpriteParticle.prototype=Object.create(PIXI.Sprite.prototype),ss.PixiSpriteParticle.prototype.constructor=ss.PixiSpriteParticle,function(){ss.PixiSpriteParticleFactory=function(t,e){"use strict";function i(t,e){return r=t,isEmpty(e)?(s=r.width/2,n=r.height/2):(s=r.width*e.x,n=r.height*e.y),a}var r,s,n,a=this;return a.createParticle=function(){return new ss.PixiSpriteParticle(r,s,n)},i(t,e)}}(ss),function(t){"use strict";function e(e){PIXI.DisplayObjectContainer.call(this),PIXI.EventTarget.call(this);var i,r,s,n,a,o,h,l,u=this,c=function(t){return s=[],i=!1,isEmpty(t)||u.load(t),u},d=function(){for(var t=[],e=0;e<u.children.length;e++){var r=u.children[e],s={};isEmpty(r)||(s.child=r,t.push(s))}for(var e=0;e<u.children.length&&u.children.length==o;e++){var r=u.children[e];if(r.ready&&!r.ready())return}i=!0,u.emit(LAYER_READY,u)};return u.name=function(){return r},u.ready=function(){return i},u.normalizedY=function(t){return isEmpty(t)?a:void(a=t)},u.load=function(e){$(window).width(),$(window).height();if(h=e,l=e.details.debug&&"true"===e.details.debug.toString()?!0:!1,r=e.details.name,n=e.details.depth,e.effects)for(var a=0;a<e.effects.length;a++){{var c=e.effects[a];c.type.toLowerCase().replace(/ /g,"-")}if(!ss.SystemInfo.isMobile())switch(c.type){case"dirt":s.push(new t.DirtSpriteEffect(c,e,u));break;case"light-beams":s.push(new t.LightBeamSpriteEffect(c,e,u));break;case"topdirt":s.push(new t.TopDirtSpriteEffect(c,e,u))}}if(e.objects){var p=e.objects;o=p.length;for(var a=0;a<p.length;a++){var f,m=p[a];switch(m.details.type){case"img":f=new ss.TextureSprite(m);break;case"snake":f=new ss.SnakeSprite(m);break;default:console.log("unknown type pass in sprite")}u.addChild(f),f.on(TEXTURE_READY,d)}0==p.length&&(i=!0,u.emit(LAYER_READY,u))}},u.resize=function(t,e){for(var i=0;i<u.children.length;i++){var r=u.children[i];isEmpty(r.resize)||r.resize(t,e)}for(var i=0;i<s.length;i++){var n=s[i];isEmpty(n.resize)||n.resize(t,e)}},u.focus=function(){l&&(console.log("we're on a layer sprite."),console.log("numChildren: "+u.children.length),console.log("numEffects: "+s.length));for(var t=0;t<u.children.length;t++){var e=u.children[t];isEmpty(e.focus)||e.focus()}for(var t=0;t<s.length;t++){var i=s[t];isEmpty(i.focus)||i.focus()}},u.blur=function(){for(var t=0;t<u.children.length;t++){var e=u.children[t];isEmpty(e.blur)||e.blur()}for(var t=0;t<s.length;t++){var i=s[t];isEmpty(i.blur)||i.blur()}},u.update=function(t,e){u.y=(ss.ScrollManager.targetPosition()+u.parent.y)*n;for(var i=0;i<u.children.length;i++){var r=u.children[i];isEmpty(r.update)||r.update(t,e)}for(var i=0;i<s.length;i++){var a=s[i];isEmpty(a.update)||a.update(t,e)}},u._on_=u.on,u.on=function(t,e){u._on_(t,e),t==LAYER_READY&&i&&e.call(LAYER_READY,u)},c(e)}e.prototype=new PIXI.DisplayObjectContainer,e.constructor=e,ss.LayerSprite=e}(ss),function(t){"use strict";function e(e,i,r){PIXI.DisplayObjectContainer.call(this),PIXI.EventTarget.call(this);var s,n,a,o,h,l,u,c,d,p,f=this,m=function(t,e,i){s=!1,p=i,e===!0?(h=PIXI.Texture.fromImage(SKY_TEXTURE),h.baseTexture.hasLoaded?v():(h.baseTexture.on("loaded",function(){v()}),h.baseTexture.on("error",function(){console.log("load error")})),a=new PIXI.Sprite(h),f.addChild(a),c=PIXI.Texture.fromImage(WATER_TEXTURE),c.baseTexture.hasLoaded?v():(c.baseTexture.on("loaded",function(){v()}),c.baseTexture.on("error",function(){console.log("load error")})),o=new PIXI.Sprite(c),f.addChild(o),u=!0):u=!1,isEmpty(t)||f.load(t)},g=function(e){d=e,n=e.length;for(var i=1;n>i;i++){var r=e[i],a=new t.SceneSprite(r,i);a.on(SCENE_READY,v),f.addChild(a)}0==f.children.length&&(s=!0,f.emit({type:"ready",content:f}))},v=function(){if(!s&&(console.log("SCENE READY"),!u||1==h.baseTexture.hasLoaded&&1==c.baseTexture.hasLoaded)){if(u){var t=.72*$(window).height();a.width=$(window).width(),a.height=t,h.height=t,o.y=t,o.width=$(window).width(),o.height=(n-1)*$(window).height()+.28*$(window).height()}for(var e=n+u?2:0,i=0;i<f.children.length&&f.children.length==e;i++){var r=f.children[i];if(p&&console.log(r),r.ready&&!r.ready())return}s=!0,f.emit({type:SITE_READY,content:f})}},_=function(){l.off(SCENE_READY,_),g(e)};return f.debug=function(){return d},f.ready=function(){return s},f.load=function(e){var i=e[0];l=new t.SceneSprite(void 0,0),l.on(SCENE_READY,_),f.addChild(l),l.load(i)},f.resize=function(t,e){var i=.72*e;u&&(a.width=t,a.height=i,h.height=i,o.y=i,o.width=t,o.height=(n-1)*e+.28*e,console.log(t+" "+e));for(var r=u?2:0,s=r;s<f.children.length;s++){var l=f.children[s];isEmpty(l.resize)||(l.y=(s-r)*e,l.resize(t,e))}},f.focus=function(){for(var t=u?2:0,e=t;e<f.children.length;e++){var i=f.children[e];isEmpty(i.focus)||i.focus()}},f.blur=function(){for(var t=u?2:0,e=t;e<f.children.length;e++){var i=f.children[e];isEmpty(i.blur)||i.blur()}},f.update=function(t,e){if(u){var i=.72*$(window).height();a.width=$(window).width(),a.height=i,h.height=i,o.y=i,o.width=$(window).width(),o.height=(n-1)*$(window).height()+.28*$(window).height()}for(var r=0;r<f.children.length;r++){var s=f.children[r];isEmpty(s.update)||s.update(t,e)}},m(e,i,r)}e.prototype=new PIXI.DisplayObjectContainer,e.constructor=e,t.SceneManager=e}(ss),require.ready(function(){ss.ScrollManager=new ScrollManager,ss.SystemInfo.isMobile()?(ss.SiteManager=new MobileSiteManager,ss.SiteManager.addEventListener(SITE_READY,onSiteManagerReady),ss.SiteManager.load()):(ss.SiteManager=new SiteManager,ss.SiteManager.addEventListener(SITE_READY,onSiteManagerReady),ss.SiteManager.load()),$(window).resize(resizeFrame),$(window).resize()}),window.addEventListener("load",function t(){window.removeEventListener("load",t,!1),document.body.classList.remove("load")},!1),$(document).on("LOAD_PAGE_CONTENT",function(){ss.ScrollManager.init(),$(window).resize(),requestAnimFrame(updateFrame),globalInstance.documentReady()});